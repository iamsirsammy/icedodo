var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(r)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let u;function c(t,e){return u||(u=document.createElement("a")),u.href=e,t===u.href}function h(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function l(t){let e;return h(t,(t=>e=t))(),e}function f(t,e,n){t.$$.on_destroy.push(h(e,n))}function p(t,e,n,r){if(t){const i=d(t,e,n,r);return t[0](i)}}function d(t,e,r,i){return t[1]&&i?n(r.ctx.slice(),t[1](i(e))):r.ctx}function v(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}function g(t,e,n,r,i,o){if(i){const s=d(e,n,r,o);t.p(s,i)}}function m(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function y(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function b(t,e){const n={};e=new Set(e);for(const r in t)e.has(r)||"$"===r[0]||(n[r]=t[r]);return n}function w(t){return null==t?"":t}const _="undefined"!=typeof window;let I=_?()=>window.performance.now():()=>Date.now(),T=_?t=>requestAnimationFrame(t):t;const E=new Set;function S(t){E.forEach((e=>{e.c(t)||(E.delete(e),e.f())})),0!==E.size&&T(S)}function A(t,e){t.appendChild(e)}function k(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e.host?e:document}function N(t){const e=x("style");return function(t,e){A(t.head||t,e)}(k(t),e),e}function C(t,e,n){t.insertBefore(e,n||null)}function D(t){t.parentNode.removeChild(t)}function R(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function x(t){return document.createElement(t)}function O(t){return document.createTextNode(t)}function P(){return O(" ")}function L(){return O("")}function M(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function F(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function U(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function j(t,e){t.value=null==e?"":e}function V(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}const q=new Set;let B,$=0;function K(t,e,n,r,i,o,s,a=0){const u=16.666/r;let c="{\n";for(let t=0;t<=1;t+=u){const r=e+(n-e)*o(t);c+=100*t+`%{${s(r,1-r)}}\n`}const h=c+`100% {${s(n,1-n)}}\n}`,l=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(h)}_${a}`,f=k(t);q.add(f);const p=f.__svelte_stylesheet||(f.__svelte_stylesheet=N(t).sheet),d=f.__svelte_rules||(f.__svelte_rules={});d[l]||(d[l]=!0,p.insertRule(`@keyframes ${l} ${h}`,p.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${l} ${r}ms linear ${i}ms 1 both`,$+=1,l}function H(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),$-=i,$||T((()=>{$||(q.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),q.clear())})))}function G(t){B=t}function z(){if(!B)throw new Error("Function called outside component initialization");return B}function W(t){z().$$.on_mount.push(t)}function Q(t,e){z().$$.context.set(t,e)}function X(t){return z().$$.context.get(t)}const Y=[],J=[],Z=[],tt=[],et=Promise.resolve();let nt=!1;function rt(){nt||(nt=!0,et.then(at))}function it(t){Z.push(t)}let ot=!1;const st=new Set;function at(){if(!ot){ot=!0;do{for(let t=0;t<Y.length;t+=1){const e=Y[t];G(e),ut(e.$$)}for(G(null),Y.length=0;J.length;)J.pop()();for(let t=0;t<Z.length;t+=1){const e=Z[t];st.has(e)||(st.add(e),e())}Z.length=0}while(Y.length);for(;tt.length;)tt.pop()();nt=!1,ot=!1,st.clear()}}function ut(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(it)}}let ct;function ht(t,e,n){t.dispatchEvent(function(t,e,n=!1){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,!1,e),r}(`${e?"intro":"outro"}${n}`))}const lt=new Set;let ft;function pt(){ft={r:0,c:[],p:ft}}function dt(){ft.r||o(ft.c),ft=ft.p}function vt(t,e){t&&t.i&&(lt.delete(t),t.i(e))}function gt(t,e,n,r){if(t&&t.o){if(lt.has(t))return;lt.add(t),ft.c.push((()=>{lt.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}}const mt={duration:0};function yt(n,r,i,a){let u=r(n,i),c=a?0:1,h=null,l=null,f=null;function p(){f&&H(n,f)}function d(t,e){const n=t.b-c;return e*=Math.abs(n),{a:c,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function v(r){const{delay:i=0,duration:s=300,easing:a=e,tick:v=t,css:g}=u||mt,m={start:I()+i,b:r};r||(m.group=ft,ft.r+=1),h||l?l=m:(g&&(p(),f=K(n,c,r,s,i,a,g)),r&&v(0,1),h=d(m,s),it((()=>ht(n,r,"start"))),function(t){let e;0===E.size&&T(S),new Promise((n=>{E.add(e={c:t,f:n})}))}((t=>{if(l&&t>l.start&&(h=d(l,s),l=null,ht(n,h.b,"start"),g&&(p(),f=K(n,c,h.b,h.duration,0,a,u.css))),h)if(t>=h.end)v(c=h.b,1-c),ht(n,h.b,"end"),l||(h.b?p():--h.group.r||o(h.group.c)),h=null;else if(t>=h.start){const e=t-h.start;c=h.a+h.d*a(e/h.duration),v(c,1-c)}return!(!h&&!l)})))}return{run(t){s(u)?(ct||(ct=Promise.resolve(),ct.then((()=>{ct=null}))),ct).then((()=>{u=u(),v(t)})):v(t)},end(){p(),h=l=null}}}const bt="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function wt(t){return"object"==typeof t&&null!==t?t:{}}function _t(t){t&&t.c()}function It(t,e,n,i){const{fragment:a,on_mount:u,on_destroy:c,after_update:h}=t.$$;a&&a.m(e,n),i||it((()=>{const e=u.map(r).filter(s);c?c.push(...e):o(e),t.$$.on_mount=[]})),h.forEach(it)}function Tt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Et(e,n,r,s,a,u,c,h=[-1]){const l=B;G(e);const f=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:n.context||[]),callbacks:i(),dirty:h,skip_bound:!1,root:n.target||l.$$.root};c&&c(f.root);let p=!1;if(f.ctx=r?r(e,n.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),p&&function(t,e){-1===t.$$.dirty[0]&&(Y.push(t),rt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],f.update(),p=!0,o(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(D)}else f.fragment&&f.fragment.c();n.intro&&vt(e.$$.fragment),It(e,n.target,n.anchor,n.customElement),at()}G(l)}class St{$destroy(){Tt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const At=t=>void 0===t,kt=t=>"number"==typeof t;function Nt(){let t=0;return()=>t++}const Ct="undefined"==typeof window;function Dt(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}const Rt=[];function xt(e,n=t){let r;const i=new Set;function o(t){if(a(e,t)&&(e=t,r)){const t=!Rt.length;for(const t of i)t[1](),Rt.push(t,e);if(t){for(let t=0;t<Rt.length;t+=2)Rt[t][0](Rt[t+1]);Rt.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,a=t){const u=[s,a];return i.add(u),1===i.size&&(r=n(o)||t),s(e),()=>{i.delete(u),0===i.size&&(r(),r=null)}}}}function Ot(e,n,r){const i=!Array.isArray(e),a=i?[e]:e,u=n.length<2;return function(t,e){return{subscribe:xt(t,e).subscribe}}(r,(e=>{let r=!1;const c=[];let l=0,f=t;const p=()=>{if(l)return;f();const r=n(i?c[0]:c,e);u?e(r):f=s(r)?r:t},d=a.map(((t,e)=>h(t,(t=>{c[e]=t,l&=~(1<<e),r&&p()}),(()=>{l|=1<<e}))));return r=!0,p(),function(){o(d),f()}}))}const Pt=t=>`@@svnav-ctx__${t}`,Lt=Pt("LOCATION"),Mt=Pt("ROUTER"),Ft=Pt("ROUTE"),Ut=Pt("ROUTE_PARAMS"),jt=Pt("FOCUS_ELEM"),Vt=/^:(.+)/,qt=(t,e)=>t.substr(0,e.length)===e,Bt=t=>"*"===t[0],$t=t=>t.replace(/(^\/+|\/+$)/g,"");function Kt(t,e=!1){const n=$t(t).split("/");return e?n.filter(Boolean):n}const Ht=(t,e)=>t+(e?`?${e}`:""),Gt=t=>`/${$t(t)}`;function zt(...t){const e=t.map((t=>Kt(t,!0).join("/"))).join("/");return Gt(e)}const Wt={1:"Link",2:"Route",3:"Router",4:"useFocus",5:"useLocation",6:"useMatch",7:"useNavigate",8:"useParams",9:"useResolvable",10:"useResolve",11:"navigate"},Qt=t=>Wt[t];function Xt(t,e,n,r){const i=n&&function(t,e){let n;return 2===t?n=e.path?`path="${e.path}"`:"default":1===t?n=`to="${e.to}"`:3===t&&(n=`basepath="${e.basepath||""}"`),`<${Qt(t)} ${n||""} />`}(r||t,n),o=i?`\n\nOccurred in: ${i}`:"",s=Qt(t);return`<${s}> ${"function"==typeof e?e(s):e}${o}`}const Yt=t=>(...e)=>t(Xt(...e)),Jt=Yt((t=>{throw new Error(t)})),Zt=Yt(console.warn);function te(t,e){return{route:t,score:t.default?0:Kt(t.fullPath).reduce(((t,e)=>{let n=t;return n+=4,(t=>""===t)(e)?n+=1:(t=>Vt.test(t))(e)?n+=2:Bt(e)?n-=5:n+=3,n}),0),index:e}}function ee(t,e){let n,r;const[i]=e.split("?"),o=Kt(i),s=""===o[0],a=function(t){return t.map(te).sort(((t,e)=>t.score<e.score?1:t.score>e.score?-1:t.index-e.index))}(t);for(let t=0,i=a.length;t<i;t++){const{route:i}=a[t];let u=!1;const c={},h=t=>({...i,params:c,uri:t});if(i.default){r=h(e);continue}const l=Kt(i.fullPath),f=Math.max(o.length,l.length);let p=0;for(;p<f;p++){const t=l[p],e=o[p];if(!At(t)&&Bt(t)){const e="*"===t?"*":t.slice(1);c[e]=o.slice(p).map(decodeURIComponent).join("/");break}if(At(e)){u=!0;break}const n=Vt.exec(t);if(n&&!s){const t=decodeURIComponent(e);c[n[1]]=t}else if(t!==e){u=!0;break}}if(!u){n=h(zt(...o.slice(0,p)));break}}return n||r||null}function ne(t,e){return ee([t],e)}function re(t,e){const{pathname:n,hash:r="",search:i="",state:o}=t,s=Kt(e,!0),a=Kt(n,!0);for(;s.length;)s[0]!==a[0]&&Jt(3,`Invalid state: All locations must begin with the basepath "${e}", found "${n}"`),s.shift(),a.shift();return{pathname:zt(...a),hash:r,search:i,state:o}}const ie=t=>1===t.length?"":t;function oe(t){const e=t.indexOf("?"),n=t.indexOf("#"),r=-1!==e,i=-1!==n,o=i?ie(t.substr(n)):"",s=i?t.substr(0,n):t,a=r?ie(s.substr(e)):"";return{pathname:r?s.substr(0,e):s,search:a,hash:o}}function se(t,e,n){return zt(n,function(t,e){if(qt(t,"/"))return t;const[n,r]=t.split("?"),[i]=e.split("?"),o=Kt(n),s=Kt(i);if(""===o[0])return Ht(i,r);if(!qt(o[0],".")){const t=s.concat(o).join("/");return Ht(("/"===i?"":"/")+t,r)}const a=s.concat(o),u=[];return a.forEach((t=>{".."===t?u.pop():"."!==t&&u.push(t)})),Ht(`/${u.join("/")}`,r)}(t,e))}function ae(t,e){const n=Gt(t.replace(/\*.*$/,""));const r=Kt(n,!0),i=ne({fullPath:n},zt(...Kt(e,!0).slice(0,r.length)));return i&&i.uri}const ue="POP";function ce(t){return{...t.location,pathname:encodeURI(decodeURI(t.location.pathname)),state:t.history.state,_key:t.history.state&&t.history.state._key||"initial"}}function he(t,e){return{...oe(e),state:t}}const le=!(Ct||!window.document||!window.document.createElement),fe=!Ct&&"null"===window.location.origin,pe=function(t){let e=[],n=ce(t),r=ue;const i=(t=e)=>t.forEach((t=>t({location:n,action:r})));return{get location(){return n},listen(o){e.push(o);i([o]);const s=Dt(t,"popstate",(()=>{n=ce(t),r=ue,i([o])}));return()=>{s(),e=e.filter((t=>t!==o))}},navigate(e,o){const{state:s={},replace:a=!1}=o||{};if(r=a?"REPLACE":"PUSH",kt(e))o&&Zt(11,"Navigation options (state or replace) are not supported, when passing a number as the first argument to navigate. They are ignored."),r=ue,t.history.go(e);else{const n={...s,_key:Math.random().toString(36).substring(2)};try{t.history[a?"replaceState":"pushState"](n,"",e)}catch(n){t.location[a?"replace":"assign"](e)}}n=ce(t),i()}}}(le&&!fe?window:function(t="/"){let e=0,n=[he(null,t)];return{get entries(){return n},get location(){return n[e]},addEventListener(){},removeEventListener(){},history:{get state(){return n[e].state},pushState(t,r,i){e++,n=n.slice(0,e),n.push(he(t,i))},replaceState(t,r,i){n[e]=he(t,i)},go(t){const r=e+t;r<0||r>n.length-1||(e=r)}}}}());let de=null,ve=!0;function ge(t){(!de||t.level>de.level||t.level===de.level&&function(t,e){const n=document.querySelectorAll("[data-svnav-router]");for(let r=0;r<n.length;r++){const i=n[r],o=Number(i.dataset.svnavRouter);if(o===t)return!0;if(o===e)return!1}return!1}(t.routerId,de.routerId))&&(de=t)}function me(t){if(!t)return!1;const e="tabindex";try{if(!t.hasAttribute(e)){let n;t.setAttribute(e,"-1");const r=()=>{t.removeAttribute(e),n()};n=Dt(t,"blur",r)}return t.focus(),document.activeElement===t}catch(t){return!1}}function ye(t,e){return Number(t.dataset.svnavRouteEnd)===e}function be(t,e=document){return e.querySelector(t)}function we(t){Promise.resolve(l(t.focusElement)).then((e=>{const n=e||function(t){let e=be(`[data-svnav-route-start="${t}"]`).nextElementSibling;for(;!ye(e,t);){if(/^H[1-6]$/i.test(e.tagName))return e;const t=be("h1,h2,h3,h4,h5,h6",e);if(t)return t;e=e.nextElementSibling}return null}(t.id);n||Zt(3,'Could not find an element to focus. You should always render a header for accessibility reasons, or set a custom focus element via the "useFocus" hook. If you don\'t want this Route or Router to manage focus, pass "primary={false}" to it.',t,2);me(n)||me(document.documentElement)}))}const _e=(t,e,n)=>(r,i)=>(rt(),et).then((()=>{if(de&&!ve){if(r&&we(de.route),t.announcements&&i){const{path:r,fullPath:i,meta:o,params:s,uri:a}=de.route,u=t.createAnnouncement({path:r,fullPath:i,meta:o,params:s,uri:a},l(n));Promise.resolve(u).then((t=>{e.set(t)}))}de=null}else ve=!1}));function Ie(t){let e,n,r,i,o;const s=t[20].default,a=p(s,t,t[19],null);let u=t[2]&&t[4]&&t[1].announcements&&function(t){let e,n;return{c(){e=x("div"),n=O(t[0]),F(e,"role","status"),F(e,"aria-atomic","true"),F(e,"aria-live","polite"),F(e,"style","position:fixed;top:-1px;left:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0;")},m(t,r){C(t,e,r),A(e,n)},p(t,e){1&e[0]&&U(n,t[0])},d(t){t&&D(e)}}}(t);return{c(){e=x("div"),n=P(),a&&a.c(),r=P(),u&&u.c(),i=L(),V(e,"display","none"),F(e,"aria-hidden","true"),F(e,"data-svnav-router",t[3])},m(t,s){C(t,e,s),C(t,n,s),a&&a.m(t,s),C(t,r,s),u&&u.m(t,s),C(t,i,s),o=!0},p(t,e){a&&a.p&&(!o||524288&e[0])&&g(a,s,t,t[19],o?v(s,t[19],e,null):m(t[19]),null),t[2]&&t[4]&&t[1].announcements&&u.p(t,e)},i(t){o||(vt(a,t),o=!0)},o(t){gt(a,t),o=!1},d(t){t&&D(e),t&&D(n),a&&a.d(t),t&&D(r),u&&u.d(t),t&&D(i)}}}const Te=Nt(),Ee="/";function Se(t,e,n){let r,i,o,s,a,{$$slots:u={},$$scope:c}=e,{basepath:h=Ee}=e,{url:l=null}=e,{history:p=pe}=e,{primary:d=!0}=e,{a11y:v={}}=e;const g={createAnnouncement:t=>`Navigated to ${t.uri}`,announcements:!0,...v},m=h,y=Gt(h),b=X(Lt),w=X(Mt),_=!b,I=Te(),T=d&&!(w&&!w.manageFocus),E=xt("");f(t,E,(t=>n(0,a=t)));const S=xt([]);f(t,S,(t=>n(18,s=t)));const A=xt(null);f(t,A,(t=>n(16,i=t)));let k=!1;const N=_?0:w.level+1,C=_?xt(re(Ct?oe(l):p.location,y)):b;f(t,C,(t=>n(15,r=t)));const D=xt(r);f(t,D,(t=>n(17,o=t)));const R=_e(g,E,C),x=t=>e=>e.filter((e=>e.id!==t));return _||h===Ee||Zt(3,'Only top-level Routers can have a "basepath" prop. It is ignored.',{basepath:h}),_&&(W((()=>p.listen((t=>{const e=re(t.location,y);D.set(r),C.set(e)})))),Q(Lt,C)),Q(Mt,{activeRoute:A,registerRoute:function(t){if(Ct){if(k)return;const e=ne(t,r.pathname);if(e)return k=!0,e}else S.update((e=>{const n=x(t.id)(e);return n.push(t),n}))},unregisterRoute:function(t){S.update(x(t))},manageFocus:T,level:N,id:I,history:_?p:w.history,basepath:_?y:w.basepath}),t.$$set=t=>{"basepath"in t&&n(10,h=t.basepath),"url"in t&&n(11,l=t.url),"history"in t&&n(12,p=t.history),"primary"in t&&n(13,d=t.primary),"a11y"in t&&n(14,v=t.a11y),"$$scope"in t&&n(19,c=t.$$scope)},t.$$.update=()=>{if(1024&t.$$.dirty[0]&&h!==m&&Zt(3,'You cannot change the "basepath" prop. It is ignored.'),294912&t.$$.dirty[0]){const t=ee(s,r.pathname);A.set(t)}if(163840&t.$$.dirty[0]&&_){const t=!!r.hash,e=!t&&T,n=!t||r.pathname!==o.pathname;R(e,n)}65536&t.$$.dirty[0]&&T&&i&&i.primary&&ge({level:N,routerId:I,route:i})},[a,g,_,I,T,E,S,A,C,D,h,l,p,d,v,r,i,o,s,c,u]}class Ae extends St{constructor(t){super(),Et(this,t,Se,Ie,a,{basepath:10,url:11,history:12,primary:13,a11y:14},null,[-1,-1])}}function ke(t,e,n=Mt,r=3){X(n)||Jt(t,(t=>`You cannot use ${t} outside of a ${Qt(r)}.`),e)}function Ne(){return ke(5),(t=>{const{subscribe:e}=X(t);return{subscribe:e}})(Lt)}function Ce(){const t=X(Ft);return t?Ot(t,(t=>t.base)):xt("/")}function De(){ke(7);const t=function(){ke(10);const t=Ce(),{basepath:e}=X(Mt);return n=>se(n,l(t),e)}(),{navigate:e}=function(){const{history:t}=X(Mt);return t}();return(n,r)=>{const i=kt(n)?n:t(n);return e(i,r)}}const Re=t=>({params:16&t,location:8&t}),xe=t=>({params:Ct?l(t[9]):t[4],location:t[3],navigate:t[10]});function Oe(t){let e,n;return e=new Ae({props:{primary:t[1],$$slots:{default:[Me]},$$scope:{ctx:t}}}),{c(){_t(e.$$.fragment)},m(t,r){It(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.primary=t[1]),264217&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(vt(e.$$.fragment,t),n=!0)},o(t){gt(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function Pe(t){let e;const n=t[17].default,r=p(n,t,t[18],xe);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,i){r&&r.p&&(!e||262168&i)&&g(r,n,t,t[18],e?v(n,t[18],i,Re):m(t[18]),xe)},i(t){e||(vt(r,t),e=!0)},o(t){gt(r,t),e=!1},d(t){r&&r.d(t)}}}function Le(t){let e,r,i;const o=[{location:t[3]},{navigate:t[10]},Ct?l(t[9]):t[4],t[11]];var s=t[0];function a(t){let e={};for(let t=0;t<o.length;t+=1)e=n(e,o[t]);return{props:e}}return s&&(e=new s(a())),{c(){e&&_t(e.$$.fragment),r=L()},m(t,n){e&&It(e,t,n),C(t,r,n),i=!0},p(t,n){const i=3608&n?function(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const s=t[o],a=e[o];if(a){for(const t in s)t in a||(r[t]=1);for(const t in a)i[t]||(n[t]=a[t],i[t]=1);t[o]=a}else for(const t in s)i[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}(o,[8&n&&{location:t[3]},1024&n&&{navigate:t[10]},528&n&&wt(Ct?l(t[9]):t[4]),2048&n&&wt(t[11])]):{};if(s!==(s=t[0])){if(e){pt();const t=e;gt(t.$$.fragment,1,0,(()=>{Tt(t,1)})),dt()}s?(e=new s(a()),_t(e.$$.fragment),vt(e.$$.fragment,1),It(e,r.parentNode,r)):e=null}else s&&e.$set(i)},i(t){i||(e&&vt(e.$$.fragment,t),i=!0)},o(t){e&&gt(e.$$.fragment,t),i=!1},d(t){t&&D(r),e&&Tt(e,t)}}}function Me(t){let e,n,r,i;const o=[Le,Pe],s=[];function a(t,e){return null!==t[0]?0:1}return e=a(t),n=s[e]=o[e](t),{c(){n.c(),r=L()},m(t,n){s[e].m(t,n),C(t,r,n),i=!0},p(t,i){let u=e;e=a(t),e===u?s[e].p(t,i):(pt(),gt(s[u],1,1,(()=>{s[u]=null})),dt(),n=s[e],n?n.p(t,i):(n=s[e]=o[e](t),n.c()),vt(n,1),n.m(r.parentNode,r))},i(t){i||(vt(n),i=!0)},o(t){gt(n),i=!1},d(t){s[e].d(t),t&&D(r)}}}function Fe(t){let e,n,r,i,o,s=t[2]&&Oe(t);return{c(){e=x("div"),n=P(),s&&s.c(),r=P(),i=x("div"),V(e,"display","none"),F(e,"aria-hidden","true"),F(e,"data-svnav-route-start",t[5]),V(i,"display","none"),F(i,"aria-hidden","true"),F(i,"data-svnav-route-end",t[5])},m(t,a){C(t,e,a),C(t,n,a),s&&s.m(t,a),C(t,r,a),C(t,i,a),o=!0},p(t,[e]){t[2]?s?(s.p(t,e),4&e&&vt(s,1)):(s=Oe(t),s.c(),vt(s,1),s.m(r.parentNode,r)):s&&(pt(),gt(s,1,1,(()=>{s=null})),dt())},i(t){o||(vt(s),o=!0)},o(t){gt(s),o=!1},d(t){t&&D(e),t&&D(n),s&&s.d(t),t&&D(r),t&&D(i)}}}const Ue=Nt();function je(t,e,r){let i;const o=["path","component","meta","primary"];let s,a,u,c,h=b(e,o),{$$slots:l={},$$scope:p}=e,{path:d=""}=e,{component:v=null}=e,{meta:g={}}=e,{primary:m=!0}=e;ke(2,e);const w=Ue(),{registerRoute:_,unregisterRoute:I,activeRoute:T}=X(Mt);f(t,T,(t=>r(15,s=t)));const E=Ce();f(t,E,(t=>r(16,u=t)));const S=Ne();f(t,S,(t=>r(3,a=t)));const A=xt(null);let k;const N=xt(),C=xt({});f(t,C,(t=>r(4,c=t))),Q(Ft,N),Q(Ut,C),Q(jt,A);const D=De();return Ct||function(t){z().$$.on_destroy.push(t)}((()=>I(w))),t.$$set=t=>{r(23,e=n(n({},e),y(t))),r(11,h=b(e,o)),"path"in t&&r(12,d=t.path),"component"in t&&r(0,v=t.component),"meta"in t&&r(13,g=t.meta),"primary"in t&&r(1,m=t.primary),"$$scope"in t&&r(18,p=t.$$scope)},t.$$.update=()=>{if(77834&t.$$.dirty){const t=""===d,e=zt(u,d),n={id:w,path:d,meta:g,default:t,fullPath:t?"":e,base:t?u:ae(e,a.pathname),primary:m,focusElement:A};N.set(n),r(14,k=_(n))}if(49152&t.$$.dirty&&r(2,i=!!(k||s&&s.id===w)),49156&t.$$.dirty&&i){const{params:t}=k||s;C.set(t)}},e=y(e),[v,m,i,a,c,w,T,E,S,C,D,h,d,g,k,s,u,l,p]}class Ve extends St{constructor(t){super(),Et(this,t,je,Fe,a,{path:12,component:0,meta:13,primary:1})}}function qe(t){const e=t-1;return e*e*e+1}function Be(t,{delay:n=0,duration:r=400,easing:i=e}={}){const o=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:i,css:t=>"opacity: "+t*o}}function $e(t,{delay:e=0,duration:n=400,easing:r=qe}={}){const i=getComputedStyle(t),o=+i.opacity,s=parseFloat(i.height),a=parseFloat(i.paddingTop),u=parseFloat(i.paddingBottom),c=parseFloat(i.marginTop),h=parseFloat(i.marginBottom),l=parseFloat(i.borderTopWidth),f=parseFloat(i.borderBottomWidth);return{delay:e,duration:n,easing:r,css:t=>`overflow: hidden;opacity: ${Math.min(20*t,1)*o};height: ${t*s}px;padding-top: ${t*a}px;padding-bottom: ${t*u}px;margin-top: ${t*c}px;margin-bottom: ${t*h}px;border-top-width: ${t*l}px;border-bottom-width: ${t*f}px;`}}function Ke(e){let n;return{c(){n=x("div"),n.innerHTML='<p>2021 Onionfist Studio. All Rights Reserved. Contact: flyingdodo9000@gmail.com</p> \n\t<p><span>By using this site, you agree to our</span> \n\t\t<a href="https://onionfist.com/privacy_policy/" target="_blank" class="svelte-1gy9b2v">Privacy Policy</a> \n\t\t<span>and</span> \n\t\t<a href="https://onionfist.com/terms_of_service/" target="_blank" class="svelte-1gy9b2v">Terms of Service</a></p>',F(n,"class","svelte-1gy9b2v")},m(t,e){C(t,n,e)},p:t,i:t,o:t,d(t){t&&D(n)}}}class He extends St{constructor(t){super(),Et(this,t,null,Ke,a,{})}}function Ge(e){let n,r,i,o,s,a,u,c,h,l,f,p,d;return c=new He({}),{c(){n=x("main"),r=x("div"),r.innerHTML='<span id="logo_inner" class="svelte-1eexki2">onionfist.com</span>',i=P(),o=x("div"),o.innerHTML='<h2 class="row_heading svelte-1eexki2">We dodo what we want ü¶Ñ</h2> \n    <a class="product svelte-1eexki2" href="icedodo"><div class="txt svelte-1eexki2">Ice Dodo</div> \n      <img class="img svelte-1eexki2" src="assets/icedodo.png"/></a> \n\n    <a class="product svelte-1eexki2" href="https://subcitizens.onionfist.com/"><div class="txt svelte-1eexki2">SubCitizens</div> \n      <img class="img svelte-1eexki2" src="assets/subcitizens.png"/></a>',s=P(),a=x("div"),a.innerHTML='<h2 class="row_heading svelte-1eexki2">More links for you üê∏</h2> \n    <a class="button svelte-1eexki2" href="/icelb?map_id=overall&amp;sort_by=dodo_score"><div class="button_txt svelte-1eexki2">Ice Dodo Leaderboard</div></a> \n    <a class="button svelte-1eexki2" href="https://iceparty.io"><div class="button_txt svelte-1eexki2">IceParty</div></a> \n    <a class="button svelte-1eexki2" href="https://discord.gg/S8kZjgb" target="_blank"><div class="button_txt svelte-1eexki2">Discord Community</div></a> \n    <a class="button svelte-1eexki2" href="https://chrome.google.com/webstore/detail/ice-dodo/jhidcpailhmpjpbdbhceiaeeggkalgmd" target="_blank"><div class="button_txt svelte-1eexki2">Chrome Extension</div></a>',u=P(),_t(c.$$.fragment),h=P(),l=x("link"),f=x("meta"),p=x("meta"),F(r,"id","logo"),F(r,"class","svelte-1eexki2"),F(o,"id","row1"),F(o,"class","row_default svelte-1eexki2"),F(a,"id","row2"),F(a,"class","row_default svelte-1eexki2"),F(n,"class","svelte-1eexki2"),F(l,"href","https://fonts.googleapis.com/css2?family=Alata&display=swap"),F(l,"rel","stylesheet"),F(f,"charset","utf-8"),F(p,"name","viewport"),F(p,"content","width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0")},m(t,e){C(t,n,e),A(n,r),A(n,i),A(n,o),A(n,s),A(n,a),A(n,u),It(c,n,null),C(t,h,e),A(document.head,l),A(document.head,f),A(document.head,p),d=!0},p:t,i(t){d||(vt(c.$$.fragment,t),d=!0)},o(t){gt(c.$$.fragment,t),d=!1},d(t){t&&D(n),Tt(c),t&&D(h),D(l),D(f),D(p)}}}class ze extends St{constructor(t){super(),Et(this,t,null,Ge,a,{})}}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var We=function(t,e){return(We=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Qe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}We(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Xe=function(){return(Xe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ye(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Je(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function Ze(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function tn(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function en(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var nn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function rn(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=rn(t[n],e[n]));return t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var on=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function sn(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function an(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var un=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,cn.prototype.create),o}return Qe(e,t),e}(Error),cn=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?hn(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new un(i,a,r);return u},t}();function hn(t,e){return t.replace(ln,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var ln=/\{\$([^}]+)}/g;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function fn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function pn(t,e){var n=new dn(t,e);return n.subscribe.bind(n)}var dn=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=vn),void 0===r.error&&(r.error=vn),void 0===r.complete&&(r.complete=vn);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function vn(){}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function gn(t){return t&&t._delegate?t._delegate:t}var mn=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),yn="[DEFAULT]",bn=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new on;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t))try{this.getOrInitializeService({instanceIdentifier:yn})}catch(t){}try{for(var r=Ze(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=tn(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=yn),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Ye(this,void 0,void 0,(function(){var t;return Je(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(en(en([],tn(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),tn(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=yn),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var a=Ze(this.instancesDeferred.entries()),u=a.next();!u.done;u=a.next()){var c=tn(u.value,2),h=c[0],l=c[1];o===this.normalizeInstanceIdentifier(h)&&l.resolve(s)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=Ze(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===yn?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=yn),this.component?this.component.multipleInstances?t:yn:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var wn,_n=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new bn(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */function In(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Tn,En=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(Tn||(Tn={}));var Sn,An={debug:Tn.DEBUG,verbose:Tn.VERBOSE,info:Tn.INFO,warn:Tn.WARN,error:Tn.ERROR,silent:Tn.SILENT},kn=Tn.INFO,Nn=((wn={})[Tn.DEBUG]="log",wn[Tn.VERBOSE]="log",wn[Tn.INFO]="info",wn[Tn.WARN]="warn",wn[Tn.ERROR]="error",wn),Cn=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Nn[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,In(["["+i+"]  "+t.name+":"],n))}},Dn=function(){function t(t){this.name=t,this._logLevel=kn,this._logHandler=Cn,this._userLogHandler=null,En.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Tn))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?An[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,In([this,Tn.DEBUG],t)),this._logHandler.apply(this,In([this,Tn.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,In([this,Tn.VERBOSE],t)),this._logHandler.apply(this,In([this,Tn.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,In([this,Tn.INFO],t)),this._logHandler.apply(this,In([this,Tn.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,In([this,Tn.WARN],t)),this._logHandler.apply(this,In([this,Tn.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,In([this,Tn.ERROR],t)),this._logHandler.apply(this,In([this,Tn.ERROR],t))},t}();function Rn(t){En.forEach((function(e){e.setLogLevel(t)}))}var xn,On=((Sn={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Sn["bad-app-name"]="Illegal App name: '{$appName}",Sn["duplicate-app"]="Firebase App named '{$appName}' already exists",Sn["app-deleted"]="Firebase App named '{$appName}' already deleted",Sn["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Sn["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Sn),Pn=new cn("app","Firebase",On),Ln="@firebase/app",Mn="[DEFAULT]",Fn=((xn={})[Ln]="fire-core",xn["@firebase/analytics"]="fire-analytics",xn["@firebase/app-check"]="fire-app-check",xn["@firebase/auth"]="fire-auth",xn["@firebase/database"]="fire-rtdb",xn["@firebase/functions"]="fire-fn",xn["@firebase/installations"]="fire-iid",xn["@firebase/messaging"]="fire-fcm",xn["@firebase/performance"]="fire-perf",xn["@firebase/remote-config"]="fire-rc",xn["@firebase/storage"]="fire-gcs",xn["@firebase/firestore"]="fire-fst",xn["fire-js"]="fire-js",xn["firebase-wrapper"]="fire-js-all",xn),Un=new Dn("@firebase/app"),jn=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=rn(void 0,t),this.container=new _n(e.name),this._addComponent(new mn("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=Mn),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Mn),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){Un.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Pn.create("app-deleted",{appName:this.name_})},t}();jn.prototype.name&&jn.prototype.options||jn.prototype.delete||console.log("dc");
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Vn(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name=Mn);var s=o.name;if("string"!=typeof s||!s)throw Pn.create("bad-app-name",{appName:String(s)});if(fn(e,s))throw Pn.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Fn[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Un.warn(u.join(" "))}o(new mn(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:Rn,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Pn.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=An[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Tn[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=En;r<i.length;r++)n(i[r])}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!fn(e,t=t||Mn))throw Pn.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return Un.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw Pn.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&rn(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var h=c[u];e[h]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qn=function t(){var e=Vn(jn);return e.INTERNAL=Xe(Xe({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){rn(e,t)},createSubscribe:pn,ErrorFactory:cn,deepExtend:rn}),e}(),Bn=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Un.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var $n=self.firebase.SDK_VERSION;$n&&$n.indexOf("LITE")>=0&&Un.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Kn=qn.initializeApp;qn.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return an()&&Un.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Kn.apply(void 0,t)};var Hn=qn;!function(t,e){t.INTERNAL.registerComponent(new mn("platform-logger",(function(t){return new Bn(t)}),"PRIVATE")),t.registerVersion(Ln,"0.6.28",e),t.registerVersion("fire-js","")}(Hn);var Gn="8.8.0";
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
Hn.registerVersion("firebase",Gn,"app"),Hn.SDK_VERSION=Gn,function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Ra(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Ra(i(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&a.test(t)?t:""}function h(){}function l(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==l(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),g=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:y).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function _(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function T(t,e,n){this.code=A+t,this.message=e||k[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new T(e.substring(A.length),t.message,t.serverResponse):null}_(T,Error),T.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},T.prototype.toJSON=function(){return this.w()};var S,A="auth/",k={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function C(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function D(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function R(t){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function x(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function O(t,e){throw new x("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function P(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}S=C("__EID__")?"__EID__":void 0,_(R,Error),R.prototype.name="CustomError",_(x,R),x.prototype.name="AssertionError",P.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var F=new P((function(){return new j}),(function(t){t.reset()}));function U(){var t=me,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function j(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},j.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var V=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},q=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var B=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},$=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},K=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function H(t,e){return 0<=V(t,e)}function G(t,e){var n;return(n=0<=(e=V(t,e)))&&Array.prototype.splice.call(t,e,1),n}function z(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function W(t){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var X,Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,Z=/</g,tt=/>/g,et=/"/g,nt=/'/g,rt=/\x00/g,it=/[\x00&<>"']/;function ot(t,e){return-1!=t.indexOf(e)}function st(t,e){return t<e?-1:t>e?1:0}t:{var at=s.navigator;if(at){var ut=at.userAgent;if(ut){X=ut;break t}}X=""}function ct(t){return ot(X,t)}function ht(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function lt(t){for(var e in t)return!1;return!0}function ft(t){var e,n={};for(e in t)n[e]=t[e];return n}var pt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<pt.length;o++)n=pt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;O("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function gt(t,e){this.a=t===wt&&e||"",this.b=bt}function mt(t){return t instanceof gt&&t.constructor===gt&&t.b===bt?t.a:(O("expected object of type Const, got '"+t+"'"),"type_error:Const")}gt.prototype.ta=!0,gt.prototype.sa=function(){return this.a},gt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,bt={},wt={};function _t(){if(void 0===yt){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(t){s.console&&s.console.error(t.message)}yt=t}else yt=t}return yt}function It(t,e){this.a=e===kt?t:""}function Tt(t){return t instanceof It&&t.constructor===It?t.a:(O("expected object of type TrustedResourceUrl, got '"+t+"' of type "+l(t)),"type_error:TrustedResourceUrl")}function Et(t,e){var n=mt(t);if(!At.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=_t();return new It(t=e?e.createScriptURL(t):t,kt)}(t=n.replace(St,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof gt?mt(t):encodeURIComponent(String(t))})))}It.prototype.ta=!0,It.prototype.sa=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var St=/%{(\w+)}/g,At=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,kt={};function Nt(t,e){this.a=e===Lt?t:""}function Ct(t){return t instanceof Nt&&t.constructor===Nt?t.a:(O("expected object of type SafeUrl, got '"+t+"' of type "+l(t)),"type_error:SafeUrl")}Nt.prototype.ta=!0,Nt.prototype.sa=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Dt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Rt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,xt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ot(t){if(t instanceof Nt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),xt.test(t))t=new Nt(t,Lt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Rt);t=e&&Dt.test(e[1])?new Nt(t,Lt):null}return t}function Pt(t){return t instanceof Nt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),xt.test(t)||(t="about:invalid#zClosurez"),new Nt(t,Lt))}var Lt={},Mt=new Nt("about:invalid#zClosurez",Lt);function Ft(t,e,n){this.a=n===Ut?t:""}Ft.prototype.ta=!0,Ft.prototype.sa=function(){return this.a.toString()},Ft.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ut={};function jt(t,e,n,r){return t=t instanceof Nt?t:Pt(t),e=e||s,n=n instanceof gt?mt(n):n||"",e.open(Ct(t),n,r,void 0)}function Vt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function qt(t){return it.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(tt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(et,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(nt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(rt,"&#0;"))),t}function Bt(t){return Bt[" "](t),t}Bt[" "]=h;var $t,Kt,Ht=ct("Opera"),Gt=ct("Trident")||ct("MSIE"),zt=ct("Edge"),Wt=zt||Gt,Qt=ct("Gecko")&&!(ot(X.toLowerCase(),"webkit")&&!ct("Edge"))&&!(ct("Trident")||ct("MSIE"))&&!ct("Edge"),Xt=ot(X.toLowerCase(),"webkit")&&!ct("Edge");function Yt(){var t=s.document;return t?t.documentMode:void 0}t:{var Jt="",Zt=(Kt=X,Qt?/rv:([^\);]+)(\)|;)/.exec(Kt):zt?/Edge\/([\d\.]+)/.exec(Kt):Gt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Kt):Xt?/WebKit\/(\S+)/.exec(Kt):Ht?/(?:Version)[ \/]?(\S+)/.exec(Kt):void 0);if(Zt&&(Jt=Zt?Zt[1]:""),Gt){var te=Yt();if(null!=te&&te>parseFloat(Jt)){$t=String(te);break t}}$t=Jt}var ee,ne={};function re(t){return function(t,e){var n=ne;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Y(String($t)).split("."),r=Y(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=st(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||st(0==s[2].length,0==a[2].length)||st(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(s.document&&Gt){var ie=Yt();ee=ie||(parseInt($t,10)||void 0)}else ee=void 0;var oe=ee;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Kt){}var se=!Gt||9<=Number(oe);function ae(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ue(t,e){ht(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:le.hasOwnProperty(n)?t.setAttribute(le[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var ce,he,le={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function fe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}q(s?Q(o):o,r)}}}function pe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function de(t){s.setTimeout((function(){throw t}),0)}function ve(t,e){he||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);he=function(){t.then(ye)}}else he=function(){var t=ye;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!ct("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(ce||(ce=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ct("Presto")&&(t=function(){var t=pe(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ct("Trident")&&!ct("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),ce(t)):s.setImmediate(t)}}(),ge||(he(),ge=!0),me.add(t,e)}var ge=!1,me=new M;function ye(){for(var t;t=U();){try{t.a.call(t.b)}catch(t){de(t)}L(F,t)}ge=!1}function be(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){Oe(n,_e,t)}),(function(t){if(!(t instanceof Ve))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Oe(n,Ie,t)}))}catch(t){Oe(this,Ie,t)}}var we=0,_e=2,Ie=3;function Te(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Te.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ee=new P((function(){return new Te}),(function(t){t.reset()}));function Se(t,e,n){var r=Ee.get();return r.g=t,r.b=e,r.f=n,r}function Ae(t){if(t instanceof be)return t;var e=new be(h);return Oe(e,_e,t),e}function ke(t){return new be((function(e,n){n(t)}))}function Ne(t,e,n){Pe(t,e,n,null)||ve(w(e,t))}function Ce(t){return new be((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ne(t[o],w(i,o,!0),w(i,o,!1));else e(r)}))}function De(t,e){if(t.a==we)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==we&&1==r?De(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Me(n),Fe(n,i,Ie,e)))}t.c=null}else Oe(t,Ie,e)}function Re(t,e){t.b||t.a!=_e&&t.a!=Ie||Le(t),t.f?t.f.next=e:t.b=e,t.f=e}function xe(t,e,n,r){var i=Se(null,null,null);return i.a=new be((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ve?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,Re(t,i),i.a}function Oe(t,e,n){t.a==we&&(t===n&&(e=Ie,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Pe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Le(t),e!=Ie||n instanceof Ve||function(t,e){t.g=!0,ve((function(){t.g&&je.call(null,e)}))}(t,n)))}function Pe(t,e,n,r){if(t instanceof be)return Re(t,Se(e||h,n||null,r)),!0;if(D(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function Le(t){t.h||(t.h=!0,ve(t.gc,t))}function Me(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Ie&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ue(e,n,r);else try{e.c?e.g.call(e.f):Ue(e,n,r)}catch(t){je.call(null,t)}L(Ee,e)}function Ue(t,e,n){e==_e?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return xe(this,p(t)?t:null,p(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(t=be.prototype).oa=function(t,e){return(t=Se(t,t,e)).c=!0,Re(this,t),this},t.o=function(t,e){return xe(this,null,t,e)},t.cancel=function(t){if(this.a==we){var e=new Ve(t);ve((function(){De(this,e)}),this)}},t.$c=function(t){this.a=we,Oe(this,_e,t)},t.ad=function(t){this.a=we,Oe(this,Ie,t)},t.gc=function(){for(var t;t=Me(this);)Fe(this,t,this.a,this.i);this.h=!1};var je=de;function Ve(t){R.call(this,t)}function qe(){this.ya=this.ya,this.pa=this.pa}_(Ve,R),Ve.prototype.name="cancel";var Be={};function $e(t){if(!t.ya&&(t.ya=!0,t.Da(),0)){var e=function(t){return Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++g)}(t);delete Be[e]}}qe.prototype.ya=!1,qe.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Ke=Object.freeze||function(t){return t},He=!Gt||9<=Number(oe),Ge=Gt&&!re("9"),ze=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",h,e),s.removeEventListener("test",h,e)}catch(t){}return t}();function We(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Qe(t,e){if(We.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Qt){t:{try{Bt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Xe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}We.prototype.preventDefault=function(){this.defaultPrevented=!0},_(Qe,We);var Xe=Ke({2:"touch",3:"pen",4:"mouse"});Qe.prototype.preventDefault=function(){Qe.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ge)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Qe.prototype.g=function(){return this.a};var Ye="closure_listenable_"+(1e6*Math.random()|0),Je=0;function Ze(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++Je,this.wa=this.Qa=!1}function tn(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function en(t){this.src=t,this.a={},this.b=0}function nn(t,e){var n=e.type;n in t.a&&G(t.a[n],e)&&(tn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function rn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}en.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=rn(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):((e=new Ze(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var on="closure_lm_"+(1e6*Math.random()|0),sn={};function an(t,e,n,r,i){if(r&&r.once)cn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)an(t,e[o],n,r,i);else n=yn(n),t&&t[Ye]?wn(t,e,n,d(r)?!!r.capture:!!r,i):un(t,e,n,!1,r,i)}function un(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=d(i)?!!i.capture:!!i,a=gn(t);if(a||(t[on]=a=new en(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=vn,e=He?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ze||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(fn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function cn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=yn(n),t&&t[Ye]?_n(t,e,n,d(r)?!!r.capture:!!r,i):un(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=yn(n),t&&t[Ye]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=rn(o=t.a[e],n,r,i))&&(tn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=gn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=rn(e,n,r,i)),(n=-1<t?e[t]:null)&&ln(n))}function ln(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[Ye])nn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(fn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gn(e))?(nn(n,t),0==n.b&&(n.src=null,e[on]=null)):tn(t)}}}function fn(t){return t in sn?sn[t]:sn[t]="on"+t}function pn(t,e,n,r){var i=!0;if((t=gn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=dn(o,r),i=i&&!1!==o)}return i}function dn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&ln(t),n.call(r,e)}function vn(t,e){if(t.wa)return!0;if(!He){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Qe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=pn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=pn(r[i],t,!1,e),n=n&&o}return n}return dn(t,new Qe(e,this))}function gn(t){return(t=t[on])instanceof en?t:null}var mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(t){return p(t)?t:(t[mn]||(t[mn]=function(e){return t.handleEvent(e)}),t[mn])}function bn(){qe.call(this),this.v=new en(this),this.bc=this,this.hb=null}function wn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function _n(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function In(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&nn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function Tn(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function En(t){var e=null;return new be((function(n,r){-1==(e=Tn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function Sn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function An(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function kn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof kn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Nn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Cn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Cn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Cn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(bn,qe),bn.prototype[Ye]=!0,bn.prototype.addEventListener=function(t,e,n,r){an(this,t,e,n,r)},bn.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},bn.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new We(t,n);else if(t instanceof We)t.target=t.target||n;else{var i=t;dt(t=new We(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=In(s,r,!0,t)&&i}if(i=In(s=t.b=n,r,!0,t)&&i,i=In(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=In(s=t.b=e[o],r,!1,t)&&i;return i},bn.prototype.Da=function(){if(bn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)tn(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=kn.prototype).X=function(){Nn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Nn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Cn(this.b,t)?this.b[t]:e},t.set=function(t,e){Cn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Dn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Rn?(this.i=void 0!==e?e:t.i,xn(this,t.c),this.l=t.l,this.a=t.a,On(this,t.g),this.f=t.f,Pn(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(Dn))?(this.i=!!e,xn(this,n[1]||"",!0),this.l=jn(n[2]||""),this.a=jn(n[3]||"",!0),On(this,n[4]),this.f=jn(n[5]||"",!0),Pn(this,n[6]||"",!0),this.h=jn(n[7]||"")):(this.i=!!e,this.b=new Wn(null,this.i))}function xn(t,e,n){t.c=n?jn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function On(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Pn(t,e,n){e instanceof Wn?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Yn(this,e),Zn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Vn(e,Gn)),t.b=new Wn(e,t.i))}function Ln(t,e,n){t.b.set(e,n)}function Mn(t,e){return t.b.get(e)}function Fn(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function Un(t,e,n,r){var i=new Rn(null,void 0);return t&&xn(i,t),e&&(i.a=e),n&&On(i,n),r&&(i.f=r),i}function jn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Vn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,qn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Vn(e,Bn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Vn(e,Bn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Vn(n,"/"==n.charAt(0)?Kn:$n,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Vn(n,zn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.c;n?xn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)On(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ot(i,"./")||ot(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?Pn(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Bn=/[#\/\?@]/g,$n=/[#\?:]/g,Kn=/[#\?]/g,Gn=/[#\?@]/g,zn=/#/g;function Wn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new kn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xn(t){var e=An(t);if(void 0===e)throw Error("Keys are undefined");var n=new Wn(null,void 0);t=Sn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function Yn(t,e){Qn(t),e=er(t,e),Cn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Cn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Nn(t)))}function Jn(t,e){return Qn(t),e=er(t,e),Cn(t.a.b,e)}function Zn(t,e,n){Yn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),Q(n)),t.b+=n.length)}function tr(t){var e=new Wn;return e.c=t.c,t.a&&(e.a=new kn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),ar(r,n),n.push(":"),ir(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":ar(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Wn.prototype).add=function(t,e){Qn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Qn(this),this.a.forEach((function(n,r){q(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Qn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Qn(this);var e=[];if("string"==typeof t)Jn(this,t)&&(e=W(e,this.a.get(er(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=W(e,t[n])}return e},t.set=function(t,e){return Qn(this),this.c=null,Jn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},sr=/\uffff/.test("Ôøø")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ar(t,e){e.push('"',t.replace(sr,(function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e})),'"')}function ur(){var t=Nr();return Gt&&!!oe&&11==oe||/Edge\/\d+/.test(t)}function cr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function hr(t,e){e=e||s.window;var n="about:blank";t&&(n=Ct(Ot(t)||Mt)),e.location.href=n}function lr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<lr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||Nr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||s.window;try{t.close()}catch(t){}}function dr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Nr().toLowerCase(),r&&(e.target=r,ot(n,"crios/")&&(e.target="_blank")),Sr(Nr())==Tr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Nt?n:Ot(void 0!==n.href?n.href:String(n))||Mt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ct("iPhone")&&!ct("iPod")&&!ct("iPad")||ct("iPad")||ct("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(s=pe(document,"A"),"HTMLAnchorElement"),e=e instanceof Nt?e:Pt(e),s.href=Ct(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=jt("",r,n,s),t=Ct(e),s&&(Wt&&ot(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+qt(t)+'">',t=new Ft(t=(r=_t())?r.createHTML(t):t,null,Ut),r=s.document)&&(r.write(function(t){return t instanceof Ft&&t.constructor===Ft?t.a:(O("expected object of type SafeHtml, got '"+t+"' of type "+l(t)),"type_error:SafeHtml")}(t)),r.close())):(s=jt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var vr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gr=/^[^@]+@[^@]+$/;function mr(){var t=null;return new be((function(e){"complete"==s.document.readyState?e():(t=function(){e()},cn(window,"load",t))})).o((function(e){throw hn(window,"load",t),e}))}function yr(t){return t=t||Nr(),!("file:"!==Or()&&"ionic:"!==Or()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=s.window;try{return!(!t||t==t.top)}catch(t){return!1}}function wr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function _r(){return Hn.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Hn.INTERNAL.hasOwnProperty("node")?"Node":wr()?"Worker":"Browser"}function Ir(){var t=_r();return"ReactNative"===t||"Node"===t}var Tr="Firefox",Er="Chrome";function Sr(t){var e=t.toLowerCase();return ot(e,"opera/")||ot(e,"opr/")||ot(e,"opios/")?"Opera":ot(e,"iemobile")?"IEMobile":ot(e,"msie")||ot(e,"trident/")?"IE":ot(e,"edge/")?"Edge":ot(e,"firefox/")?Tr:ot(e,"silk/")?"Silk":ot(e,"blackberry")?"Blackberry":ot(e,"webos")?"Webos":!ot(e,"safari/")||ot(e,"chrome/")||ot(e,"crios/")||ot(e,"android")?!ot(e,"chrome/")&&!ot(e,"crios/")||ot(e,"edge/")?ot(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Er:"Safari"}var Ar={md:"FirebaseCore-web",od:"FirebaseUI-web"};function kr(t,e){e=e||[];var n,r=[],i={};for(n in Ar)i[Ar[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=_r())?r=Sr(i=Nr()):"Worker"===r&&(r=Sr(i=Nr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Nr(){return s.navigator&&s.navigator.userAgent||""}function Cr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Dr(){try{var t=s.localStorage,e=Ur();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!s.indexedDB}catch(t){return wr()&&!!s.indexedDB}return!1}function Rr(){return(xr()||"chrome-extension:"===Or()||yr())&&!Ir()&&Dr()&&!wr()}function xr(){return"http:"===Or()||"https:"===Or()}function Or(){return s.location&&s.location.protocol||null}function Pr(t){return!fr(t=t||Nr())&&Sr(t)!=Tr}function Lr(t){return void 0===t?null:nr(t)}function Mr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function Ur(t){return t||Math.floor(1e9*Math.random()).toString()}function jr(t){return"Safari"!=Sr(t=t||Nr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Vr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function qr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Nr(),e=_r(),this.b=fr(t)||"ReactNative"===e}function Br(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function $r(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Kr(){return!(!Cr("fireauth.oauthhelper",s)&&!Cr("fireauth.iframe",s))}qr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!xr()&&"chrome-extension:"!==Or()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Hr,Gr={};function zr(t){Gr[t]||(Gr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Wr={};Object.defineProperty(Wr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Wr,"abcd",{configurable:!0,enumerable:!0,value:2}),Hr=2==Wr.abcd}catch(Kt){Hr=!1}function Qr(t,e,n){Hr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Xr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function Yr(t){var e={};return Xr(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,Jr(t[n]));return e}function Zr(t){var e=t&&(t[ii]?"phone":null);if(!(e&&t&&t[ri]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[ri]),Qr(this,"displayName",t[ei]||null);var n=null;t[ni]&&(n=new Date(t[ni]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function ti(t){try{var e=new oi(t)}catch(t){e=null}return e}Zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ei="displayName",ni="enrolledAt",ri="mfaEnrollmentId",ii="phoneInfo";function oi(t){Zr.call(this,t),Qr(this,"phoneNumber",t[ii])}function si(t){var e={},n=t[hi],r=t[fi],i=t[pi];if(t=ti(t[li]),!i||i!=ui&&i!=ci&&!n||i==ci&&!r||i==ai&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[vi]=n||null,e[mi]=n||null,e[di]=r):(e[vi]=r||null,e[mi]=r||null,e[di]=n||null),e[gi]=t||null,Qr(this,bi,i),Qr(this,yi,Jr(e))}_(oi,Zr),oi.prototype.w=function(){var t=oi.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ai="REVERT_SECOND_FACTOR_ADDITION",ui="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",hi="email",li="mfaInfo",fi="newEmail",pi="requestType",di="email",vi="fromEmail",gi="multiFactorInfo",mi="previousEmail",yi="data",bi="operation";function wi(t){var e=Mn(t=Fn(t),_i)||null,n=Mn(t,Ii)||null,r=Mn(t,Si)||null;if(r=r&&ki[r]||null,!e||!n||!r)throw new T("argument-error",_i+", "+Ii+"and "+Si+" are required in a valid action code URL.");Xr(this,{apiKey:e,operation:r,code:n,continueUrl:Mn(t,Ti)||null,languageCode:Mn(t,Ei)||null,tenantId:Mn(t,Ai)||null})}var _i="apiKey",Ii="oobCode",Ti="continueUrl",Ei="languageCode",Si="mode",Ai="tenantId",ki={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ai,signIn:ui,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function Ni(t){try{return new wi(t)}catch(t){return null}}function Ci(t){var e=t[Pi];if(void 0===e)throw new T("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new T("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Di];if(n&&"object"==typeof n){e=n[Fi];var r=n[Li];if(n=n[Mi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new T("argument-error",Li+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new T("argument-error",Mi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new T("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new T("missing-android-pkg-name")}}else if(void 0!==n)throw new T("argument-error",Di+" property must be a non null object when specified.");if(this.f=null,(e=t[Oi])&&"object"==typeof e){if("string"==typeof(e=e[Ui])&&e.length)this.f=e;else if(void 0!==e)throw new T("argument-error",Ui+" property must be a non empty string when specified.")}else if(void 0!==e)throw new T("argument-error",Oi+" property must be a non null object when specified.");if(void 0!==(e=t[xi])&&"boolean"!=typeof e)throw new T("argument-error",xi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ri])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new T("argument-error",Ri+" property must be a non empty string when specified.");this.i=t||null}var Di="android",Ri="dynamicLinkDomain",xi="handleCodeInApp",Oi="iOS",Pi="url",Li="installApp",Mi="minimumVersion",Fi="packageName",Ui="bundleId";function ji(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Vi=null;function qi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Vi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Vi){Vi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Vi[o]&&(Vi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e.push(t)})),e}function Bi(t){var e=Ki(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function $i(t){try{return new Bi(t)}catch(t){return null}}function Ki(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=qi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(t){}return null}Bi.prototype.T=function(){return this.f},Bi.prototype.l=function(){return this.c},Bi.prototype.toString=function(){return this.h};var Hi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Gi=["client_id","response_type","scope","redirect_uri","state"],zi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Gi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Gi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Gi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Hi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Wi(t){for(var e in zi)if(zi[e].fa==t)return zi[e];return null}function Qi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Yi];try{if(n)return e[n]?new e[n](t):new Zi(t);if(void 0!==t[Xi])return new Ji(t)}catch(t){}return null}var Xi="idToken",Yi="providerId";function Ji(t){var e=t[Yi];if(!e&&t[Xi]){var n=$i(t[Xi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function Zi(t){Ji.call(this,t),Qr(this,"profile",Jr((t=Fr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function io(t){var e=Fn(t),n=Mn(e,"link"),r=Mn(Fn(n),"link");return e=Mn(e,"deep_link_id"),Mn(Fn(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new T("internal-error","Internal assert: no raw session string available");if(t&&e)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?so:ao}_(Zi,Ji),_(to,Zi),_(eo,Zi),_(no,Zi),_(ro,Zi);var so="enroll",ao="signin";function uo(){}function co(t,e){return t.then((function(t){if(t[Js]){var n=$i(t[Js]);if(!n||e!=n.i)throw new T("user-mismatch");return t}throw new T("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==A+"user-not-found"?new T("user-mismatch"):t}))}function ho(t,e){if(!e)throw new T("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function lo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ho(t.providerId,t.pendingToken)}catch(t){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function go(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(t){}}return null}function mo(t,e){this.Qc=e||[],Xr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Wi(t)||{}).Ja||null,this.pb=null}function yo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');mo.call(this,t,[])}function bo(t){mo.call(this,t,Gi),this.a=[]}function wo(){bo.call(this,"facebook.com")}function _o(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function Io(){bo.call(this,"github.com")}function To(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new Io).credential({accessToken:e})}function Eo(){bo.call(this,"google.com"),this.Ca("profile")}function So(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new Eo).credential({idToken:n,accessToken:e})}function Ao(){mo.call(this,"twitter.com",Hi)}function ko(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function No(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===Do.EMAIL_LINK_SIGN_IN_METHOD?Do.EMAIL_LINK_SIGN_IN_METHOD:Do.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Co(t){return t&&t.email&&t.password?new No(t.email,t.password,t.signInMethod):null}function Do(){Xr(this,{providerId:"password",isOAuthProvider:!1})}function Ro(t,e){if(!(e=xo(e)))throw new T("argument-error","Invalid email link!");return new No(t,e.code,Do.EMAIL_LINK_SIGN_IN_METHOD)}function xo(t){return(t=Ni(t=io(t)))&&t.operation===ui?t:null}function Oo(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new T("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function Po(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return q(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Oo(e)}return null}function Lo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Mo(t){try{this.a=t||Hn.auth()}catch(t){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Xr(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new T("missing-verification-id");if(!e)throw new T("missing-verification-code");return new Oo({fb:t,eb:e})}function Uo(t){if(t.temporaryProof&&t.phoneNumber)return new Oo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return So(o,n);case"facebook.com":return _o(n);case"github.com":return To(n);case"twitter.com":return ko(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new ho(e,s):new po(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function jo(t){if(!t.isOAuthProvider)throw new T("invalid-oauth-provider")}function Vo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function qo(t){return(t=t||{}).type?new Vo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function Bo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return this.a?Ae(this.a):Ae(this.b)},oo.prototype.w=function(){return this.type==so?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ka=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},ho.prototype.ka=function(t){return wa(t,lo(this))},ho.prototype.b=function(t,e){var n=lo(this);return n.idToken=e,_a(t,n)},ho.prototype.c=function(t,e){return co(Ia(t,lo(this)),e)},ho.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ka=function(t){return wa(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,_a(t,n)},po.prototype.c=function(t,e){return co(Ia(t,vo(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},mo.prototype.Ka=function(t){return this.Jb=ft(t),this},_(yo,mo),_(bo,mo),bo.prototype.Ca=function(t){return H(this.a,t)||this.a.push(t),this},bo.prototype.Rb=function(){return Q(this.a)},bo.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},_(wo,bo),Qr(wo,"PROVIDER_ID","facebook.com"),Qr(wo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(Io,bo),Qr(Io,"PROVIDER_ID","github.com"),Qr(Io,"GITHUB_SIGN_IN_METHOD","github.com"),_(Eo,bo),Qr(Eo,"PROVIDER_ID","google.com"),Qr(Eo,"GOOGLE_SIGN_IN_METHOD","google.com"),_(Ao,mo),Qr(Ao,"PROVIDER_ID","twitter.com"),Qr(Ao,"TWITTER_SIGN_IN_METHOD","twitter.com"),No.prototype.ka=function(t){return this.signInMethod==Do.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Da,{email:this.a,oobCode:this.f}):ru(t,Ja,{email:this.a,password:this.f})},No.prototype.b=function(t,e){return this.signInMethod==Do.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ra,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Ka,{idToken:e,email:this.a,password:this.f})},No.prototype.c=function(t,e){return co(this.ka(t),e)},No.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Xr(Do,{PROVIDER_ID:"password"}),Xr(Do,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Xr(Do,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Oo.prototype.ka=function(t){return t.gb(Lo(this))},Oo.prototype.b=function(t,e){var n=Lo(this);return n.idToken=e,ru(t,tu,n)},Oo.prototype.c=function(t,e){var n=Lo(this);return n.operation="REAUTH",co(t=ru(t,eu,n),e)},Oo.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Mo.prototype.gb=function(t,e){var n=this.a.a;return Ae(e.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==so?i.Ha().then((function(t){return function(t,e){return ru(t,Ga,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==ao?i.Ha().then((function(e){return function(t,e){return ru(t,za,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Ba,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Xr(Mo,{PROVIDER_ID:"phone"}),Xr(Mo,{PHONE_SIGN_IN_METHOD:"phone"}),Vo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Vo.prototype.T=function(){return this.h},Vo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var $o,Ko=null;function Ho(t){var e="unauthorized-domain",n=void 0,r=Fn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Vt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Vt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",T.call(this,e,n)}function Go(t,e,n){T.call(this,t,n),(t=e||{}).Kb&&Qr(this,"email",t.Kb),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.$b&&Qr(this,"tenantId",t.$b)}function zo(t){if(t.code){var e=t.code||"";0==e.indexOf(A)&&(e=e.substring(A.length));var n={credential:Uo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new T(e,t.message||void 0);return new Go(e,n,t.message)}return null}function Wo(){}function Qo(t){return t.c||(t.c=t.b())}function Xo(){}function Yo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Jo(){}function Zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Tb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function ts(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function es(t,e,n){this.reset(t,e,n,void 0,void 0)}function ns(t){this.f=t,this.b=this.c=this.a=null}function rs(t,e){this.name=t,this.value=e}_(Ho,T),_(Go,T),Go.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&dt(t,e),t},Go.prototype.toJSON=function(){return this.w()},Wo.prototype.c=null,_(Xo,Wo),Xo.prototype.a=function(){var t=Yo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Xo.prototype.b=function(){var t={};return Yo(this)&&(t[0]=!0,t[1]=!0),t},$o=new Xo,_(Jo,Wo),Jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Zo;throw Error("Unsupported browser")},Jo.prototype.b=function(){return{}},(t=Zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ts(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",ts(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,ts(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},es.prototype.a=null,es.prototype.reset=function(t,e,n,r,i){delete this.a},rs.prototype.toString=function(){return this.name};var is=new rs("SEVERE",1e3),os=new rs("WARNING",900),ss=new rs("CONFIG",700),as=new rs("FINE",500);function us(t){return t.c?t.c:t.a?us(t.a):(O("Root logger has no level set."),null)}ns.prototype.log=function(t,e,n){if(t.value>=us(this).value)for(p(e)&&(e=e()),t=new es(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var cs={},hs=null;function ls(t){var e;if(hs||(hs=new ns(""),cs[""]=hs,hs.c=ss),!(e=cs[t])){e=new ns(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ls(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,cs[t]=e}return e}function fs(t,e){t&&t.log(as,e,void 0)}function ps(t){this.f=t}function ds(t){bn.call(this),this.u=t,this.h=void 0,this.readyState=vs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ls("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}_(ps,Wo),ps.prototype.a=function(){return new ds(this.f)},ps.prototype.b=function(t){return function(){return t}}({}),_(ds,bn);var vs=0;function gs(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function ms(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ys(t)}function ys(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function bs(t){bn.call(this),this.headers=new kn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=ws,this.u=this.S=!1}(t=ds.prototype).open=function(t,e){if(this.readyState!=vs)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ys(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ms(this)),this.readyState=vs},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ys(this)),this.a&&(this.readyState=3,ys(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,gs(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ms(this):ys(this),3==this.readyState&&gs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ms(this))},t.sc=function(t){this.a&&(this.response=t,ms(this))},t.Va=function(t){var e=this.i;e&&e.log(os,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ms(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(os,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(os,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),_(bs,bn);var ws="";bs.prototype.b=ls("goog.net.XhrIo");var _s=/^https?$/i,Is=["POST","PUT"];function Ts(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():$o.a(),t.C=t.D?Qo(t.D):Qo($o),t.a.onreadystatechange=b(t.Wb,t);try{fs(t.b,xs(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return fs(t.b,xs(t,"Error opening Xhr: "+e.message)),void Ss(t,e)}e=r||"";var o=new kn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)q(t,e,void 0);else for(var n=An(t),r=Sn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Es,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!H(Is,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Cs(t),0<t.g&&(t.u=function(t){return Gt&&re(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fs(t.b,xs(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=Tn(t.Ma,t.g,t)),fs(t.b,xs(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){fs(t.b,xs(t,"Send error: "+e.message)),Ss(t,e)}}function Es(t){return"content-type"==t.toLowerCase()}function Ss(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,As(t),Ns(t)}function As(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ks(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Ds(t)&&2==Rs(t))fs(t.b,xs(t,"Local request error detected and ignored"));else if(t.i&&4==Ds(t))Tn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ds(t)){fs(t.b,xs(t,"Request complete")),t.c=!1;try{var e,n=Rs(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(Dn)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!_s.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ds(t)?t.a.statusText:""}catch(e){fs(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Rs(t)+"]",As(t)}}finally{Ns(t)}}}function Ns(t,e){if(t.a){Cs(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(is,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Cs(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Ds(t){return t.a?t.a.readyState:0}function Rs(t){try{return 2<Ds(t)?t.a.status:-1}catch(t){return-1}}function xs(t,e){return e+" ["+t.P+" "+t.l+" "+Rs(t)+"]"}function Os(t){var e=Ks;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ps(t,e,n){t.a=!0,t.c=n,t.f=!e,Us(t)}function Ls(t){if(t.a){if(!t.v)throw new js(t);t.v=!1}}function Ms(t,e,n,r){t.g.push([e,n,r]),t.a&&Us(t)}function Fs(t){return K(t.g,(function(t){return p(t[1])}))}function Us(t){if(t.h&&t.a&&Fs(t)){var e=t.h,n=Bs[e];n&&(s.clearTimeout(n.a),delete Bs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(D(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Fs(t)||(n=!0)}}t.c=e,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),e instanceof Os?(Ms(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new qs(e),Bs[e.a]=e,t.h=e.a)}function js(){R.call(this)}function Vs(){R.call(this)}function qs(t){this.a=s.setTimeout(b(this.c,this),0),this.b=t}(t=bs.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fs(this.b,xs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fs(this.b,xs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ns(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ns(this,!0)),bs.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?ks(this):this.Jc())},t.Jc=function(){ks(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ws:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(is,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return fs(this.b,"Can not get response: "+t.message),null}},Os.prototype.cancel=function(t){if(this.a)this.c instanceof Os&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Vs(this),Ls(this),Ps(this,!1,t))}},Os.prototype.m=function(t,e){this.i=!1,Ps(this,t,e)},Os.prototype.then=function(t,e,n){var r,i,o=new be((function(t,e){r=t,i=e}));return Ms(this,r,(function(t){t instanceof Vs?o.cancel():i(t)})),o.then(t,e,n)},Os.prototype.$goog_Thenable=!0,_(js,R),js.prototype.message="Deferred has already fired",js.prototype.name="AlreadyCalledError",_(Vs,R),Vs.prototype.message="Deferred was canceled",Vs.prototype.name="CanceledError",qs.prototype.c=function(){throw delete Bs[this.a],this.b};var Bs={};function $s(t){var e,n=document,r=Tt(t).toString(),i=pe(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new Os(o);return e=window.setTimeout((function(){Hs(i,!0);var t=new Ws(zs,"Timeout reached for loading script "+r);Ls(a),Ps(a,!1,t)}),5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Hs(i,!1,e),Ls(a),Ps(a,!0,null))},i.onerror=function(){Hs(i,!0,e);var t=new Ws(Gs,"Error while loading script "+r);Ls(a),Ps(a,!1,t)},dt(o={},{type:"text/javascript",charset:"UTF-8"}),ue(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=Tt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=c(e.document):(null===u&&(u=c(s.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ks(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Hs(t,!0,this.Ma)}}function Hs(t,e,n){null!=n&&s.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Gs=0,zs=1;function Ws(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function Qs(t){this.f=t}function Xs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Zs,this.g=ft(t.secureTokenHeaders||ta),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ea,this.a=ft(t.firebaseHeaders||na),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==_r(),!(n=s.XMLHttpRequest||n&&Hn.INTERNAL.node&&Hn.INTERNAL.node.XMLHttpRequest)&&!wr())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,wr()?this.f=new ps(self):Ir()?this.f=new Qs(n):this.f=new Jo,this.b=null}_(Ws,R),_(Qs,Wo),Qs.prototype.a=function(){return new this.f},Qs.prototype.b=function(){return{}};var Ys,Js="idToken",Zs=new qr(3e4,6e4),ta={"Content-Type":"application/x-www-form-urlencoded"},ea=new qr(3e4,6e4),na={"Content-Type":"application/json"};function ra(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ia(t,e){e&&(t.l=oa("https://securetoken.googleapis.com/v1/token",e),t.h=oa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=oa("https://identitytoolkit.googleapis.com/v2/",e))}function oa(t,e){return t=Fn(t),e=Fn(e.url),t.f=t.a+t.f,xn(t,e.c),t.a=e.a,On(t,e.g),t.toString()}function sa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function aa(t,e,n,r,i,o,a){(function(){var t=Nr();return!((t=Sr(t)!=Er?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Gt&&oe&&!(9<oe))})()||wr()?t=b(t.u,t):(Ys||(Ys=new be((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[ca]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ms(t,null,e,void 0)}($s(Et(ua,{onload:ca})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=b(t.s,t)),t(e,n,r,i,o,a)}Xs.prototype.T=function(){return this.b},Xs.prototype.u=function(t,e,n,r,i,o){if(wr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new bs(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}wn(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),_n(a,"ready",(function(){u&&clearTimeout(u),$e(this)})),_n(a,"timeout",(function(){u&&clearTimeout(u),$e(this),e&&e(null)})),Ts(a,t,n,r,i)};var ua=new gt(wt,"https://apis.google.com/js/client.js?onload=%{onload}"),ca="__fcb"+Math.floor(1e6*Math.random()).toString();function ha(t,e,n,r,i,o,s){var a=Fn(e+n);Ln(a,"key",t.c),s&&Ln(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Ln(a,c,i[c]);return new be((function(e,n){aa(t,a.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new T("network-request-failed"))}),r,u?void 0:nr(Mr(i)),t.a,t.v.get())}))}function la(t){if("string"!=typeof(t=t.email)||!gr.test(t))throw new T("invalid-email")}function fa(t){"email"in t&&la(t)}function pa(t){if(!t[Js]){if(t.mfaPendingCredential)throw new T("multi-factor-auth-required",null,ft(t));throw new T("internal-error")}}function da(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new T("internal-error")}else{if(!t.sessionInfo)throw new T("missing-verification-id");if(!t.code)throw new T("missing-verification-code")}}Xs.prototype.s=function(t,e,n,r,i){var o=this;Ys.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Xs.prototype.Ab=function(){return ru(this,Ha,{})},Xs.prototype.Cb=function(t,e){return ru(this,$a,{idToken:t,email:e})},Xs.prototype.Db=function(t,e){return ru(this,Ka,{idToken:t,password:e})};var va={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ga(t){if(!t.phoneVerificationInfo)throw new T("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ma(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new T("internal-error")}function ya(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Jn(t=new Wn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ba(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=zo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=zo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=zo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;pa(t)}function wa(t,e){return e.returnIdpCredential=!0,ru(t,Wa,e)}function _a(t,e){return e.returnIdpCredential=!0,ru(t,Xa,e)}function Ia(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Qa,e)}function Ta(t){if(!t.oobCode)throw new T("invalid-action-code")}(t=Xs.prototype).Eb=function(t,e){var n={idToken:t},r=[];return ht(va,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,$a,n)},t.wb=function(t,e){return dt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Ua,t)},t.xb=function(t,e){return dt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,La,t)},t.vb=function(t,e){return dt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ma,t)},t.Fb=function(t,e,n){return dt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fa,t)},t.gb=function(t){return ru(this,Za,t)},t.ob=function(t,e){return ru(this,qa,{oobCode:t,newPassword:e})},t.Sa=function(t){return ru(this,Sa,{oobCode:t})},t.kb=function(t){return ru(this,Ea,{oobCode:t})};var Ea={endpoint:"setAccountInfo",A:Ta,Z:"email",B:!0},Sa={endpoint:"resetPassword",A:Ta,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new T("internal-error")},B:!0},Aa={endpoint:"signupNewUser",A:function(t){if(la(t),!t.password)throw new T("weak-password")},G:pa,V:!0,B:!0},ka={endpoint:"createAuthUri",B:!0},Na={endpoint:"deleteAccount",O:["idToken"]},Ca={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new T("internal-error")}},Da={endpoint:"emailLinkSignin",O:["email","oobCode"],A:la,G:pa,V:!0,B:!0},Ra={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:la,G:pa,V:!0},xa={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:ga,G:pa,B:!0,Na:!0},Oa={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:ga,G:pa,B:!0,Na:!0},Pa={endpoint:"getAccountInfo"},La={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new T("internal-error");la(t)},Z:"email",B:!0},Ma={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Fa={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Ua={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new T("internal-error");la(t)},Z:"email",B:!0},ja={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Va={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new T("internal-error")}},qa={endpoint:"resetPassword",A:Ta,Z:"email",B:!0},Ba={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},$a={endpoint:"setAccountInfo",O:["idToken"],A:fa,V:!0},Ka={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(fa(t),!t.password)throw new T("weak-password")},G:pa,V:!0},Ha={endpoint:"signupNewUser",G:pa,V:!0,B:!0},Ga={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new T("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},za={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Wa={endpoint:"verifyAssertion",A:ma,Za:ya,G:ba,V:!0,B:!0},Qa={endpoint:"verifyAssertion",A:ma,Za:ya,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new T("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);pa(t)},V:!0,B:!0},Xa={endpoint:"verifyAssertion",A:function(t){if(ma(t),!t.idToken)throw new T("internal-error")},Za:ya,G:ba,V:!0},Ya={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new T("invalid-custom-token")},G:pa,V:!0,B:!0},Ja={endpoint:"verifyPassword",A:function(t){if(la(t),!t.password)throw new T("wrong-password")},G:pa,V:!0,B:!0},Za={endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new T("internal-error");da(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",zo(t);pa(t)}},eu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Js]^!!t.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return ke(new T("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Ae(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ha(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new T("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",dt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],e);return!e&&t&&(e=Lr(t)),new T("internal-error",e)}function su(t){this.b=t,this.a=null,this.sb=function(t){return(hu||(hu=new be((function(t,e){function n(){Vr(),Cr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Vr(),e(Error("Network Error"))},timeout:uu.get()})}if(Cr("gapi.iframes.Iframe"))t();else if(Cr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Cr("gapi.load")?n():e(Error("Network Error"))},Ae($s(r=Et(au,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw hu=null,t})))).then((function(){return new be((function(e,n){Cr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Cr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new gt(wt,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new qr(3e4,6e4),cu=new qr(5e3,15e3),hu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Un((t=Fn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Un("https",this.l,null,"/__/auth/iframe"),this.a=t,Ln(this.a,"apiKey",this.h),Ln(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return Hn.app(t).auth().Ga()}catch(t){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=cr();return function(t){return ru(t,ja,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Fn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Fn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:vr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Ho(cr())}))}function gu(t){return t.m||(t.m=mr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new lu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Q(r||[]),t.u=i.toString()}t.v=new su(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Cr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=qo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ae(n)}return n.status="ERROR",Ae(n)}))}(t)}))),t.m}function mu(t){return t.l||(t.C=t.c?kr(t.c,pu(t.b)):null,t.l=new Xs(t.g,C(t.i),t.C),t.f&&ia(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new fu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=ft(u||null),t.f=c,t.zb(h).toString()}function bu(t){if(this.a=t||Hn.INTERNAL.reactNative&&Hn.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function wu(t){this.b=t,this.a={},this.f=b(this.c,this)}lu.prototype.toString=function(){return this.f?Ln(this.a,"v",this.f):Yn(this.a.b,"v"),this.b?Ln(this.a,"eid",this.b):Yn(this.a.b,"eid"),this.c.length?Ln(this.a,"fw",this.c.join(",")):Yn(this.a.b,"fw"),this.a.toString()},fu.prototype.zb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=Fn(this.v.url);t=Un(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Un("https",this.u,null,"/__/auth/handler");if(Ln(t,"apiKey",this.s),Ln(t,"appName",this.c),Ln(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Hn.app(this.c).auth().la()}catch(t){n=null}for(var r in e.pb=n,Ln(t,"providerId",this.a.providerId),e=Mr((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=ft(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),lt(e)||Ln(t,"customParameters",Lr(e))}if("function"==typeof this.a.Rb&&((n=this.a.Rb()).length&&Ln(t,"scopes",n.join(","))),this.l?Ln(t,"redirectUrl",this.l):Yn(t.b,"redirectUrl"),this.g?Ln(t,"eventId",this.g):Yn(t.b,"eventId"),this.i?Ln(t,"v",this.i):Yn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Mn(t,s)&&Ln(t,s,this.b[s]);return this.h?Ln(t,"tid",this.h):Yn(t.b,"tid"),this.f?Ln(t,"eid",this.f):Yn(t.b,"eid"),(s=pu(this.c)).length&&Ln(t,"fw",s.join(",")),t.toString()},(t=du.prototype).Pb=function(t,e,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return gu(t).then((function(){return function(t,e){return t.sb.then((function(){return new be((function(n){t.a.send(e.type,e,n,Cr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&pr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new be((function(e){return function n(){En(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return En(n).then((function(){e(r)}))}))},t.Yb=function(){var t=Nr();return!Pr(t)&&!jr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,s,a){if(!t)return ke(new T("popup-blocked"));if(s&&!Pr())return this.ma().o((function(e){pr(t),i(e)})),r(),Ae();this.a||(this.a=vu(mu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw pr(t),i(e),e}));return r(),e})).then((function(){(jo(n),s)||hr(yu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=vu(mu(this)));var i=this;return this.a.then((function(){jo(e),hr(yu(i.s,i.g,i.b,t,e,cr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return gu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new T("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){z(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return Ae(this.a.getItem(t)).then((function(t){return t&&Fr(t)}))},t.set=function(t,e){return Ae(this.a.setItem(t,Lr(e)))},t.U=function(t){return Ae(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var _u,Iu=[];function Tu(t,e,n){lt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Eu(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Au(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return ke(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new be((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return ku(t,c),e})).o((function(e){throw ku(t,c),e}))}function ku(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),z(t.a,(function(t){return t==e}))}}function Nu(){if(!xu())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;wr()&&self?(this.v=function(){var t=wr()?self:null;if(q(Iu,(function(n){n.b==t&&(e=n)})),!e){var e=new wu(t);Iu.push(e)}return e}(),Tu(this.v,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&q(t.a,(function(t){t(e)})),{keyProcessed:H(e,n.key)}}))})),Tu(this.v,"ping",(function(){return Ae(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Ae().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ae(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new Eu(e)),Au(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&H(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Cu(t){return new be((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new be((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Cu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Du(t){return t.i||(t.i=Cu(t)),t.i}function Ru(t,e){var n=0;return new be((function r(i,o){Du(t).then(e).then(i).o((function(e){if(!(3<++n))return Du(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function xu(){try{return!!s.indexedDB}catch(t){return!1}}function Ou(t){return t.objectStore("firebaseLocalStorage")}function Pu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new be((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Au(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ae()}function Fu(t){return Du(t).then((function(t){var e=Ou(Pu(t,!1));return e.getAll?Lu(e.getAll()):new be((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=lr(t.c,n),t.c=n}return r}))}function Uu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ju(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ae().then((function(){if(xu()){var t=Ur(),r="__sak"+t;return _u||(_u=new Nu),(n=_u).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){q(e.a,(function(e){e(t)}))})),t}))}function Vu(){this.a={},this.type="inMemory"}function qu(){if(!function(){var t="Node"==_r();if(!(t=Bu()||t&&Hn.INTERNAL.node&&Hn.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_r())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Bu()||Hn.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=s.localStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function $u(){this.type="nullStorage"}function Ku(){if(!function(){var t="Node"==_r();if(!(t=Hu()||t&&Hn.INTERNAL.node&&Hn.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==_r())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Hu()||Hn.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hu(){try{var t=s.sessionStorage,e=Ur();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Gu(){var t={};t.Browser=Qu,t.Node=Xu,t.ReactNative=Yu,t.Worker=Ju,this.a=t[_r()]}wu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];q(r,(function(e){i.push(Ae().then((function(){return e(t.origin,t.data.data)})))})),Ce(i).then((function(r){var i=[];q(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),q(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Eu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)ku(this,this.a[0]);this.b=!0},(t=Nu.prototype).set=function(t,e){var n=this,r=!1;return Ru(this,(function(e){return Lu((e=Ou(Pu(e,!0))).get(t))})).then((function(i){return Ru(n,(function(o){if(o=Ou(Pu(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Lu(o.add(s))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Ru(this,(function(e){return Lu(Ou(Pu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Ru(this,(function(r){return n=!0,e.b++,Lu(Ou(Pu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&q(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Uu(t),e()}(this),this.a.push(t)},t.ia=function(t){z(this.a,(function(e){return e==t})),0==this.a.length&&Uu(this)},(t=ju.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){z(this.a,(function(e){return e==t}))},(t=Vu.prototype).get=function(t){return Ae(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ae()},t.U=function(t){return delete this.a[t],Ae()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return Ae().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ae().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ae().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&an(s.window,"storage",t)},t.ia=function(t){s.window&&hn(s.window,"storage",t)},(t=$u.prototype).get=function(){return Ae(null)},t.set=function(){return Ae()},t.U=function(){return Ae()},t.ca=function(){},t.ia=function(){},(t=Ku.prototype).get=function(t){var e=this;return Ae().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ae().then((function(){var r=Lr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ae().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var zu,Wu,Qu={F:qu,cb:Ku},Xu={F:qu,cb:Ku},Yu={F:bu,cb:$u},Ju={F:qu,cb:$u},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(jr(Nr())||!br()),e=Pr(),n=Dr();this.m=t,this.h=e,this.l=n,this.a={},zu||(zu=new Gu),t=zu;try{this.g=!ur()&&Kr()||!s.indexedDB?new t.a.F:new ju(wr()?new Vu:new t.a.F)}catch(t){this.g=new Vu,this.h=!0}try{this.i=new t.a.cb}catch(t){this.i=new Vu}this.v=new Vu,this.f=b(this.Zb,this),this.b={}}function ec(){return Wu||(Wu=new tc),Wu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function sc(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),lt(this.a)&&(nc(this,"local").ca(this.f),this.h||(ur()||!Kr())&&s.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Qe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(z(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),lt(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.nb(e))},Gt&&oe&&10==oe&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else q(t,b(this.nb,this))},t.nb=function(t){this.a[t]&&q(this.a[t],(function(t){t()}))};var ac,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function hc(t,e){this.b=lc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===ac&&(ac=s.Int32Array?new Int32Array(yc):yc),this.reset()}_(hc,(function(){this.b=-1}));for(var lc=64,fc=lc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var vc=W(128,pc);function gc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|ac[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function mc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(gc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(gc(t),i=0)}}t.c=i,t.g+=n}hc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):Q(this.h)};var yc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){hc.call(this,8,wc)}_(bc,hc);var wc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function _c(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new sc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ic(t){return new T("invalid-cordova-configuration",t)}function Tc(t){var e=new bc;mc(e,t),t=[];var n=8*e.g;56>e.c?mc(e,vc,56-e.c):mc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(gc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return $(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Ec(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Sc(t){return t.f||(t.f=t.ma().then((function(){return new be((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Ac(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Mn(o=Fn(i),"firebaseError")||null))?E(o):null)?new Vo(r.c,r.b,null,null,o,null,r.T()):new Vo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Ec(t,i)}))}var n=new Vo("unknown",null,null,null,new T("no-auth-event")),r=!1,i=En(500).then((function(){return Ac(t).then((function(){r||Ec(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Cr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Ko||(Ko=new Bo),function(t){var e=Ko;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Cr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Ac(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return qo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function kc(t){this.a=t,this.b=ec()}(t=_c.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(yr(void 0)?mr().then((function(){return new be((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):ke(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Cr("universalLinks.subscribe",s))throw Ic("cordova-universal-links-plugin-fix is not installed");if(void 0===Cr("BuildInfo.packageName",s))throw Ic("cordova-plugin-buildinfo is not installed");if("function"!=typeof Cr("cordova.plugins.browsertab.openUrl",s))throw Ic("cordova-plugin-browsertab is not installed");if("function"!=typeof Cr("cordova.InAppBrowser.open",s))throw Ic("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},t.Pb=function(t,e){return e(new T("operation-not-supported-in-this-environment")),Ae()},t.Nb=function(){return ke(new T("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return ke(new T("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=Ae().then((function(){return jo(e),Sc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Vo(e,r,null,o,new T("no-auth-event"),null,i),u=Cr("BuildInfo.packageName",s);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=Cr("BuildInfo.displayName",s),h={};if(Nr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Nr().toLowerCase().match(/android/))return ke(new T("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=Tc(o),h.sessionId=o;var l=yu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,a.w(),e)})).then((function(){var e=Cr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new T("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Cr("cordova.plugins.browsertab.openUrl",s)))throw new T("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Cr("cordova.InAppBrowser.open",s)))throw new T("invalid-cordova-configuration");e=Nr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new be((function(t,e){u=function(){var e=Cr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=En(2e3).then((function(){e(new T("redirect-cancelled-by-user"))})))},h=function(){Br()&&c()},o.addEventListener("resume",c,!1),Nr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Ac(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Ta(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Sc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Vo("unknown",null,null,null,new T("no-auth-event")),t(e))}))},t.Ta=function(t){z(this.b,(function(e){return e==t}))};var Nc={name:"pendingRedirect",F:"session"};function Cc(t){return ic(t.b,Nc,t.a)}function Dc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Hc,this.C=new Xc,this.g=new kc($c(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Rc(this.D,this.v,this.m,S,this.J)}function Rc(t,e,n,r,i){var o=Hn.SDK_VERSION||null;return yr()?new _c(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function xc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Oc(t){t.a.Yb()&&xc(t).o((function(e){var n=new Vo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)})),t.a.Ub()||Gc(t.b)}function Pc(t,e){H(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Nc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Cc(t.g).then((function(){xc(t).o((function(e){var n=new Vo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)}))})):Oc(t)})).o((function(){Oc(t)}))}function Lc(t,e){z(t.h,(function(t){return t==e}))}Dc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Rc(this.D,this.v,this.m,null,this.J),this.i={}},Dc.prototype.s=function(t){if(!t)throw new T("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Gc(this.b),e};var Mc=new qr(2e3,1e4),Fc=new qr(3e4,6e4);function Uc(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function jc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Vc(t,e,n,r,i){var o;return function(t){return t.b.set(Nc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(jc(e))throw new T("operation-not-supported-in-this-environment");return o=e,Cc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new be((function(){})):Cc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function qc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Mc.get())}Dc.prototype.ra=function(){return this.b.ra()};var Bc={};function $c(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Kc(t,e,n,r){var i=$c(e,n,r);return Bc[i]||(Bc[i]=new Dc(t,e,n,r)),Bc[i]}function Hc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Gc(t){t.g||(t.g=!0,Qc(t,!1,null,null))}function zc(t){t.g&&!t.i&&Qc(t,!1,null,null)}function Wc(t,e){if(t.b=function(){return Ae(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Qc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return ke(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Wc(t,n):Wc(t,{user:null}),t.f=[],t.c=[]}function Xc(){}function Yc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Jc(t,e){this.a=e,Qr(this,"verificationId",t)}function Zc(t,e,n,r){return new Mo(t).gb(e,n).then((function(t){return new Jc(t,r)}))}function th(t){var e=Ki(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Xr(this,{token:t,expirationTime:$r(1e3*e.exp),authTime:$r(1e3*e.auth_time),issuedAtTime:$r(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function eh(t,e,n){var r=e&&e[rh];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ft(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;q(e[nh]||[],(function(t){(t=ti(t))&&i.b.push(t)})),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Hc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Hc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Qc(this,!0,null,t.a),Ae()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Qc(t,a,e,null)})).o((function(e){Qc(t,a,null,e)}))}(this,t,e):ke(new T("invalid-auth-event")):(Qc(this,!1,null,null),Ae())}else ke(new T("invalid-auth-event"))},Hc.prototype.ra=function(){var t=this;return new be((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new T("timeout");t.a&&t.a.cancel(),t.a=En(Fc.get()).then((function(){t.b||(t.g=!0,Qc(t,!0,null,e))}))}(t))}))},Xc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ae()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):ke(new T("invalid-auth-event"))}else ke(new T("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var nh="mfaInfo",rh="mfaPendingCredential";function ih(t,e,n,r){T.call(this,"multi-factor-auth-required",r,e),this.b=new eh(t,e,n),Qr(this,"resolver",this.b)}function oh(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new ih(e,t.serverResponse,n,t.message)}catch(t){}return null}function sh(){}function ah(t){Qr(this,"factorId",t.fa),this.a=t}function uh(t){if(ah.call(this,t),this.a.fa!=Mo.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ch(t,e){for(var n in We.call(this,t),e)this[n]=e[n]}function hh(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),an(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&q(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ri]=t.uid),t.displayName&&(r[ei]=t.displayName),t.enrollmentTime&&(r[ni]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ii]=t.phoneNumber);try{e=new oi(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),lh(this,n)}function lh(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function fh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ph(t,e){t.stop(),t.b=En(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return Br()||!t?Ae():new be((function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){ph(t,!0)})).o((function(e){t.i(e)&&ph(t,!1)}))}function dh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function vh(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function gh(t,e){t.b=$i(e[Js]||""),t.a=e.refreshToken,vh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function mh(t,e){return function(t,e){return new be((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?aa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",Xn(e).toString(),t.g,t.m.get()):r(new T("internal-error"))}))}(t.f,e).then((function(e){return t.b=$i(e.access_token),t.a=e.refresh_token,vh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function yh(t,e){this.a=t||null,this.b=e||null,Xr(this,{lastSignInTime:$r(e||null),creationTime:$r(t||null)})}function bh(t,e,n,r,i,o){Xr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function wh(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Hn.SDK_VERSION?kr(Hn.SDK_VERSION):null;this.a=new Xs(this.l,C(S),r),(this.u=t.emulatorConfig||null)&&ia(this.a,this.u),this.h=new dh(this.a),Ch(this,e[Js]),gh(this.h,e),Qr(this,"refreshToken",this.h.a),xh(this,n||{}),bn.call(this),this.P=!1,this.s&&Rr()&&(this.b=Kc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new fh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=b(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){_h(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Eh(i,t.f)},this.ja=null,this.S=new hh(this,n),Qr(this,"multiFactor",this.S)}function _h(t,e){t.u=e,ia(t.a,e),t.b&&(e=t.b,t.b=Kc(t.s,t.l,t.m,t.u),t.P&&(Lc(e,t),Pc(t.b,t)))}function Ih(t,e){t.qa&&hn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&an(e,"languageCodeChanged",t.Pa)}function Th(t,e){t.$&&hn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&an(e,"emulatorConfigChanged",t.Ba)}function Eh(t,e){t.aa=e,sa(t.a,Hn.SDK_VERSION?kr(Hn.SDK_VERSION,t.aa):null)}function Sh(t,e){t.ja&&hn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&an(e,"frameworkChanged",t.Oa)}function Ah(t){try{return Hn.app(t.m).auth()}catch(e){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function kh(t){t.J||t.D.b||(t.D.start(),hn(t,"tokenChanged",t.ba),an(t,"tokenChanged",t.ba))}function Nh(t){hn(t,"tokenChanged",t.ba),t.D.stop()}function Ch(t,e){t.Aa=e,Qr(t,"_lat",e)}function Dh(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Ce(e).then((function(){return t}))}function Rh(t){t.b&&!t.P&&(t.P=!0,Pc(t.b,t))}function xh(t,e){Xr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new yh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Oh(){}function Ph(t){return Ae().then((function(){if(t.J)throw new T("app-deleted")}))}function Lh(t){return $(t.providerData,(function(t){return t.providerId}))}function Mh(t,e){e&&(Fh(t,e.providerId),t.providerData.push(e))}function Fh(t,e){z(t.providerData,(function(t){return t.providerId==e}))}function Uh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function jh(t,e){t!=e&&(Xr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Qr(t,"metadata",function(t){return new yh(t.a,t.b)}(e.metadata)):Qr(t,"metadata",new yh),q(e.providerData,(function(e){Mh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Qr(t,"refreshToken",t.h.a),lh(t.S,e.S.b))}function Vh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Pa,{idToken:e}).then(b(t.Kc,t))}(t,e).then((function(){return n||Uh(t,"isAnonymous",!1),e}))}))}function qh(t,e){e[Js]&&t.Aa!=e[Js]&&(gh(t.h,e),t.dispatchEvent(new ch("tokenChanged")),Ch(t,e[Js]),Uh(t,"refreshToken",t.h.a))}function Bh(t,e){return Vh(t).then((function(){if(H(Lh(t),e))return Dh(t).then((function(){throw new T("provider-already-linked")}))}))}function $h(t,e,n){return Yr({user:t,credential:Uo(e),additionalUserInfo:e=Qi(e),operationType:n})}function Kh(t,e){return qh(t,e),t.reload().then((function(){return t}))}function Hh(t,e,n,r,i){if(!Rr())return ke(new T("operation-not-supported-in-this-environment"));if(t.i&&!i)return ke(t.i);var o=Wi(n.providerId),s=Ur(t.uid+":::"),a=null;(!Pr()||br())&&t.s&&n.isOAuthProvider&&(a=yu(t.s,t.l,t.m,e,n,null,s,Hn.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=dr(a,o&&o.va,o&&o.ua);return r=r().then((function(){if(zh(t),!i)return t.I().then((function(){}))})).then((function(){return Uc(t.b,u,e,n,s,!!a,t.tenantId)})).then((function(){return new be((function(n,r){t.na(e,null,new T("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=qc(t.b,t,e,u,s)}))})).then((function(t){return u&&pr(u),t?Yr(t):null})).o((function(t){throw u&&pr(u),t})),Wh(t,r,i)}function Gh(t,e,n,r,i){if(!Rr())return ke(new T("operation-not-supported-in-this-environment"));if(t.i&&!i)return ke(t.i);var o=null,s=Ur(t.uid+":::");return r=r().then((function(){if(zh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,Dh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Yh,t.w(),e.a)),e})).then((function(){return Vc(t.b,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Jh(t.ha);throw o})).then((function(){if(o)throw o})),Wh(t,r,i)}function zh(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new T("internal-error");throw new T("auth-domain-config-required")}}function Wh(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),ke(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new ch("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){G(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),Ah(t),b(t.jc,t))),n||e}))}function Qh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Js]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new wh(e,n,t);return t.providerData&&q(t.providerData,(function(t){t&&Mh(i,Yr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Xh(t){this.a=t,this.b=ec()}eh.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=ft(e.f);return delete n[nh],delete n[rh],dt(n,t),e.g(n)}))},_(ih,T),sh.prototype.tb=function(t,e,n){return e.type==so?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),dt(n,{phoneVerificationInfo:Lo(t.a)}),ru(e,xa,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return dt(n={mfaPendingCredential:n},{phoneVerificationInfo:Lo(t.a)}),ru(e,Oa,n)}))}(this,t,e)},_(ah,sh),_(uh,ah),_(ch,We),(t=hh.prototype).yc=function(t){lh(this,function(t){var e=[];return q(t.mfaInfo||[],(function(t){(t=ti(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new oo(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return qh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=B(e.b,(function(t){return t.uid!=n}));return lh(e,r),qh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:$(this.b,(function(t){return t.w()}))}}},fh.prototype.start=function(){this.a=this.c,ph(this,!0)},fh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?ke(new T("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?mh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ae(null):Ae({accessToken:this.b.toString(),refreshToken:this.a})},yh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(wh,bn),wh.prototype.xa=function(t){this.za=t,ra(this.a,t)},wh.prototype.la=function(){return this.za},wh.prototype.Ga=function(){return Q(this.aa)},wh.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Qr(wh.prototype,"providerId","firebase"),(t=wh.prototype).reload=function(){var t=this;return Wh(this,Ph(this).then((function(){return Vh(t).then((function(){return Dh(t)})).then(Oh)})))},t.oc=function(t){return this.I(t).then((function(t){return new th(t)}))},t.I=function(t){var e=this;return Wh(this,Ph(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new T("internal-error");return t.accessToken!=e.Aa&&(Ch(e,t.accessToken),e.dispatchEvent(new ch("tokenChanged"))),Uh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new T("internal-error");xh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?$(t,(function(t){return new bh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Mh(this,e[n]);Uh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ch("userReloaded",{hd:t}))},t.Lc=function(t){return zr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return Wh(this,t.c(this.a,this.uid).then((function(t){return qh(e,t),n=$h(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return zr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return Wh(this,Bh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=$h(e,t,"link"),Kh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Wh(this,Bh(this,"phone").then((function(){return Zc(Ah(n),t,e,b(n.rb,n))})))},t.Mc=function(t,e){var n=this;return Wh(this,Ae().then((function(){return Zc(Ah(n),t,e,b(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return Wh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return qh(e,t),e.reload()})))},t.ed=function(t){var e=this;return Wh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return qh(e,t),e.reload()})))},t.Db=function(t){var e=this;return Wh(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return qh(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Ph(this);var e=this;return Wh(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return qh(e,t),Uh(e,"displayName",t.displayName||null),Uh(e,"photoURL",t.photoUrl||null),q(e.providerData,(function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))})),Dh(e)})).then(Oh))},t.cd=function(t){var e=this;return Wh(this,Vh(this).then((function(n){return H(Lh(e),t)?function(t,e,n){return ru(t,Ca,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return q(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),q(Lh(e),(function(t){n[t]||Fh(e,t)})),n[Mo.PROVIDER_ID]||Qr(e,"phoneNumber",null),Dh(e)})):Dh(e).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var t=this;return Wh(this,this.I().then((function(e){return ru(t.a,Na,{idToken:e})})).then((function(){t.dispatchEvent(new ch("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Ih(t,null),Th(t,null),Sh(t,null),t.N=[],t.J=!0,Nh(t),Qr(t,"refreshToken",null),t.b&&Lc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Mb,this):null},t.Ec=function(t){var e=this;return Hh(this,"linkViaPopup",t,(function(){return Bh(e,t.providerId).then((function(){return Dh(e)}))}),!1)},t.Nc=function(t){return Hh(this,"reauthViaPopup",t,(function(){return Ae()}),!0)},t.Fc=function(t){var e=this;return Gh(this,"linkViaRedirect",t,(function(){return Bh(e,t.providerId)}),!1)},t.Oc=function(t){return Gh(this,"reauthViaRedirect",t,(function(){return Ae()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Wh(this,this.I().then((function(n){return _a(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=$h(i,t,"link"),Kh(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Wh(this,Ae().then((function(){return co(Ia(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=$h(i,t,"reauthenticate"),qh(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return Wh(this,this.I().then((function(e){return n=e,void 0===t||lt(t)?{}:ji(new Ci(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return Wh(this,this.I().then((function(t){return r=t,void 0===e||lt(e)?{}:ji(new Ci(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Wh(this,t=co(Ae(t),n.uid).then((function(t){return e=$h(n,t,"reauthenticate"),qh(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&dt(t,this.metadata.w()),q(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),dt(t,this.S.w()),t};var Yh={name:"redirectUser",F:"session"};function Jh(t){return ic(t.b,Yh,t.a)}function Zh(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=nl("local"),n=nl("session"),r=nl("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Fr(s.localStorage.getItem(r))}catch(t){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(el,t.a).then((function(t){return t?nl(t):e}))}))}))})).then((function(e){return t.c=e,tl(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(nl("local"),this.a,b(this.g,this))}function tl(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,nl(Zu[n]),t.a));return r.push(ic(t.b,el,t.a)),function(t){return new be((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Ne(t[a],w(o,a),s);else e(i)}))}(r)}Zh.prototype.g=function(){var t=this,e=nl("local");sl(this,(function(){return Ae().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return tl(t,"local").then((function(){t.c=e}))}))}))};var el={name:"persistence",F:"session"};function nl(t){return{name:"authUser",F:t}}function rl(t,e){return sl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function il(t){return sl(t,(function(){return ic(t.b,t.c,t.a)}))}function ol(t,e,n){return sl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Qh(t||{})}))}))}function sl(t,e){return t.f=t.f.then(e,e),t.f}function al(t){if(this.l=!1,Qr(this,"settings",new Yc),Qr(this,"app",t),!gl(this).options||!gl(this).options.apiKey)throw new T("invalid-api-key");t=Hn.SDK_VERSION?kr(Hn.SDK_VERSION):null,this.a=new Xs(gl(this).options&&gl(this).options.apiKey,C(S),t),this.P=[],this.s=[],this.N=[],this.Pa=Hn.INTERNAL.createSubscribe(b(this.zc,this)),this.W=void 0,this.ib=Hn.INTERNAL.createSubscribe(b(this.Ac,this)),dl(this,null),this.i=new Zh(gl(this).options.apiKey+":"+gl(this).name),this.D=new Xh(gl(this).options.apiKey+":"+gl(this).name),this.$=wl(this,function(t){var e=gl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Yh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Qh(t||{})}))}(t.D,gl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Jh(t.D)}));return wl(t,e)}(t).then((function(){return ol(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return rl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:il(t.i)}))):null})).then((function(e){dl(t,e||null)}));return wl(t,n)}(this)),this.h=wl(this,function(t){return t.$.then((function(){return fl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(nl("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.qa=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(t){var e=gl(t).options.authDomain,n=gl(t).options.apiKey;e&&Rr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Kc(e,n,gl(t).name,t.R),Pc(t.b,t),ml(t)&&Rh(ml(t)),t.m){Rh(t.m);var r=t.m;r.xa(t.la()),Ih(r,t),Eh(r=t.m,t.J),Sh(r,t),_h(r=t.m,t.R),Th(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,bn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Fn(this.R.url);t=Yr({protocol:t.c,host:t.a,port:t.g,options:Yr({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function ul(t){We.call(this,"languageCodeChanged"),this.h=t}function cl(t){We.call(this,"emulatorConfigChanged"),this.c=t}function hl(t){We.call(this,"frameworkChanged"),this.f=t}function ll(t){return t.Oa||ke(new T("auth-domain-config-required"))}function fl(t){if(!Rr())return ke(new T("operation-not-supported-in-this-environment"));var e=ll(t).then((function(){return t.b.ra()})).then((function(t){return t?Yr(t):null}));return wl(t,e)}function pl(t,e){var n={};return n.apiKey=gl(t).options.apiKey,n.authDomain=gl(t).options.authDomain,n.appName=gl(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new wh(t,e);return n&&(i.ha=n),r&&Eh(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return ml(t)&&e.uid==ml(t).uid?(jh(ml(t),e),t.da(e)):(dl(t,e),Rh(e),t.da(e))})).then((function(){bl(t)}))}function dl(t,e){ml(t)&&(function(t,e){z(t.W,(function(t){return t==e}))}(ml(t),t.Ba),hn(ml(t),"tokenChanged",t.qa),hn(ml(t),"userDeleted",t.za),hn(ml(t),"userInvalidated",t.Aa),Nh(ml(t))),e&&(e.W.push(t.Ba),an(e,"tokenChanged",t.qa),an(e,"userDeleted",t.za),an(e,"userInvalidated",t.Aa),0<t.u&&kh(e)),Qr(t,"currentUser",e),e&&(e.xa(t.la()),Ih(e,t),Eh(e,t.J),Sh(e,t),_h(e,t.R),Th(e,t))}function vl(t,e){var n=null,r=null;return wl(t,e.then((function(e){return n=Uo(e),r=Qi(e),pl(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=oh(e.w(),t,b(t.kc,t))),n||e})).then((function(){return Yr({user:ml(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function gl(t){return t.app}function ml(t){return t.currentUser}function yl(t){return ml(t)&&ml(t)._lat||null}function bl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](yl(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](yl(t))}}function wl(t,e){return t.P.push(e),e.oa((function(){G(t.P,e)})),e}function _l(){}function Il(){this.a={},this.b=1e12}Zh.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(_r()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!xu()&&"none"!==t)throw n;break;default:if(!Dr()&&"none"!==t)throw n}}(t),sl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,tl(n,t)})).then((function(){if(n.c=nl(t),e)return n.b.set(n.c,e,n.a)})):Ae()}))},_(al,bn),_(ul,We),_(cl,We),_(hl,We),(t=al.prototype).yb=function(t){return wl(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,ra(this.a,this.aa),this.dispatchEvent(new ul(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&mr().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,ia(this.a,this.R),this.dispatchEvent(new cl(this.R))}},t.Gc=function(t){this.J.push(t),sa(this.a,Hn.SDK_VERSION?kr(Hn.SDK_VERSION,this.J):null),this.dispatchEvent(new hl(this.J))},t.Ga=function(){return Q(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:gl(this).options.apiKey,authDomain:gl(this).options.authDomain,appName:gl(this).name,currentUser:ml(this)&&ml(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return vl(i,wa(i.a,o))}))},t.Xc=function(t){if(!Rr())return ke(new T("operation-not-supported-in-this-environment"));var e=this,n=Wi(t.providerId),r=Ur(),i=null;(!Pr()||br())&&gl(this).options.authDomain&&t.isOAuthProvider&&(i=yu(gl(this).options.authDomain,gl(this).options.apiKey,gl(this).name,"signInViaPopup",t,null,r,Hn.SDK_VERSION||null,null,null,this.T(),this.R));var o=dr(i,n&&n.va,n&&n.ua);return wl(this,n=ll(this).then((function(n){return Uc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new be((function(t,n){e.na("signInViaPopup",null,new T("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=qc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&pr(o),t?Yr(t):null})).o((function(t){throw o&&pr(o),t})))},t.Yc=function(t){if(!Rr())return ke(new T("operation-not-supported-in-this-environment"));var e=this;return wl(this,ll(this).then((function(){return function(t){return sl(t,(function(){return t.b.set(el,t.c.F,t.a)}))}(e.i)})).then((function(){return Vc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.ra=function(){var t=this;return fl(this).then((function(e){return t.b&&zc(t.b.b),e})).o((function(e){throw t.b&&zc(t.b.b),e}))},t.dd=function(t){if(!t)return ke(new T("null-user"));if(this.S!=t.tenantId)return ke(new T("tenant-id-mismatch"));var e=this,n={};n.apiKey=gl(this).options.apiKey,n.authDomain=gl(this).options.authDomain,n.appName=gl(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[Js]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new wh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Eh(e,r),jh(e,t),e}(t,n,e.D,e.Ga());return wl(this,this.h.then((function(){if(gl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return ml(e)&&t.uid==ml(e).uid?(jh(ml(e),t),e.da(t)):(dl(e,r),Rh(r),e.da(r))})).then((function(){bl(e)})))},t.Bb=function(){var t=this;return wl(this,this.h.then((function(){return t.b&&zc(t.b.b),ml(t)?(dl(t,null),il(t.i).then((function(){bl(t)}))):Ae()})))},t.Zc=function(){var t=this;return ol(this.i,gl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=ml(t)&&e){n=ml(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return jh(ml(t),e),ml(t).I();(ml(t)||e)&&(dl(t,e),e&&(Rh(e),e.ha=t.D),t.b&&Pc(t.b,t),bl(t))}}))},t.da=function(t){return rl(this.i,t)},t.mc=function(){bl(this),this.da(ml(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return vl(e,Ae(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(ml(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),wl(t,t.h.then((function(){!t.l&&H(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(yl(t)))})))}(this,(function(){t.next(ml(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(ml(r)):"function"==typeof t.next&&t.next(ml(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(ml(r)):"function"==typeof t.next&&t.next(ml(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return wl(this,this.h.then((function(){return ml(e)?ml(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return vl(e,ru(e.a,Ya,{token:t}))})).then((function(t){var n=t.user;return Uh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return vl(n,ru(n.a,Ja,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return vl(n,ru(n.a,Aa,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return vl(e,t.ka(e.a))}))},t.Sc=function(t){return zr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=ml(t);if(e&&e.isAnonymous){var n=Yr({providerId:null,isNewUser:!1});return Yr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return vl(t,t.a.Ab()).then((function(e){var n=e.user;return Uh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return ml(this)&&ml(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&ml(this)&&kh(ml(this))},t.Pc=function(t){var e=this;q(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&ml(this)&&Nh(ml(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),wl(this,this.h.then((function(){e.l||H(e.s,t)&&t(yl(e))})))},t.removeAuthTokenListener=function(t){z(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(nl("local"),t.a,this.ja),this.b&&(Lc(this.b,this),zc(this.b.b)),Promise.resolve()},t.hc=function(t){return wl(this,function(t,e){return ru(t,ka,{identifier:e,continueUri:xr()?cr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!xo(t)},t.xb=function(t,e){var n=this;return wl(this,Ae().then((function(){var t=new Ci(e);if(!t.c)throw new T("argument-error",xi+" must be true when sending sign in link to email");return ji(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return wl(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return wl(this,this.a.Sa(t).then((function(t){return new si(t)})))},t.kb=function(t){return wl(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return wl(this,Ae().then((function(){return void 0===e||lt(e)?{}:ji(new Ci(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return wl(this,Zc(this,t,e,b(this.ab,this)))},t.Vc=function(t,e){var n=this;return wl(this,Ae().then((function(){var r=e||cr(),i=Ro(t,r);if(!(r=xo(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new T("tenant-id-mismatch");return n.ab(i)})))},_l.prototype.render=function(){},_l.prototype.reset=function(){},_l.prototype.getResponse=function(){},_l.prototype.execute=function(){};var Tl=null;function El(t,e){return(e=Sl(e))&&t.a[e]||null}function Sl(t){return(t=void 0===t?1e12:t)?t.toString():null}function Al(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ae(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():an(this.f,"click",this.i)}function kl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Nl(){}function Cl(){}Il.prototype.render=function(t,e){return this.a[this.b.toString()]=new Al(t,e),this.b++},Il.prototype.reset=function(t){var e=El(this,t);t=Sl(t),e&&t&&(e.delete(),delete this.a[t])},Il.prototype.getResponse=function(t){return(t=El(this,t))?t.getResponse():null},Il.prototype.execute=function(t){(t=El(this,t))&&t.execute()},Al.prototype.getResponse=function(){return kl(this),this.b},Al.prototype.execute=function(){kl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Al.prototype.delete=function(){kl(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},Qr(Nl,"FACTOR_ID","phone"),Cl.prototype.g=function(){return Tl||(Tl=new Il),Ae(Tl)},Cl.prototype.c=function(){};var Dl=null;function Rl(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var xl=new gt(wt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ol=new qr(3e4,6e4);Rl.prototype.g=function(t){var e=this;return new be((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),Ol.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete s[e.a]},Ae($s(Et(xl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Rl.prototype.c=function(){this.b--};var Pl=null;function Ll(t,e,n,r,i,o,a){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(Dl||(Dl=new Cl),a=Dl):(Pl||(Pl=new Rl),a=Pl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Ul])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[jl],!s.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ae(e)||!this.i&&ae(e).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Xs(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Ml];this.a[Ml]=function(t){if(Vl(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Cr(c,s);"function"==typeof e&&e(t)}};var h=this.a[Fl];this.a[Fl]=function(){if(Vl(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Cr(h,s);"function"==typeof t&&t()}}}var Ml="callback",Fl="expired-callback",Ul="sitekey",jl="size";function Vl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function ql(t,e){return t.h.push(e),e.oa((function(){G(t.h,e)})),e}function Bl(t){if(t.J)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function $l(t,e,n){var r=!1;try{this.b=n||Hn.app()}catch(t){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Hn.SDK_VERSION?kr(Hn.SDK_VERSION,o):null,Ll.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,C(S),r)}function Kl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Hl.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=Hl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new T("argument-error",t+" failed: "+r)}(t=Ll.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=ql(this,Ae().then((function(){if(xr()&&!wr())return mr();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,Va,{})})).then((function(e){t.a[Ul]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Bl(this);var t=this;return ql(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=ae(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!se&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',qt(s.name),'"'),s.type){o.push(' type="',qt(s.type),'"');var a={};dt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=pe(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ue(o,s)),2<r.length&&fe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Bl(this);var t=this;return ql(this,this.render().then((function(e){return new be((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){z(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Bl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Bl(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ae(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},_($l,Ll);var Hl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Gl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function zl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Wl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function Ql(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Xl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Yl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Jl(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Zl(t){return d(t)&&"string"==typeof t.uid}function tf(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function ef(t,e){for(var n in e){var r=e[n].name;t[r]=of(r,t[n],e[n].j)}}function nf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w((function(t){return this[t]}),n),set:w((function(t,e,n,r){Kl(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function rf(t,e,n,r){t[e]=of(e,n,r)}function of(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Kl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}ef(al.prototype,{kb:{name:"applyActionCode",j:[Gl("code")]},Sa:{name:"checkActionCode",j:[Gl("code")]},ob:{name:"confirmPasswordReset",j:[Gl("code"),Gl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Gl("email"),Gl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Gl("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Gl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[tf(Wl(),Ql(),"nextOrObserver"),Ql("opt_error",!0),Ql("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[tf(Wl(),Ql(),"nextOrObserver"),Ql("opt_error",!0),Ql("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Gl("email"),tf(Wl("opt_actionCodeSettings",!0),Xl(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Gl("email"),Wl("actionCodeSettings")]},yb:{name:"setPersistence",j:[Gl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Yl()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Yl()]},Tc:{name:"signInWithCustomToken",j:[Gl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Gl("email"),Gl("password")]},Vc:{name:"signInWithEmailLink",j:[Gl("email"),Gl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Gl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[tf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof wh)}},Xl(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Gl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Gl("url"),Wl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Gl("code")]}}),nf(al.prototype,{lc:{name:"languageCode",lb:tf(Gl(),Xl(),"languageCode")},ti:{name:"tenantId",lb:tf(Gl(),Xl(),"tenantId")}}),al.Persistence=Zu,al.Persistence.LOCAL="local",al.Persistence.SESSION="session",al.Persistence.NONE="none",ef(wh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[zl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[zl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Yl()]},rb:{name:"linkWithCredential",j:[Yl()]},Dc:{name:"linkWithPhoneNumber",j:[Gl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Yl()]},ub:{name:"reauthenticateWithCredential",j:[Yl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Gl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[tf(Wl("opt_actionCodeSettings",!0),Xl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Gl(null,!0)]},cd:{name:"unlink",j:[Gl("provider")]},Cb:{name:"updateEmail",j:[Gl("email")]},Db:{name:"updatePassword",j:[Gl("password")]},ed:{name:"updatePhoneNumber",j:[Yl("phone")]},Eb:{name:"updateProfile",j:[Wl("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Gl("email"),tf(Wl("opt_actionCodeSettings",!0),Xl(null,!0),"opt_actionCodeSettings",!0)]}}),ef(Il.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(_l.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(be.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),nf(Yc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:zl("appVerificationDisabledForTesting")}}),ef(Jc.prototype,{confirm:{name:"confirm",j:[Gl("verificationCode")]}}),rf(uo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[go,Co,Po,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[tf(Gl(),Wl(),"json")]),rf(Do,"credential",(function(t,e){return new No(t,e)}),[Gl("email"),Gl("password")]),ef(No.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),ef(wo.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},Ka:{name:"setCustomParameters",j:[Wl("customOAuthParameters")]}}),rf(wo,"credential",_o,[tf(Gl(),Wl(),"token")]),rf(Do,"credentialWithLink",Ro,[Gl("email"),Gl("emailLink")]),ef(Io.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},Ka:{name:"setCustomParameters",j:[Wl("customOAuthParameters")]}}),rf(Io,"credential",To,[tf(Gl(),Wl(),"token")]),ef(Eo.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},Ka:{name:"setCustomParameters",j:[Wl("customOAuthParameters")]}}),rf(Eo,"credential",So,[tf(Gl(),tf(Wl(),Xl()),"idToken"),tf(Gl(),Xl(),"accessToken",!0)]),ef(Ao.prototype,{Ka:{name:"setCustomParameters",j:[Wl("customOAuthParameters")]}}),rf(Ao,"credential",ko,[tf(Gl(),Wl(),"token"),Gl("secret",!0)]),ef(bo.prototype,{Ca:{name:"addScope",j:[Gl("scope")]},credential:{name:"credential",j:[tf(Gl(),tf(Wl(),Xl()),"optionsOrIdToken"),tf(Gl(),Xl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Wl("customOAuthParameters")]}}),ef(po.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),ef(ho.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),rf(Mo,"credential",Fo,[Gl("verificationId"),Gl("verificationCode")]),ef(Mo.prototype,{gb:{name:"verifyPhoneNumber",j:[tf(Gl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Jl(t.session,so)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Jl(t.session,ao)&&Zl(t.multiFactorHint):t.session&&t.multiFactorUid?Jl(t.session,ao)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),ef(Oo.prototype,{w:{name:"toJSON",j:[Gl(null,!0)]}}),ef(T.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),ef(Go.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),ef(Ho.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),ef(ih.prototype,{toJSON:{name:"toJSON",j:[Gl(null,!0)]}}),ef(eh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),ef(hh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},Gl("displayName",!0)]},bd:{name:"unenroll",j:[tf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Zl},Gl(),"multiFactorInfoIdentifier")]}}),ef($l.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),rf(wi,"parseLink",Ni,[Gl("link")]),rf(Nl,"assertion",(function(t){return new uh(t)}),[Yl("phone")]),function(){if(void 0===Hn||!Hn.INTERNAL||!Hn.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ui,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ai,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:al,AuthCredential:uo,Error:T};rf(t,"EmailAuthProvider",Do,[]),rf(t,"FacebookAuthProvider",wo,[]),rf(t,"GithubAuthProvider",Io,[]),rf(t,"GoogleAuthProvider",Eo,[]),rf(t,"TwitterAuthProvider",Ao,[]),rf(t,"OAuthProvider",bo,[Gl("providerId")]),rf(t,"SAMLAuthProvider",yo,[Gl("providerId")]),rf(t,"PhoneAuthProvider",Mo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof al)}}]),rf(t,"RecaptchaVerifier",$l,[tf(Gl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Wl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Hn.app.App)}}]),rf(t,"ActionCodeURL",wi,[]),rf(t,"PhoneMultiFactorGenerator",Nl,[]),Hn.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new al(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),Hn.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Hn.registerVersion("@firebase/auth","0.16.8"),Hn.INTERNAL.extendNamespace({User:wh})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var zn=function(t,e){return(zn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Wn(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Qn,Xn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Yn=Yn||{},Jn=Xn||self;function Zn(){}function tr(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function er(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var nr="closure_uid_"+(1e9*Math.random()>>>0),rr=0;function ir(t,e,n){return t.call.apply(t.bind,arguments)}function or(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function sr(t,e,n){return(sr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ir:or).apply(null,arguments)}function ar(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function ur(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function cr(){this.s=this.s,this.o=this.o}var hr={};cr.prototype.s=!1,cr.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,nr)&&t[nr]||(t[nr]=++rr)}(this);delete hr[t]}},cr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var lr=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},fr=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function pr(t){return Array.prototype.concat.apply([],arguments)}function dr(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function vr(t){return/^[\s\xa0]*$/.test(t)}var gr,mr=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function yr(t,e){return-1!=t.indexOf(e)}function br(t,e){return t<e?-1:t>e?1:0}t:{var wr=Jn.navigator;if(wr){var _r=wr.userAgent;if(_r){gr=_r;break t}}gr=""}function Ir(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Tr(t){var e={};for(var n in t)e[n]=t[n];return e}var Er="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sr(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Er.length;o++)n=Er[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ar(t){return Ar[" "](t),t}Ar[" "]=Zn;var kr,Nr,Cr=yr(gr,"Opera"),Dr=yr(gr,"Trident")||yr(gr,"MSIE"),Rr=yr(gr,"Edge"),xr=Rr||Dr,Or=yr(gr,"Gecko")&&!(yr(gr.toLowerCase(),"webkit")&&!yr(gr,"Edge"))&&!(yr(gr,"Trident")||yr(gr,"MSIE"))&&!yr(gr,"Edge"),Pr=yr(gr.toLowerCase(),"webkit")&&!yr(gr,"Edge");function Lr(){var t=Jn.document;return t?t.documentMode:void 0}t:{var Mr="",Fr=(Nr=gr,Or?/rv:([^\);]+)(\)|;)/.exec(Nr):Rr?/Edge\/([\d\.]+)/.exec(Nr):Dr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Nr):Pr?/WebKit\/(\S+)/.exec(Nr):Cr?/(?:Version)[ \/]?(\S+)/.exec(Nr):void 0);if(Fr&&(Mr=Fr?Fr[1]:""),Dr){var Ur=Lr();if(null!=Ur&&Ur>parseFloat(Mr)){kr=String(Ur);break t}}kr=Mr}var jr,Vr={};function qr(){return function(t){var e=Vr;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=mr(String(kr)).split("."),n=mr("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=br(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||br(0==o[2].length,0==s[2].length)||br(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(Jn.document&&Dr){var Br=Lr();jr=Br||(parseInt(kr,10)||void 0)}else jr=void 0;var $r=jr,Kr=function(){if(!Jn.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Jn.addEventListener("test",Zn,e),Jn.removeEventListener("test",Zn,e)}catch(t){}return t}();function Hr(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Gr(t,e){if(Hr.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Or){t:{try{Ar(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:zr[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Gr.Z.h.call(this)}}Hr.prototype.h=function(){this.defaultPrevented=!0},ur(Gr,Hr);var zr={2:"touch",3:"pen",4:"mouse"};Gr.prototype.h=function(){Gr.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Wr="closure_listenable_"+(1e6*Math.random()|0),Qr=0;function Xr(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Qr,this.ca=this.fa=!1}function Yr(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Jr(t){this.src=t,this.g={},this.h=0}function Zr(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=lr(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Yr(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ti(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Jr.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=ti(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new Xr(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var ei="closure_lm_"+(1e6*Math.random()|0),ni={};function ri(t,e,n,r,i){if(r&&r.once)return oi(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ri(t,e[o],n,r,i);return null}return n=fi(n),t&&t[Wr]?t.N(e,n,er(r)?!!r.capture:!!r,i):ii(t,e,n,!1,r,i)}function ii(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=er(i)?!!i.capture:!!i,a=hi(t);if(a||(t[ei]=a=new Jr(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=ci;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Kr||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ui(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function oi(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)oi(t,e[o],n,r,i);return null}return n=fi(n),t&&t[Wr]?t.O(e,n,er(r)?!!r.capture:!!r,i):ii(t,e,n,!0,r,i)}function si(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)si(t,e[o],n,r,i);else r=er(r)?!!r.capture:!!r,n=fi(n),t&&t[Wr]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=ti(o=t.g[e],n,r,i))&&(Yr(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=hi(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ti(e,n,r,i)),(n=-1<t?e[t]:null)&&ai(n))}function ai(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Wr])Zr(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ui(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=hi(e))?(Zr(n,t),0==n.h&&(n.src=null,e[ei]=null)):Yr(t)}}}function ui(t){return t in ni?ni[t]:ni[t]="on"+t}function ci(t,e){if(t.ca)t=!0;else{e=new Gr(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&ai(t),t=n.call(r,e)}return t}function hi(t){return(t=t[ei])instanceof Jr?t:null}var li="__closure_events_fn_"+(1e9*Math.random()>>>0);function fi(t){return"function"==typeof t?t:(t[li]||(t[li]=function(e){return t.handleEvent(e)}),t[li])}function pi(){cr.call(this),this.i=new Jr(this),this.P=this,this.I=null}function di(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Hr(e,t);else if(e instanceof Hr)e.target=e.target||t;else{var i=e;Sr(e=new Hr(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=vi(s,r,!0,e)&&i}if(i=vi(s=e.g=t,r,!0,e)&&i,i=vi(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=vi(s=e.g=n[o],r,!1,e)&&i}function vi(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&Zr(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ur(pi,cr),pi.prototype[Wr]=!0,pi.prototype.removeEventListener=function(t,e,n,r){si(this,t,e,n,r)},pi.prototype.M=function(){if(pi.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Yr(n[r]);delete e.g[t],e.h--}}this.I=null},pi.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},pi.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var gi=Jn.JSON.stringify;function mi(){var t=Si,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var yi,bi=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=wi.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),wi=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new _i}),(function(t){return t.reset()})),_i=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Ii(t){Jn.setTimeout((function(){throw t}),0)}function Ti(t,e){yi||function(){var t=Jn.Promise.resolve(void 0);yi=function(){t.then(Ai)}}(),Ei||(yi(),Ei=!0),Si.add(t,e)}var Ei=!1,Si=new bi;function Ai(){for(var t;t=mi();){try{t.h.call(t.g)}catch(t){Ii(t)}var e=wi;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Ei=!1}function ki(t,e){pi.call(this),this.h=t||1,this.g=e||Jn,this.j=sr(this.kb,this),this.l=Date.now()}function Ni(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Ci(t,e,n){if("function"==typeof t)n&&(t=sr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=sr(t.handleEvent,t)}return 2147483647<Number(e)?-1:Jn.setTimeout(t,e||0)}function Di(t){t.g=Ci((function(){t.g=null,t.i&&(t.i=!1,Di(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}ur(ki,pi),(Qn=ki.prototype).da=!1,Qn.S=null,Qn.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),di(this,"tick"),this.da&&(Ni(this),this.start()))}},Qn.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Qn.M=function(){ki.Z.M.call(this),Ni(this),delete this.g};var Ri=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}zn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Di(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(Jn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(cr);function xi(t){cr.call(this),this.h=t,this.g={}}ur(xi,cr);var Oi=[];function Pi(t,e,n,r){Array.isArray(n)||(n&&(Oi[0]=n.toString()),n=Oi);for(var i=0;i<n.length;i++){var o=ri(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Li(t){Ir(t.g,(function(t,e){this.g.hasOwnProperty(e)&&ai(t)}),t),t.g={}}function Mi(){this.g=!0}function Fi(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return gi(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}xi.prototype.M=function(){xi.Z.M.call(this),Li(this)},xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mi.prototype.Aa=function(){this.g=!1},Mi.prototype.info=function(){};var Ui={},ji=null;function Vi(){return ji=ji||new pi}function qi(t){Hr.call(this,Ui.Ma,t)}function Bi(t){var e=Vi();di(e,new qi(e,t))}function $i(t,e){Hr.call(this,Ui.STAT_EVENT,t),this.stat=e}function Ki(t){var e=Vi();di(e,new $i(e,t))}function Hi(t,e){Hr.call(this,Ui.Na,t),this.size=e}function Gi(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Jn.setTimeout((function(){t()}),e)}Ui.Ma="serverreachability",ur(qi,Hr),Ui.STAT_EVENT="statevent",ur($i,Hr),Ui.Na="timingevent",ur(Hi,Hr);var zi={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Wi={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Qi(){}function Xi(t){return t.h||(t.h=t.i())}function Yi(){}Qi.prototype.h=null;var Ji,Zi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function to(){Hr.call(this,"d")}function eo(){Hr.call(this,"c")}function no(){}function ro(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new xi(this),this.P=oo,t=xr?125:void 0,this.W=new ki(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new io}function io(){this.i=null,this.g="",this.h=!1}ur(to,Hr),ur(eo,Hr),ur(no,Qi),no.prototype.g=function(){return new XMLHttpRequest},no.prototype.i=function(){return{}},Ji=new no;var oo=45e3,so={},ao={};function uo(t,e,n){t.K=1,t.v=xo(Ao(e)),t.s=n,t.U=!0,co(t,null)}function co(t,e){t.F=Date.now(),po(t),t.A=Ao(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Ho(n.h,"t",r),t.C=0,n=t.l.H,t.h=new io,t.g=Gs(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Ri(sr(t.Ia,t,t.g),t.O)),Pi(t.V,t.g,"readystatechange",t.gb),e=t.H?Tr(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Bi(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function ho(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function lo(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=fo(t,n))==ao){4==e&&(t.o=4,Ki(14),i=!1),Fi(t.j,t.m,null,"[Incomplete Response]");break}if(r==so){t.o=4,Ki(15),Fi(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Fi(t.j,t.m,r,null),bo(t,r)}ho(t)&&r!=ao&&r!=so&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Ki(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Us(e),e.L=!0,Ki(11))):(Fi(t.j,t.m,n,"[Invalid Chunked Response]"),yo(t),mo(t))}function fo(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?ao:(n=Number(e.substring(n,r)),isNaN(n)?so:(r+=1)+n>e.length?ao:(e=e.substr(r,n),t.C=r+n,e))}function po(t){t.Y=Date.now()+t.P,vo(t,t.P)}function vo(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Gi(sr(t.eb,t),e)}function go(t){t.B&&(Jn.clearTimeout(t.B),t.B=null)}function mo(t){0==t.l.G||t.I||qs(t.l,t)}function yo(t){go(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Ni(t.W),Li(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function bo(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Jo(n.i,t)))if(n.I=t.N,!t.J&&Jo(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Vs(n),Cs(n)}Fs(n),Ki(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Gi(sr(n.ab,n),6e3));if(1>=Yo(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else $s(n,11)}else if((t.J||n.g==t)&&Vs(n),!vr(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(yr(h,"spdy")||yr(h,"quic")||yr(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(Zo(l,l.h),l.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Ro(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=Hs(r,r.H?r.la:null,r.W),p.J){ts(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(go(d),po(d)),r.g=p}else Ms(r);0<n.l.length&&xs(n)}else"stop"!=o[0]&&"close"!=o[0]||$s(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?$s(n,7):Ns(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Bi(4)}catch(o){}}function wo(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(tr(t)||"string"==typeof t)fr(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(tr(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(tr(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function _o(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof _o)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Io(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];To(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)To(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function To(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Qn=ro.prototype).setTimeout=function(t){this.P=t},Qn.gb=function(t){t=t.target;var e=this.L;e&&3==Ts(t)?e.l():this.Ia(t)},Qn.Ia=function(t){try{if(t==this.g)t:{var e=Ts(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||xr||this.g&&(this.h.h||this.g.ga()||Es(this.g)))){this.I||4!=e||7==n||Bi(8==n||0>=r?3:2),go(this);var i=this.g.ba();this.N=i;e:if(ho(this)){var o=Es(this.g);t="";var s=o.length,a=4==Ts(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){yo(this),mo(this);var u="";break e}this.h.i=new Jn.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vr(c)){var l=c;break e}}l=null}if(!(i=l)){this.i=!1,this.o=3,Ki(12),yo(this),mo(this);break t}Fi(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,bo(this,i)}this.U?(lo(this,e,u),xr&&this.i&&3==e&&(Pi(this.V,this.W,"tick",this.fb),this.W.start())):(Fi(this.j,this.m,u,null),bo(this,u)),4==e&&yo(this),this.i&&!this.I&&(4==e?qs(this.l,this):(this.i=!1,po(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Ki(12)):(this.o=0,Ki(13)),yo(this),mo(this)}}}catch(e){}},Qn.fb=function(){if(this.g){var t=Ts(this.g),e=this.g.ga();this.C<e.length&&(go(this),lo(this,t,e),this.i&&4!=t&&po(this))}},Qn.cancel=function(){this.I=!0,yo(this)},Qn.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Bi(3),Ki(17)),yo(this),this.o=2,mo(this)):vo(this,this.Y-t)},(Qn=_o.prototype).R=function(){Io(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Qn.T=function(){return Io(this),this.g.concat()},Qn.get=function(t,e){return To(this.h,t)?this.h[t]:e},Qn.set=function(t,e){To(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Qn.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Eo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function So(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof So){this.g=void 0!==e?e:t.g,ko(this,t.j),this.s=t.s,No(this,t.i),Co(this,t.m),this.l=t.l,e=t.h;var n=new qo;n.i=e.i,e.g&&(n.g=new _o(e.g),n.h=e.h),Do(this,n),this.o=t.o}else t&&(n=String(t).match(Eo))?(this.g=!!e,ko(this,n[1]||"",!0),this.s=Oo(n[2]||""),No(this,n[3]||"",!0),Co(this,n[4]),this.l=Oo(n[5]||"",!0),Do(this,n[6]||"",!0),this.o=Oo(n[7]||"")):(this.g=!!e,this.h=new qo(null,this.g))}function Ao(t){return new So(t)}function ko(t,e,n){t.j=n?Oo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function No(t,e,n){t.i=n?Oo(e,!0):e}function Co(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Do(t,e,n){e instanceof qo?(t.h=e,function(t,e){e&&!t.j&&(Bo(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&($o(this,e),Ho(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=Po(e,jo)),t.h=new qo(e,t.g))}function Ro(t,e,n){t.h.set(e,n)}function xo(t){return Ro(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Oo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Po(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Lo),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Lo(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}So.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Po(e,Mo,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(Po(e,Mo,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Po(n,"/"==n.charAt(0)?Uo:Fo,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Po(n,Vo)),t.join("")};var Mo=/[#\/\?@]/g,Fo=/[#\?:]/g,Uo=/[#\?]/g,jo=/[#\?@]/g,Vo=/#/g;function qo(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Bo(t){t.g||(t.g=new _o,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function $o(t,e){Bo(t),e=Go(t,e),To(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,To((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Io(t)))}function Ko(t,e){return Bo(t),e=Go(t,e),To(t.g.h,e)}function Ho(t,e,n){$o(t,e),0<n.length&&(t.i=null,t.g.set(Go(t,e),dr(n)),t.h+=n.length)}function Go(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Qn=qo.prototype).add=function(t,e){Bo(this),this.i=null,t=Go(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Qn.forEach=function(t,e){Bo(this),this.g.forEach((function(n,r){fr(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Qn.T=function(){Bo(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Qn.R=function(t){Bo(this);var e=[];if("string"==typeof t)Ko(this,t)&&(e=pr(e,this.g.get(Go(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=pr(e,t[n])}return e},Qn.set=function(t,e){return Bo(this),this.i=null,Ko(this,t=Go(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Qn.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Qn.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var zo=function(t,e){this.h=t,this.g=e};function Wo(t){this.l=t||Qo,Jn.PerformanceNavigationTiming?t=0<(t=Jn.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(Jn.g&&Jn.g.Ea&&Jn.g.Ea()&&Jn.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Qo=10;function Xo(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Yo(t){return t.h?1:t.g?t.g.size:0}function Jo(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Zo(t,e){t.g?t.g.add(e):t.h=e}function ts(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function es(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Wn(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return dr(t.i)}function ns(){}function rs(){this.g=new ns}function is(t,e,n){var r=n||"";try{wo(t,(function(t,n){var i=t;er(t)&&(i=gi(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function os(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function ss(t){this.l=t.$b||null,this.j=t.ib||!1}function as(t,e){pi.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=us,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Wo.prototype.cancel=function(){var t,e;if(this.i=es(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Wn(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},ns.prototype.stringify=function(t){return Jn.JSON.stringify(t,void 0)},ns.prototype.parse=function(t){return Jn.JSON.parse(t,void 0)},ur(ss,Qi),ss.prototype.g=function(){return new as(this.l,this.j)},ss.prototype.i=function(t){return function(){return t}}({}),ur(as,pi);var us=0;function cs(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function hs(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ls(t)}function ls(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Qn=as.prototype).open=function(t,e){if(this.readyState!=us)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ls(this)},Qn.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||Jn).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Qn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,hs(this)),this.readyState=us},Qn.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ls(this)),this.g&&(this.readyState=3,ls(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Jn.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;cs(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Qn.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?hs(this):ls(this),3==this.readyState&&cs(this)}},Qn.Ua=function(t){this.g&&(this.response=this.responseText=t,hs(this))},Qn.Ta=function(t){this.g&&(this.response=t,hs(this))},Qn.ha=function(){this.g&&hs(this)},Qn.setRequestHeader=function(t,e){this.v.append(t,e)},Qn.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Qn.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(as.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var fs=Jn.JSON.parse;function ps(t){pi.call(this),this.headers=new _o,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ds,this.K=this.L=!1}ur(ps,pi);var ds="",vs=/^https?$/i,gs=["POST","PUT"];function ms(t){return"content-type"==t.toLowerCase()}function ys(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,bs(t),_s(t)}function bs(t){t.D||(t.D=!0,di(t,"complete"),di(t,"error"))}function ws(t){if(t.h&&void 0!==Yn&&(!t.C[1]||4!=Ts(t)||2!=t.ba()))if(t.v&&4==Ts(t))Ci(t.Fa,0,t);else if(di(t,"readystatechange"),4==Ts(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Eo)[1]||null;if(!o&&Jn.self&&Jn.self.location){var s=Jn.self.location.protocol;o=s.substr(0,s.length-1)}i=!vs.test(o?o.toLowerCase():"")}e=i}if(e)di(t,"complete"),di(t,"success");else{t.m=6;try{var a=2<Ts(t)?t.g.statusText:""}catch(t){a=""}t.j=a+" ["+t.ba()+"]",bs(t)}}finally{_s(t)}}}function _s(t,e){if(t.g){Is(t);var n=t.g,r=t.C[0]?Zn:null;t.g=null,t.C=null,e||di(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Is(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(Jn.clearTimeout(t.A),t.A=null)}function Ts(t){return t.g?t.g.readyState:0}function Es(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case ds:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ss(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Ir(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ro(t,e,n))}function As(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ks(t){this.za=0,this.l=[],this.h=new Mi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=As("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=As("baseRetryDelayMs",5e3,t),this.$a=As("retryDelaySeedMs",1e4,t),this.Ya=As("forwardChannelMaxRetries",2,t),this.ra=As("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Wo(t&&t.concurrentRequestLimit),this.Ca=new rs,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Ns(t){if(Ds(t),3==t.G){var e=t.V++,n=Ao(t.F);Ro(n,"SID",t.J),Ro(n,"RID",e),Ro(n,"TYPE","terminate"),Ps(t,n),(e=new ro(t,t.h,e,void 0)).K=2,e.v=xo(Ao(n)),n=!1,Jn.navigator&&Jn.navigator.sendBeacon&&(n=Jn.navigator.sendBeacon(e.v.toString(),"")),!n&&Jn.Image&&((new Image).src=e.v,n=!0),n||(e.g=Gs(e.l,null),e.g.ea(e.v)),e.F=Date.now(),po(e)}Ks(t)}function Cs(t){t.g&&(Us(t),t.g.cancel(),t.g=null)}function Ds(t){Cs(t),t.u&&(Jn.clearTimeout(t.u),t.u=null),Vs(t),t.i.cancel(),t.m&&("number"==typeof t.m&&Jn.clearTimeout(t.m),t.m=null)}function Rs(t,e){t.l.push(new zo(t.Za++,e)),3==t.G&&xs(t)}function xs(t){Xo(t.i)||t.m||(t.m=!0,Ti(t.Ha,t),t.C=0)}function Os(t,e){var n;n=e?e.m:t.V++;var r=Ao(t.F);Ro(r,"SID",t.J),Ro(r,"RID",n),Ro(r,"AID",t.U),Ps(t,r),t.o&&t.s&&Ss(r,t.o,t.s),n=new ro(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Ls(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Zo(t.i,n),uo(n,r,e)}function Ps(t,e){t.j&&wo({},(function(t,n){Ro(e,n,t)}))}function Ls(t,e,n){n=Math.min(t.l.length,n);var r=t.j?sr(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{is(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Ms(t){t.g||t.u||(t.Y=1,Ti(t.Ga,t),t.A=0)}function Fs(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=Gi(sr(t.Ga,t),Bs(t,t.A)),t.A++,!0)}function Us(t){null!=t.B&&(Jn.clearTimeout(t.B),t.B=null)}function js(t){t.g=new ro(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Ao(t.oa);Ro(e,"RID","rpc"),Ro(e,"SID",t.J),Ro(e,"CI",t.N?"0":"1"),Ro(e,"AID",t.U),Ps(t,e),Ro(e,"TYPE","xmlhttp"),t.o&&t.s&&Ss(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=xo(Ao(e)),n.s=null,n.U=!0,co(n,t)}function Vs(t){null!=t.v&&(Jn.clearTimeout(t.v),t.v=null)}function qs(t,e){var n=null;if(t.g==e){Vs(t),Us(t),t.g=null;var r=2}else{if(!Jo(t.i,e))return;n=e.D,ts(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;di(r=Vi(),new Hi(r,n,e,i)),xs(t)}else Ms(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Yo(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Gi(sr(t.Ha,t,e),Bs(t,t.C)),t.C++,0)))}(t,e)||2==r&&Fs(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:$s(t,5);break;case 4:$s(t,10);break;case 3:$s(t,6);break;default:$s(t,2)}}function Bs(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function $s(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=sr(t.jb,t);n||(n=new So("//www.google.com/images/cleardot.gif"),Jn.location&&"http"==Jn.location.protocol||ko(n,"https"),xo(n)),function(t,e){var n=new Mi;if(Jn.Image){var r=new Image;r.onload=ar(os,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ar(os,n,r,"TestLoadImage: error",!1,e),r.onabort=ar(os,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ar(os,n,r,"TestLoadImage: timeout",!1,e),Jn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Ki(2);t.G=0,t.j&&t.j.va(e),Ks(t),Ds(t)}function Ks(t){t.G=0,t.I=-1,t.j&&(0==es(t.i).length&&0==t.l.length||(t.i.i.length=0,dr(t.l),t.l.length=0),t.j.ua())}function Hs(t,e,n){var r=function(t){return t instanceof So?Ao(t):new So(t,void 0)}(n);if(""!=r.i)e&&No(r,e+"."+r.i),Co(r,r.m);else{var i=Jn.location;r=function(t,e,n,r){var i=new So(null,void 0);return t&&ko(i,t),e&&No(i,e),n&&Co(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&Ir(t.aa,(function(t,e){Ro(r,e,t)})),e=t.D,n=t.sa,e&&n&&Ro(r,e,n),Ro(r,"VER",t.ma),Ps(t,r),r}function Gs(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new ps(new ss({ib:!0})):new ps(t.qa)).L=t.H,e}function zs(){}function Ws(){if(Dr&&!(10<=Number($r)))throw Error("Environmental error: no available transport.")}function Qs(t,e){pi.call(this),this.g=new ks(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!vr(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vr(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Js(this)}function Xs(t){to.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Ys(){eo.call(this),this.status=1}function Js(t){this.g=t}(Qn=ps.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ji.g(),this.C=this.u?Xi(this.u):Xi(Ji),this.g.onreadystatechange=sr(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void ys(this,t)}t=n||"";var i=new _o(this.headers);r&&wo(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=ms,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=Jn.FormData&&t instanceof Jn.FormData,!(0<=lr(gs,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Is(this),0<this.B&&((this.K=function(t){return Dr&&qr()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=sr(this.pa,this)):this.A=Ci(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){ys(this,t)}},Qn.pa=function(){void 0!==Yn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,di(this,"timeout"),this.abort(8))},Qn.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,di(this,"complete"),di(this,"abort"),_s(this))},Qn.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),_s(this,!0)),ps.Z.M.call(this)},Qn.Fa=function(){this.s||(this.F||this.v||this.l?ws(this):this.cb())},Qn.cb=function(){ws(this)},Qn.ba=function(){try{return 2<Ts(this)?this.g.status:-1}catch(t){return-1}},Qn.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Qn.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),fs(e)}},Qn.Da=function(){return this.m},Qn.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Qn=ks.prototype).ma=8,Qn.G=1,Qn.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},Qn.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new ro(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Sr(n=Tr(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Ls(this,e,r),Ro(i=Ao(this.F),"RID",t),Ro(i,"CVER",22),this.D&&Ro(i,"X-HTTP-Session-Id",this.D),Ps(this,i),this.o&&n&&Ss(i,this.o,n),Zo(this.i,e),this.Ra&&Ro(i,"TYPE","init"),this.ja?(Ro(i,"$req",r),Ro(i,"SID","null"),e.$=!0,uo(e,i,null)):uo(e,i,r),this.G=2}}else 3==this.G&&(t?Os(this,t):0==this.l.length||Xo(this.i)||Os(this))},Qn.Ga=function(){if(this.u=null,js(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Gi(sr(this.bb,this),t)}},Qn.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ki(10),Cs(this),js(this))},Qn.ab=function(){null!=this.v&&(this.v=null,Cs(this),Fs(this),Ki(19))},Qn.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Ki(2)):(this.h.info("Failed to ping google.com"),Ki(1))},(Qn=zs.prototype).xa=function(){},Qn.wa=function(){},Qn.va=function(){},Qn.ua=function(){},Qn.Oa=function(){},Ws.prototype.g=function(t,e){return new Qs(t,e)},ur(Qs,pi),Qs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Ti(sr(t.hb,t,e))),Ki(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Hs(t,null,t.W),xs(t)},Qs.prototype.close=function(){Ns(this.g)},Qs.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Rs(this.g,e)}else this.v?((e={}).__data__=gi(t),Rs(this.g,e)):Rs(this.g,t)},Qs.prototype.M=function(){this.g.j=null,delete this.j,Ns(this.g),delete this.g,Qs.Z.M.call(this)},ur(Xs,to),ur(Ys,eo),ur(Js,zs),Js.prototype.xa=function(){di(this.g,"a")},Js.prototype.wa=function(t){di(this.g,new Xs(t))},Js.prototype.va=function(t){di(this.g,new Ys(t))},Js.prototype.ua=function(){di(this.g,"b")},Ws.prototype.createWebChannel=Ws.prototype.g,Qs.prototype.send=Qs.prototype.u,Qs.prototype.open=Qs.prototype.m,Qs.prototype.close=Qs.prototype.close,zi.NO_ERROR=0,zi.TIMEOUT=8,zi.HTTP_ERROR=6,Wi.COMPLETE="complete",Yi.EventType=Zi,Zi.OPEN="a",Zi.CLOSE="b",Zi.ERROR="c",Zi.MESSAGE="d",pi.prototype.listen=pi.prototype.N,ps.prototype.listenOnce=ps.prototype.O,ps.prototype.getLastError=ps.prototype.La,ps.prototype.getLastErrorCode=ps.prototype.Da,ps.prototype.getStatus=ps.prototype.ba,ps.prototype.getResponseJson=ps.prototype.Qa,ps.prototype.getResponseText=ps.prototype.ga,ps.prototype.send=ps.prototype.ea;var Zs=zi,ta=Wi,ea=Ui,na=10,ra=11,ia=ss,oa=Yi,sa=ps,aa=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();aa.o=-1;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var ua={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ca=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Qe(e,t),e}(Error),ha=new Dn("@firebase/firestore");function la(){return ha.logLevel}function fa(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ha.logLevel<=Tn.DEBUG){var r=e.map(va);ha.debug.apply(ha,en(["Firestore (8.8.0): "+t],r))}}function pa(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ha.logLevel<=Tn.ERROR){var r=e.map(va);ha.error.apply(ha,en(["Firestore (8.8.0): "+t],r))}}function da(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(ha.logLevel<=Tn.WARN){var r=e.map(va);ha.warn.apply(ha,en(["Firestore (8.8.0): "+t],r))}}function va(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ga(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.0) INTERNAL ASSERTION FAILED: "+t;throw pa(e),new Error(e)}function ma(t,e){t||ga()}function ya(t,e){return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ba(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var wa=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=ba(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function _a(t,e){return t<e?-1:t>e?1:0}function Ia(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Ta(t){return t+"\0"}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ea=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ca(ua.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ca(ua.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ca(ua.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ca(ua.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?_a(this.nanoseconds,t.nanoseconds):_a(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Sa=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Ea(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Aa(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ka(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Na(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ca=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ga(),void 0===n?n=t.length-e:n>t.length-e&&ga(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Da=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qe(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new ca(ua.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Ca),Ra=/^[_a-zA-Z][_a-zA-Z0-9]*$/,xa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qe(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Ra.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new ca(ua.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new ca(ua.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ca(ua.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ca(ua.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Ca),Oa=function(){function t(t){this.fields=t,t.sort(xa.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Ia(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Pa=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return _a(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Pa.EMPTY_BYTE_STRING=new Pa("");var La=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ma(t){if(ma(!!t),"string"==typeof t){var e=0,n=La.exec(t);if(ma(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Fa(t.seconds),nanos:Fa(t.nanos)}}function Fa(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ua(t){return"string"==typeof t?Pa.fromBase64String(t):Pa.fromUint8Array(t)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ja(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Va(t){var e=t.mapValue.fields.__previous_value__;return ja(e)?Va(e):e}function qa(t){var e=Ma(t.mapValue.fields.__local_write_time__.timestampValue);return new Ea(e.seconds,e.nanos)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ba(t){return null==t}function $a(t){return 0===t&&1/t==-1/0}function Ka(t){return"number"==typeof t&&Number.isInteger(t)&&!$a(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ha=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Da.fromString(e))},t.fromName=function(e){return new t(Da.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Da.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Da.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Da(e.slice()))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ga(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ja(t)?4:10:ga()}function za(t,e){var n=Ga(t);if(n!==Ga(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return qa(t).isEqual(qa(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Ma(t.timestampValue),r=Ma(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ua(t.bytesValue).isEqual(Ua(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Fa(t.geoPointValue.latitude)===Fa(e.geoPointValue.latitude)&&Fa(t.geoPointValue.longitude)===Fa(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Fa(t.integerValue)===Fa(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Fa(t.doubleValue),r=Fa(e.doubleValue);return n===r?$a(n)===$a(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Ia(t.arrayValue.values||[],e.arrayValue.values||[],za);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Aa(n)!==Aa(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!za(n[i],r[i])))return!1;return!0}(t,e);default:return ga()}}function Wa(t,e){return void 0!==(t.values||[]).find((function(t){return za(t,e)}))}function Qa(t,e){var n=Ga(t),r=Ga(e);if(n!==r)return _a(n,r);switch(n){case 0:return 0;case 1:return _a(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Fa(t.integerValue||t.doubleValue),r=Fa(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Xa(t.timestampValue,e.timestampValue);case 4:return Xa(qa(t),qa(e));case 5:return _a(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ua(t),r=Ua(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=_a(n[i],r[i]);if(0!==o)return o}return _a(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=_a(Fa(t.latitude),Fa(e.latitude));return 0!==n?n:_a(Fa(t.longitude),Fa(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Qa(n[i],r[i]);if(o)return o}return _a(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=_a(r[s],o[s]);if(0!==a)return a;var u=Qa(n[r[s]],i[o[s]]);if(0!==u)return u}return _a(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ga()}}function Xa(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return _a(t,e);var n=Ma(t),r=Ma(e),i=_a(n.seconds,r.seconds);return 0!==i?i:_a(n.nanos,r.nanos)}function Ya(t){return Ja(t)}function Ja(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Ma(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ua(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Ha.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Ja(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Ja(t.fields[o])}return e+"}"}(t.mapValue):ga();var e,n}function Za(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function tu(t){return!!t&&"integerValue"in t}function eu(t){return!!t&&"arrayValue"in t}function nu(t){return!!t&&"nullValue"in t}function ru(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function iu(t){return!!t&&"mapValue"in t}function ou(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return ka(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ou(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ou(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var su=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!iu(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ou(e)},t.prototype.setAll=function(t){var e=this,n=xa.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ou(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());iu(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return za(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];iu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){ka(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(ou(this.value))},t}();function au(t){var e=[];return ka(t.fields,(function(t,n){var r=new xa([t]);if(iu(n)){var i=au(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new Oa(e)
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var uu=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Sa.min(),su.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,su.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,su.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=su.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=su.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),cu=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function hu(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new cu(t,e,n,r,i,o,s)}function lu(t){var e=ya(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Ya(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Ba(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Eu(e.startAt)),e.endAt&&(n+="|ub:",n+=Eu(e.endAt)),e.h=n}return e.h}function fu(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Au(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!za(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Nu(t.startAt,e.startAt)&&Nu(t.endAt,e.endAt)}function pu(t){return Ha.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var du=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Qe(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new vu(t,n,r):"array-contains"===n?new bu(t,r):"in"===n?new wu(t,r):"not-in"===n?new _u(t,r):"array-contains-any"===n?new Iu(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new gu(t,n):new mu(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Qa(e,this.value)):null!==e&&Ga(this.value)===Ga(e)&&this.m(Qa(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ga()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),vu=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ha.fromName(r.referenceValue),i}return Qe(e,t),e.prototype.matches=function(t){var e=Ha.comparator(t.key,this.key);return this.m(e)},e}(du),gu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=yu("in",n),r}return Qe(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(du),mu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=yu("not-in",n),r}return Qe(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(du);function yu(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Ha.fromName(t.referenceValue)}))}var bu=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Qe(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return eu(e)&&Wa(e.arrayValue,this.value)},e}(du),wu=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Qe(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Wa(this.value.arrayValue,e)},e}(du),_u=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Qe(e,t),e.prototype.matches=function(t){if(Wa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Wa(this.value.arrayValue,e)},e}(du),Iu=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Qe(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!eu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Wa(e.value.arrayValue,t)}))},e}(du),Tu=function(t,e){this.position=t,this.before=e};function Eu(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Ya(t)})).join(",")}var Su=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Au(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ku(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Ha.comparator(Ha.fromName(s.referenceValue),n.key):Qa(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Nu(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!za(t.position[n],e.position[n]))return!1;return!0}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Cu=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function Du(t,e,n,r,i,o,s,a){return new Cu(t,e,n,r,i,o,s,a)}function Ru(t){return new Cu(t)}function xu(t){return!Ba(t.limit)&&"F"===t.limitType}function Ou(t){return!Ba(t.limit)&&"L"===t.limitType}function Pu(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Lu(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Mu(t){return null!==t.collectionGroup}function Fu(t){var e=ya(t);if(null===e.p){e.p=[];var n=Lu(e),r=Pu(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Su(n)),e.p.push(new Su(xa.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Su(xa.keyField(),u))}}}return e.p}function Uu(t){var e=ya(t);if(!e.T)if("F"===e.limitType)e.T=hu(e.path,e.collectionGroup,Fu(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Fu(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Su(o.field,s))}var a=e.endAt?new Tu(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Tu(e.startAt.position,!e.startAt.before):null;e.T=hu(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function ju(t,e,n){return new Cu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vu(t,e){return fu(Uu(t),Uu(e))&&t.limitType===e.limitType}function qu(t){return lu(Uu(t))+"|lt:"+t.limitType}function Bu(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Ya(e.value);var e})).join(", ")+"]"),Ba(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Eu(t.startAt)),t.endAt&&(e+=", endAt: "+Eu(t.endAt)),"Target("+e+")"}(Uu(t))+"; limitType="+t.limitType+")"}function $u(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ha.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ku(t.startAt,Fu(t),e)||t.endAt&&ku(t.endAt,Fu(t),e))}(t,e)}function Ku(t){return function(e,n){for(var r=!1,i=0,o=Fu(t);i<o.length;i++){var s=o[i],a=Hu(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Hu(t,e,n){var r=t.field.isKeyField()?Ha.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Qa(r,i):ga()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ga()}}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Gu(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$a(e)?"-0":e}}function zu(t){return{integerValue:""+t}}function Wu(t,e){return Ka(e)?zu(e):Gu(t,e)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Qu=function(){this._=void 0};function Xu(t,e,n){return t instanceof Zu?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof tc?ec(t,e):t instanceof nc?rc(t,e):function(t,e){var n=Ju(t,e),r=oc(n)+oc(t.A);return tu(n)&&tu(t.A)?zu(r):Gu(t.R,r)}(t,e)}function Yu(t,e,n){return t instanceof tc?ec(t,e):t instanceof nc?rc(t,e):n}function Ju(t,e){return t instanceof ic?tu(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Zu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qe(e,t),e}(Qu),tc=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Qe(e,t),e}(Qu);function ec(t,e){for(var n=sc(e),r=function(t){n.some((function(e){return za(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var nc=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Qe(e,t),e}(Qu);function rc(t,e){for(var n=sc(e),r=function(t){n=n.filter((function(e){return!za(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ic=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Qe(e,t),e}(Qu);function oc(t){return Fa(t.integerValue||t.doubleValue)}function sc(t){return eu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ac=function(t,e){this.field=t,this.transform=e},uc=function(t,e){this.version=t,this.transformResults=e},cc=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function hc(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var lc=function(){};function fc(t,e,n){t instanceof mc?function(t,e,n){var r=t.value.clone(),i=wc(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof yc?function(t,e,n){if(hc(t.precondition,e)){var r=wc(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(bc(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function pc(t,e,n){t instanceof mc?function(t,e,n){if(hc(t.precondition,e)){var r=t.value.clone(),i=_c(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(gc(e),r).setHasLocalMutations()}}(t,e,n):t instanceof yc?function(t,e,n){if(hc(t.precondition,e)){var r=_c(t.fieldTransforms,n,e),i=e.data;i.setAll(bc(t)),i.setAll(r),e.convertToFoundDocument(gc(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){hc(t.precondition,e)&&e.convertToNoDocument(Sa.min())}(t,e)}function dc(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Ju(o.transform,s||null);null!=a&&(null==n&&(n=su.empty()),n.set(o.field,a))}return n||null}function vc(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Ia(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof tc&&e instanceof tc||t instanceof nc&&e instanceof nc?Ia(t.elements,e.elements,za):t instanceof ic&&e instanceof ic?za(t.A,e.A):t instanceof Zu&&e instanceof Zu}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function gc(t){return t.isFoundDocument()?t.version:Sa.min()}var mc=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Qe(e,t),e}(lc),yc=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Qe(e,t),e}(lc);function bc(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function wc(t,e,n){var r=new Map;ma(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Yu(s,a,n[i]))}return r}function _c(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,Xu(a,u,e))}return r}var Ic,Tc,Ec=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Qe(e,t),e}(lc),Sc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Qe(e,t),e}(lc),Ac=function(t){this.count=t};function kc(t){switch(t){case ua.OK:return ga();case ua.CANCELLED:case ua.UNKNOWN:case ua.DEADLINE_EXCEEDED:case ua.RESOURCE_EXHAUSTED:case ua.INTERNAL:case ua.UNAVAILABLE:case ua.UNAUTHENTICATED:return!1;case ua.INVALID_ARGUMENT:case ua.NOT_FOUND:case ua.ALREADY_EXISTS:case ua.PERMISSION_DENIED:case ua.FAILED_PRECONDITION:case ua.ABORTED:case ua.OUT_OF_RANGE:case ua.UNIMPLEMENTED:case ua.DATA_LOSS:return!0;default:return ga()}}function Nc(t){if(void 0===t)return pa("GRPC error has no .code"),ua.UNKNOWN;switch(t){case Ic.OK:return ua.OK;case Ic.CANCELLED:return ua.CANCELLED;case Ic.UNKNOWN:return ua.UNKNOWN;case Ic.DEADLINE_EXCEEDED:return ua.DEADLINE_EXCEEDED;case Ic.RESOURCE_EXHAUSTED:return ua.RESOURCE_EXHAUSTED;case Ic.INTERNAL:return ua.INTERNAL;case Ic.UNAVAILABLE:return ua.UNAVAILABLE;case Ic.UNAUTHENTICATED:return ua.UNAUTHENTICATED;case Ic.INVALID_ARGUMENT:return ua.INVALID_ARGUMENT;case Ic.NOT_FOUND:return ua.NOT_FOUND;case Ic.ALREADY_EXISTS:return ua.ALREADY_EXISTS;case Ic.PERMISSION_DENIED:return ua.PERMISSION_DENIED;case Ic.FAILED_PRECONDITION:return ua.FAILED_PRECONDITION;case Ic.ABORTED:return ua.ABORTED;case Ic.OUT_OF_RANGE:return ua.OUT_OF_RANGE;case Ic.UNIMPLEMENTED:return ua.UNIMPLEMENTED;case Ic.DATA_LOSS:return ua.DATA_LOSS;default:return ga()}}(Tc=Ic||(Ic={}))[Tc.OK=0]="OK",Tc[Tc.CANCELLED=1]="CANCELLED",Tc[Tc.UNKNOWN=2]="UNKNOWN",Tc[Tc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tc[Tc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tc[Tc.NOT_FOUND=5]="NOT_FOUND",Tc[Tc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tc[Tc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tc[Tc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tc[Tc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tc[Tc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tc[Tc.ABORTED=10]="ABORTED",Tc[Tc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tc[Tc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tc[Tc.INTERNAL=13]="INTERNAL",Tc[Tc.UNAVAILABLE=14]="UNAVAILABLE",Tc[Tc.DATA_LOSS=15]="DATA_LOSS";
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Cc=function(){function t(t,e){this.comparator=t,this.root=e||Rc.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rc.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rc.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Dc(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Dc(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Dc(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Dc(this.root,t,this.comparator,!0)},t}(),Dc=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Rc=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw ga();if(this.right.isRed())throw ga();var t=this.left.check();if(t!==this.right.check())throw ga();return t+(this.isRed()?0:1)},t}();Rc.EMPTY=null,Rc.RED=!0,Rc.BLACK=!1,Rc.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ga()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ga()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ga()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ga()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ga()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Rc(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var xc=function(){function t(t){this.comparator=t,this.data=new Cc(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Oc(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Oc(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Oc=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Pc=new Cc(Ha.comparator);function Lc(){return Pc}var Mc=new Cc(Ha.comparator);function Fc(){return Mc}var Uc=new Cc(Ha.comparator);var jc=new xc(Ha.comparator);function Vc(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=jc,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var qc=new xc(_a);function Bc(){return qc}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var $c=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Kc.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Sa.min(),r,Bc(),Lc(),Vc())},t}(),Kc=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Pa.EMPTY_BYTE_STRING,n,Vc(),Vc(),Vc())},t}(),Hc=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Gc=function(t,e){this.targetId=t,this.V=e},zc=function(t,e,n,r){void 0===n&&(n=Pa.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Wc=function(){function t(){this.S=0,this.D=Yc(),this.C=Pa.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Vc(),e=Vc(),n=Vc();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ga()}})),new Kc(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Yc()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Qc=function(){function t(t){this.W=t,this.G=new Map,this.H=Lc(),this.J=Xc(),this.Y=new xc(_a)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:ga()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(pu(i))if(0===n){var o=new Ha(i.path);this.tt(e,o,uu.newNoDocument(o,Sa.min()))}else ma(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&pu(o.target)){var s=new Ha(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,uu.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Vc();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new $c(t,n,this.Y,this.H,r);return this.H=Lc(),this.J=Xc(),this.Y=new xc(_a),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Wc,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new xc(_a),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||fa("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Wc),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Xc(){return new Cc(Ha.comparator)}function Yc(){return new Cc(Ha.comparator)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Jc={asc:"ASCENDING",desc:"DESCENDING"},Zc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},th=function(t,e){this.databaseId=t,this.I=e};function eh(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function nh(t,e){return t.I?e.toBase64():e.toUint8Array()}function rh(t,e){return eh(t,e.toTimestamp())}function ih(t){return ma(!!t),Sa.fromTimestamp(function(t){var e=Ma(t);return new Ea(e.seconds,e.nanos)}(t))}function oh(t,e){return function(t){return new Da(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function sh(t){var e=Da.fromString(t);return ma(Ch(e)),e}function ah(t,e){return oh(t.databaseId,e.path)}function uh(t,e){var n=sh(e);if(n.get(1)!==t.databaseId.projectId)throw new ca(ua.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ca(ua.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ha(fh(n))}function ch(t,e){return oh(t.databaseId,e)}function hh(t){var e=sh(t);return 4===e.length?Da.emptyPath():fh(e)}function lh(t){return new Da(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fh(t){return ma(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ph(t,e,n){return{name:ah(t,e),fields:n.value.mapValue.fields}}function dh(t,e){var n;if(e instanceof mc)n={update:ph(t,e.key,e.value)};else if(e instanceof Ec)n={delete:ah(t,e.key)};else if(e instanceof yc)n={update:ph(t,e.key,e.data),updateMask:Nh(e.fieldMask)};else{if(!(e instanceof Sc))return ga();n={verify:ah(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Zu)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof tc)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof nc)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ic)return{fieldPath:e.field.canonicalString(),increment:n.A};throw ga()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:rh(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ga()}(t,e.precondition)),n}function vh(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?cc.updateTime(ih(t.updateTime)):void 0!==t.exists?cc.exists(t.exists):cc.none()}(e.currentDocument):cc.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)ma("REQUEST_TIME"===e.setToServerValue),n=new Zu;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new tc(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new nc(i)}else"increment"in e?n=new ic(t,e.increment):ga();var o=xa.fromServerFormat(e.fieldPath);return new ac(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=uh(t,e.update.name),o=new su({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new Oa(e.map((function(t){return xa.fromServerFormat(t)})))}(e.updateMask);return new yc(i,o,s,n,r)}return new mc(i,o,n,r)}if(e.delete){var a=uh(t,e.delete);return new Ec(a,n)}if(e.verify){var u=uh(t,e.verify);return new Sc(u,n)}return ga()}function gh(t,e){return{documents:[ch(t,e.path)]}}function mh(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ch(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ch(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(ru(t.value))return{unaryFilter:{field:Eh(t.field),op:"IS_NAN"}};if(nu(t.value))return{unaryFilter:{field:Eh(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ru(t.value))return{unaryFilter:{field:Eh(t.field),op:"IS_NOT_NAN"}};if(nu(t.value))return{unaryFilter:{field:Eh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Eh(t.field),op:Th(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Eh(t.field),direction:Ih(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Ba(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=wh(e.startAt)),e.endAt&&(n.structuredQuery.endAt=wh(e.endAt)),n}function yh(t){var e=hh(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ma(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=bh(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Su(Sh(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Ba(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=_h(n.startAt));var h=null;return n.endAt&&(h=_h(n.endAt)),Du(e,i,a,s,u,"F",c,h)}function bh(t){return t?void 0!==t.unaryFilter?[kh(t)]:void 0!==t.fieldFilter?[Ah(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return bh(t)})).reduce((function(t,e){return t.concat(e)})):ga():[]}function wh(t){return{before:t.before,values:t.position}}function _h(t){var e=!!t.before,n=t.values||[];return new Tu(n,e)}function Ih(t){return Jc[t]}function Th(t){return Zc[t]}function Eh(t){return{fieldPath:t.canonicalString()}}function Sh(t){return xa.fromServerFormat(t.fieldPath)}function Ah(t){return du.create(Sh(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ga()}}(t.fieldFilter.op),t.fieldFilter.value)}function kh(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Sh(t.unaryFilter.field);return du.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Sh(t.unaryFilter.field);return du.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Sh(t.unaryFilter.field);return du.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Sh(t.unaryFilter.field);return du.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ga()}}function Nh(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Ch(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Dh(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=xh(e)),e=Rh(t.get(n),e);return xh(e)}function Rh(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function xh(t){return t+""}function Oh(t){var e=t.length;if(ma(e>=2),2===e)return ma(""===t.charAt(0)&&""===t.charAt(1)),Da.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&ga(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ga()}o=s+2}return new Da(r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ph=function(t,e){this.seconds=t,this.nanoseconds=e},Lh=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Lh.store="owner",Lh.key="owner";var Mh=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Mh.store="mutationQueues",Mh.keyPath="userId";var Fh=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Fh.store="mutations",Fh.keyPath="batchId",Fh.userMutationsIndex="userMutationsIndex",Fh.userMutationsKeyPath=["userId","batchId"];var Uh=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Dh(e)]},t.key=function(t,e,n){return[t,Dh(e),n]},t}();Uh.store="documentMutations",Uh.PLACEHOLDER=new Uh;var jh=function(t,e){this.path=t,this.readTime=e},Vh=function(t,e){this.path=t,this.version=e},qh=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};qh.store="remoteDocuments",qh.readTimeIndex="readTimeIndex",qh.readTimeIndexPath="readTime",qh.collectionReadTimeIndex="collectionReadTimeIndex",qh.collectionReadTimeIndexPath=["parentPath","readTime"];var Bh=function(t){this.byteSize=t};Bh.store="remoteDocumentGlobal",Bh.key="remoteDocumentGlobalKey";var $h=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};$h.store="targets",$h.keyPath="targetId",$h.queryTargetsIndexName="queryTargetsIndex",$h.queryTargetsKeyPath=["canonicalId","targetId"];var Kh=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Kh.store="targetDocuments",Kh.keyPath=["targetId","path"],Kh.documentTargetsIndex="documentTargetsIndex",Kh.documentTargetsKeyPath=["path","targetId"];var Hh=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Hh.key="targetGlobalKey",Hh.store="targetGlobal";var Gh=function(t,e){this.collectionId=t,this.parent=e};Gh.store="collectionParents",Gh.keyPath=["collectionId","parent"];var zh=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};zh.store="clientMetadata",zh.keyPath="clientId";var Wh=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Wh.store="bundles",Wh.keyPath="bundleId";var Qh=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Qh.store="namedQueries",Qh.keyPath="name";var Xh=en(en([],en(en([],en(en([],en(en([],[Mh.store,Fh.store,Uh.store,qh.store,$h.store,Lh.store,Hh.store,Kh.store]),[zh.store])),[Bh.store])),[Gh.store])),[Wh.store,Qh.store]),Yh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jh=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Zh=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},tl=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&ga(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),el=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Zh,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new il(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=cl(e.target.error);n.ft.reject(new il(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new il(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(fa("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new sl(e)},t}(),nl=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(sn())&&pa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return fa("SimpleDb","Removing database:",t),al(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=sn(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Ye(this,void 0,void 0,(function(){var e,n=this;return Je(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(fa("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new il(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new ca(ua.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new il(t,n))},i.onupgradeneeded=function(t){fa("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){fa("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Ye(this,void 0,void 0,(function(){var i,o,s,a,u;return Je(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,h;return Je(this,(function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=l.sent(),e=el.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),tl.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(l.sent(),s),u)];case 4:return c=l.sent(),h="FirebaseError"!==c.name&&o<3,fa("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),a.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),rl=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return al(this.Pt.delete())},t}(),il=function(t){function e(e,n){var r=this;return(r=t.call(this,ua.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Qe(e,t),e}(ca);function ol(t){return"IndexedDbTransactionError"===t.name}var sl=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(fa("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(fa("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),al(n)},t.prototype.add=function(t){return fa("SimpleDb","ADD",this.store.name,t,t),al(this.store.add(t))},t.prototype.get=function(t){var e=this;return al(this.store.get(t)).next((function(n){return void 0===n&&(n=null),fa("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return fa("SimpleDb","DELETE",this.store.name,t),al(this.store.delete(t))},t.prototype.count=function(){return fa("SimpleDb","COUNT",this.store.name),al(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){fa("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new tl((function(n,r){e.onerror=function(t){var e=cl(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new tl((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new rl(i),s=e(i.primaryKey,i.value,o);if(s instanceof tl){var a=s.catch((function(t){return o.done(),tl.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return tl.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function al(t){return new tl((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=cl(t.target.error);n(e)}}))}var ul=!1;function cl(t){var e=nl._t(sn());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ca("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ul||(ul=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var hl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Qe(e,t),e}(Jh);function ll(t,e){var n=ya(t);return nl.It(n.Mt,e)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var fl=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&fc(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&pc(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&pc(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Sa.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Vc())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Ia(this.mutations,t.mutations,(function(t,e){return vc(t,e)}))&&Ia(this.baseMutations,t.baseMutations,(function(t,e){return vc(t,e)}))},t}(),pl=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){ma(e.mutations.length===r.length);for(var i=Uc,o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),dl=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Sa.min()),void 0===o&&(o=Sa.min()),void 0===s&&(s=Pa.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),vl=function(t){this.Lt=t};function gl(t,e){if(e.document)return function(t,e,n){var r=uh(t,e.name),i=ih(e.updateTime),o=new su({mapValue:{fields:e.fields}}),s=uu.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ha.fromSegments(e.noDocument.path),r=_l(e.noDocument.readTime),i=uu.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Ha.fromSegments(e.unknownDocument.path);return r=_l(e.unknownDocument.version),uu.newUnknownDocument(o,r)}return ga()}function ml(t,e,n){var r=yl(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:ah(t,e.key),fields:e.data.value.mapValue.fields,updateTime:eh(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new qh(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=wl(e.version);return s=e.hasCommittedMutations,new qh(null,new jh(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=wl(e.version);return new qh(new Vh(c,h),null,null,!0,r,i)}return ga()}function yl(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function bl(t){var e=new Ea(t[0],t[1]);return Sa.fromTimestamp(e)}function wl(t){var e=t.toTimestamp();return new Ph(e.seconds,e.nanoseconds)}function _l(t){var e=new Ea(t.seconds,t.nanoseconds);return Sa.fromTimestamp(e)}function Il(t,e){for(var n=(e.baseMutations||[]).map((function(e){return vh(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return vh(t.Lt,e)})),a=Ea.fromMillis(e.localWriteTimeMs);return new fl(e.batchId,a,n,s)}function Tl(t){var e,n,r=_l(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?_l(t.lastLimboFreeSnapshotVersion):Sa.min();return void 0!==t.query.documents?(ma(1===(n=t.query).documents.length),e=Uu(Ru(hh(n.documents[0])))):e=function(t){return Uu(yh(t))}(t.query),new dl(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Pa.fromBase64String(t.resumeToken))}function El(t,e){var n,r=wl(e.snapshotVersion),i=wl(e.lastLimboFreeSnapshotVersion);n=pu(e.target)?gh(t.Lt,e.target):mh(t.Lt,e.target);var o=e.resumeToken.toBase64();return new $h(e.targetId,lu(e.target),r,o,e.sequenceNumber,i,n)}function Sl(t){var e=yh({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ju(e,e.limit,"L"):e}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Al=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return kl(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:_l(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return kl(t).put({bundleId:(n=e).id,createTime:wl(ih(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Nl(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Sl(e.bundledQuery),readTime:_l(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Nl(t).put(function(t){return{name:t.name,readTime:wl(ih(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function kl(t){return ll(t,Wh.store)}function Nl(t){return ll(t,Qh.store)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Cl=function(){function t(){this.Bt=new Dl}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),tl.resolve()},t.prototype.getCollectionParents=function(t,e){return tl.resolve(this.Bt.getEntries(e))},t}(),Dl=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new xc(Da.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new xc(Da.comparator)).toArray()},t}(),Rl=function(){function t(){this.qt=new Dl}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Dh(i)};return xl(t).put(o)}return tl.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Ta(e),""],!1,!0);return xl(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Oh(o.parent))}return n}))},t}();function xl(t){return ll(t,Gh.store)}
/**
     * @license
     * Copyright 2018 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Ol={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Pl=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ll(t,e,n){var r=t.store(Fh.store),i=t.store(Uh.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){ma(1===a)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=Uh.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return tl.waitFor(o).next((function(){return c}))}function Ml(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ga();e=t.noDocument}return JSON.stringify(e).length}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */Pl.DEFAULT_COLLECTION_PERCENTILE=10,Pl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pl.DEFAULT=new Pl(41943040,Pl.DEFAULT_COLLECTION_PERCENTILE,Pl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pl.DISABLED=new Pl(-1,0,0);var Fl=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return ma(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jl(t).$t({index:Fh.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Vl(t),s=jl(t);return s.add({}).next((function(a){ma("number"==typeof a);for(var u=new fl(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return dh(t.Lt,e)})),i=n.mutations.map((function(e){return dh(t.Lt,e)}));return new Fh(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new xc((function(t,e){return _a(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Uh.key(i.userId,d.key.path,a);l=l.add(d.key.path.popLast()),h.push(s.put(c)),h.push(o.put(v,Uh.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),tl.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return jl(t).get(e).next((function(t){return t?(ma(t.userId===n.userId),Il(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?tl.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return jl(t).$t({index:Fh.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(ma(e.batchId>=r),o=Il(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return jl(t).$t({index:Fh.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jl(t).Nt(Fh.userMutationsIndex,n).next((function(t){return t.map((function(t){return Il(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Uh.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Vl(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=Oh(u);if(a===n.userId&&e.path.isEqual(h))return jl(t).get(c).next((function(t){if(!t)throw ga();ma(t.userId===n.userId),o.push(Il(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new xc(_a),i=[];return e.forEach((function(e){var o=Uh.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Vl(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Oh(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),tl.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Uh.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new xc(_a);return Vl(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=Oh(u);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(jl(t).get(e).next((function(t){if(null===t)throw ga();ma(t.userId===n.userId),r.push(Il(n.R,t))})))})),tl.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Ll(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),tl.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return tl.resolve();var r=IDBKeyRange.lowerBound(Uh.prefixForUser(e.userId)),i=[];return Vl(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Oh(t[1]);i.push(o)}else r.done()})).next((function(){ma(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Ul(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return ql(t).get(this.userId).next((function(t){return t||new Mh(e.userId,-1,"")}))},t}();function Ul(t,e,n){var r=Uh.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Vl(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function jl(t){return ll(t,Fh.store)}function Vl(t){return ll(t,Uh.store)}function ql(t){return ll(t,Mh.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Bl=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),$l=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Bl(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Sa.fromTimestamp(new Ea(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Kl(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return ma(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Kl(t).$t((function(s,a){var u=Tl(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return tl.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Kl(t).$t((function(t,n){var r=Tl(n);e(r)}))},t.prototype.Xt=function(t){return Hl(t).get(Hh.key).next((function(t){return ma(null!==t),t}))},t.prototype.Zt=function(t,e){return Hl(t).put(Hh.key,e)},t.prototype.te=function(t,e){return Kl(t).put(El(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=lu(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Kl(t).$t({range:r,index:$h.queryTargetsIndexName},(function(t,n,r){var o=Tl(n);fu(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Gl(t);return e.forEach((function(e){var s=Dh(e.path);i.push(o.put(new Kh(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),tl.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Gl(t);return tl.forEach(e,(function(e){var o=Dh(e.path);return tl.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Gl(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Gl(t),i=Vc();return r.$t({range:n,kt:!0},(function(t,e,n){var r=Oh(t[1]),o=new Ha(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Dh(e.path),r=IDBKeyRange.bound([n],[Ta(n)],!1,!0),i=0;return Gl(t).$t({index:Kh.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Kl(t).get(e).next((function(t){return t?Tl(t):null}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Kl(t){return ll(t,$h.store)}function Hl(t){return ll(t,Hh.store)}function Gl(t){return ll(t,Kh.store)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function zl(t){return Ye(this,void 0,void 0,(function(){return Je(this,(function(e){if(t.code!==ua.FAILED_PRECONDITION||t.message!==Yh)throw t;return fa("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Wl(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=_a(n,i);return 0===s?_a(r,o):s}var Ql=function(){function t(t){this.ne=t,this.buffer=new xc(Wl),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Wl(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Xl=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;fa("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Ye(e,void 0,void 0,(function(){var e;return Je(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ol(e=n.sent())?(fa("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,zl(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Yl=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return tl.resolve(aa.o);var r=new Ql(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(fa("LruGarbageCollector","Garbage collection skipped; disabled"),tl.resolve(Ol)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(fa("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Ol):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(fa("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),la()<=Tn.DEBUG&&fa("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),tl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Jl=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Yl(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Zl(t,n)},t.prototype.removeReference=function(t,e,n){return Zl(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Zl(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return ql(t).Ot((function(r){return Ul(t,r,e).next((function(t){return t&&(n=!0),tl.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),Gl(t).delete([0,Dh(s.path)])}))}));i.push(u)}})).next((function(){return tl.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Zl(t,e)},t.prototype.we=function(t,e){var n,r=Gl(t),i=aa.o;return r.$t({index:Kh.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==aa.o&&e(new Ha(Oh(n)),i),i=a,n=s):i=aa.o})).next((function(){i!==aa.o&&e(new Ha(Oh(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Zl(t,e){return Gl(t).put(function(t,e){return new Kh(0,Dh(t.path),e)}(e,t.currentSequenceNumber))}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var tf=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ka(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return Na(this.inner)},t}(),ef=function(){function t(){this.changes=new tf((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Sa.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:uu.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?tl.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),nf=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return sf(t).put(af(e),n)},t.prototype.removeEntry=function(t,e){var n=sf(t),r=af(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return sf(t).get(af(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return sf(t).get(af(e)).next((function(t){return{document:n.ye(e,t),size:Ml(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Lc();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Lc(),i=new Cc(Ha.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Ml(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return tl.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return sf(t).$t({range:r},(function(t,e,r){for(var s=Ha.fromSegments(t);o&&Ha.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Lc(),o=e.path.length+1,s={};if(n.isEqual(Sa.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=yl(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=qh.collectionReadTimeIndex}return sf(t).$t(s,(function(t,n,s){if(t.length===o){var a=gl(r.R,n);e.path.isPrefixOf(a.key.path)?$u(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new rf(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return of(t).get(Bh.key).next((function(t){return ma(!!t),t}))},t.prototype.me=function(t,e){return of(t).put(Bh.key,e)},t.prototype.ye=function(t,e){if(e){var n=gl(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Sa.min()))return n}return uu.newInvalidDocument(t)},t}(),rf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new tf((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Qe(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new xc((function(t,e){return _a(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=ml(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Ml(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var h=ml(e.Ie.R,uu.newNoDocument(o,Sa.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),tl.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(ef);
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function of(t){return ll(t,Bh.store)}function sf(t){return ll(t,qh.store)}function af(t){return t.path.toArray()}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var uf=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;ma(n<r&&n>=0&&r<=11);var o=new el("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Lh.store)}(t),function(t){t.createObjectStore(Mh.store,{keyPath:Mh.keyPath}),t.createObjectStore(Fh.store,{keyPath:Fh.keyPath,autoIncrement:!0}).createIndex(Fh.userMutationsIndex,Fh.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Uh.store)}(t),cf(t),function(t){t.createObjectStore(qh.store)}(t));var s=tl.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Kh.store),t.deleteObjectStore($h.store),t.deleteObjectStore(Hh.store)}(t),cf(t)),s=s.next((function(){return function(t){var e=t.store(Hh.store),n=new Hh(0,0,Sa.min().toTimestamp(),0);return e.put(Hh.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Fh.store).Nt().next((function(n){t.deleteObjectStore(Fh.store),t.createObjectStore(Fh.store,{keyPath:Fh.keyPath,autoIncrement:!0}).createIndex(Fh.userMutationsIndex,Fh.userMutationsKeyPath,{unique:!0});var r=e.store(Fh.store),i=n.map((function(t){return r.put(t)}));return tl.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(zh.store,{keyPath:zh.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Bh.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(qh.store);e.createIndex(qh.readTimeIndex,qh.readTimeIndexPath,{unique:!1}),e.createIndex(qh.collectionReadTimeIndex,qh.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Wh.store,{keyPath:Wh.keyPath})}(t),function(t){t.createObjectStore(Qh.store,{keyPath:Qh.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(qh.store).$t((function(t,n){e+=Ml(n)})).next((function(){var n=new Bh(e);return t.store(Bh.store).put(Bh.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Mh.store),r=t.store(Fh.store);return n.Nt().next((function(n){return tl.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Fh.userMutationsIndex,i).next((function(r){return tl.forEach(r,(function(r){ma(r.userId===n.userId);var i=Il(e.R,r);return Ll(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Kh.store),n=t.store(qh.store);return t.store(Hh.store).get(Hh.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Da(n),s=function(t){return[0,Dh(t)]}(o);r.push(e.get(s).next((function(n){return n?tl.resolve():function(n){return e.put(new Kh(0,Dh(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return tl.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Gh.store,{keyPath:Gh.keyPath});var n=e.store(Gh.store),r=new Dl,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Dh(i)})}};return e.store(qh.store).$t({kt:!0},(function(t,e){var n=new Da(t);return i(n.popLast())})).next((function(){return e.store(Uh.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Oh(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store($h.store);return n.$t((function(t,r){var i=Tl(r),o=El(e.R,i);return n.put(o)}))},t}();function cf(t){t.createObjectStore(Kh.store,{keyPath:Kh.keyPath}).createIndex(Kh.documentTargetsIndex,Kh.documentTargetsKeyPath,{unique:!0}),t.createObjectStore($h.store,{keyPath:$h.keyPath}).createIndex($h.queryTargetsIndexName,$h.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Hh.store)}var hf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",lf=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new ca(ua.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Jl(this,i),this.Le=n+"main",this.R=new vl(u),this.Be=new nl(this.Le,11,new uf(this.R)),this.qe=new $l(this.referenceDelegate,this.R),this.Ut=new Rl,this.Ue=function(t,e){return new nf(t,e)}(this.R,this.Ut),this.Ke=new Al,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&pa("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ca(ua.FAILED_PRECONDITION,hf);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new aa(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Ye(e,void 0,void 0,(function(){return Je(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Ye(e,void 0,void 0,(function(){return Je(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Ye(e,void 0,void 0,(function(){return Je(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return pf(e).put(new zh(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(ol(e))return fa("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return fa("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return ff(t).get(Lh.key).next((function(t){return tl.resolve(e.tn(t))}))},t.prototype.en=function(t){return pf(t).delete(this.clientId)},t.prototype.nn=function(){return Ye(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Je(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=ll(t,zh.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return tl.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?tl.resolve(!0):ff(t).get(Lh.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new ca(ua.FAILED_PRECONDITION,hf);return!1}}return!(!e.networkEnabled||!e.inForeground)||pf(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&fa("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Ye(this,void 0,void 0,(function(){var t=this;return Je(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Lh.store,zh.store],(function(e){var n=new hl(e,aa.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return pf(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Fl.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;fa("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Xh,(function(o){return i=new hl(o,r.Ne?r.Ne.next():aa.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw pa("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new ca(ua.FAILED_PRECONDITION,Yh);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return ff(t).get(Lh.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ca(ua.FAILED_PRECONDITION,hf)}))},t.prototype.Ze=function(t){var e=new Lh(this.clientId,this.allowTabSynchronization,Date.now());return ff(t).put(Lh.key,e)},t.yt=function(){return nl.yt()},t.prototype.Xe=function(t){var e=this,n=ff(t);return n.get(Lh.key).next((function(t){return e.tn(t)?(fa("IndexedDbPersistence","Releasing primary lease."),n.delete(Lh.key)):tl.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(pa("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),!an()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return fa("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return pa("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){pa("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function ff(t){return ll(t,Lh.store)}function pf(t){return ll(t,zh.store)}function df(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var vf=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Ha.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Mu(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Ha(e)).next((function(t){var e=Fc();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Fc();return this.Ut.getCollectionParents(t,i).next((function(s){return tl.forEach(s,(function(s){var a=function(t,e){return new Cu(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c);null==h&&(h=uu.newInvalidDocument(c),r=r.insert(c,h)),pc(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){$u(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Vc(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof yc&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),gf=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Vc(),i=Vc(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),mf=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Sa.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var s=i.Cn(e,o);return(xu(e)||Ou(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(la()<=Tn.DEBUG&&fa("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Bu(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new xc(Ku(t));return e.forEach((function(e,r){$u(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return la()<=Tn.DEBUG&&fa("QueryEngine","Using full collection scan to execute query:",Bu(e)),this.Sn.getDocumentsMatchingQuery(t,e,Sa.min())},t}(),yf=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Cc(_a),this.kn=new tf((function(t){return lu(t)}),fu),this.$n=Sa.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new vf(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function bf(t,e,n,r){return new yf(t,e,n,r)}function wf(t,e){return Ye(this,void 0,void 0,(function(){var n,r,i,o;return Je(this,(function(s){switch(s.label){case 0:return n=ya(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new vf(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=Vc(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];s=s.add(y.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function _f(t,e){var n=ya(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=tl.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);ma(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function If(t){var e=ya(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Tf(t,e){var n=ya(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return ma(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=Lc();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(function(t,e,n,r,i){var o=Vc();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Lc();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Sa.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):fa("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(Sa.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return tl.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function Ef(t,e){var n=ya(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Sf(t,e){var n=ya(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,tl.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new dl(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Af(t,e,n){return Ye(this,void 0,void 0,(function(){var r,i,o,s;return Je(this,(function(a){switch(a.label){case 0:r=ya(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!ol(s=a.sent()))throw s;return fa("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function kf(t,e,n){var r=ya(t),i=Sa.min(),o=Vc();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=ya(t),i=r.kn.get(n);return void 0!==i?tl.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Uu(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Sa.min(),n?o:Vc())})).next((function(t){return{documents:t,Bn:o}}))}))}function Nf(t,e){var n=ya(t),r=ya(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Cf(t){var e=ya(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=ya(t),i=Lc(),o=yl(n),s=sf(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:qh.readTimeIndex,range:a},(function(t,e){var n=gl(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:bl(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Df(t){return Ye(this,void 0,void 0,(function(){var e;return Je(this,(function(n){return[2,(e=ya(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=sf(t),n=Sa.min();return e.$t({index:qh.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=bl(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Rf=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return tl.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:ih(n.createTime)}),tl.resolve()},t.prototype.getNamedQuery=function(t,e){return tl.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Sl(t.bundledQuery),readTime:ih(t.readTime)}}(e)),tl.resolve()},t}(),xf=function(){function t(){this.Wn=new xc(Of.Gn),this.zn=new xc(Of.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Of(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Of(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Ha(new Da([])),r=new Of(n,t),i=new Of(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Ha(new Da([])),n=new Of(e,t),r=new Of(e,t+1),i=Vc();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Of(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Of=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Ha.comparator(t.key,e.key)||_a(t.ns,e.ns)},t.Hn=function(t,e){return _a(t.ns,e.ns)||Ha.comparator(t.key,e.key)},t}(),Pf=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new xc(Of.Gn)}return t.prototype.checkEmpty=function(t){return tl.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new fl(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Of(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return tl.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return tl.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return tl.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return tl.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return tl.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Of(e,0),i=new Of(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),tl.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new xc(_a);return e.forEach((function(t){var e=new Of(t,0),i=new Of(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),tl.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Ha.isDocumentKey(i)||(i=i.child(""));var o=new Of(new Ha(i),0),s=new xc(_a);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),tl.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;ma(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return tl.forEach(e.mutations,(function(i){var o=new Of(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Of(e,0),r=this.rs.firstAfterOrEqual(n);return tl.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,tl.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Lf=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Cc(Ha.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return tl.resolve(n?n.document.clone():uu.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Lc();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():uu.newInvalidDocument(t))})),tl.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Lc(),i=new Ha(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(a.path))break;h.compareTo(n)<=0||$u(e,c)&&(r=r.insert(c.key,c.clone()))}return tl.resolve(r)},t.prototype.fs=function(t,e){return tl.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Mf(this)},t.prototype.getSize=function(t){return tl.resolve(this.size)},t}(),Mf=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Qe(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),tl.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ef),Ff=function(){function t(t){this.persistence=t,this.ds=new tf((function(t){return lu(t)}),fu),this.lastRemoteSnapshotVersion=Sa.min(),this.highestTargetId=0,this.ws=0,this._s=new xf,this.targetCount=0,this.ys=Bl.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),tl.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return tl.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return tl.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),tl.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),tl.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Bl(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,tl.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),tl.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,tl.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),tl.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return tl.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return tl.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),tl.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),tl.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),tl.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return tl.resolve(n)},t.prototype.containsKey=function(t,e){return tl.resolve(this._s.containsKey(e))},t}(),Uf=function(){function t(t,e){var n=this;this.gs={},this.Ne=new aa(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Ff(this),this.Ut=new Cl,this.Ue=function(t,e){return new Lf(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new vl(e),this.Ke=new Rf(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Pf(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;fa("MemoryPersistence","Starting transaction:",t);var i=new jf(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return tl.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),jf=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Qe(e,t),e}(Jh),Vf=function(){function t(t){this.persistence=t,this.As=new xf,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw ga()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),tl.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),tl.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),tl.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tl.forEach(this.vs,(function(r){var i=Ha.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return tl.or([function(){return tl.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),qf=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Bf(t,e){return"firestore_clients_"+t+"_"+e}function $f(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Kf(t,e){return"firestore_targets_"+t+"_"+e}qf.UNAUTHENTICATED=new qf(null),qf.GOOGLE_CREDENTIALS=new qf("google-credentials-uid"),qf.FIRST_PARTY=new qf("first-party-uid");var Hf=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new ca(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(pa("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Gf=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ca(i.error.code,i.error.message)),o?new t(e,i.state,r):(pa("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),zf=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Bc(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ka(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(pa("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Wf=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(pa("SharedClientState","Failed to parse online state: "+e),null)},t}(),Qf=function(){function t(){this.activeTargetIds=Bc()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Xf=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Cc(_a),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Bf(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Qf),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Ye(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,h,l=this;return Je(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Bf(this.persistenceKey,r)))&&(o=zf.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)h=c[u],this.Fs(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Kf(this.persistenceKey,t));if(n){var r=Gf.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Kf(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return fa("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){fa("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){fa("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(fa("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void pa("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Ye(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Je(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=aa.o;if(null!=t)try{var n=JSON.parse(t);ma("number"==typeof n),e=n}catch(t){pa("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==aa.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Hf(this.currentUser,t,e,n),i=$f(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=$f(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Kf(this.persistenceKey,t),i=new Gf(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return zf.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Hf.Vs(new qf(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Gf.Vs(r,e)},t.prototype.js=function(t){return Wf.Vs(t)},t.prototype.ii=function(t){return Ye(this,void 0,void 0,(function(){return Je(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(fa("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Bc();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Yf=function(){function t(){this.li=new Qf,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Qf,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Jf=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Zf=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){fa("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){fa("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),tp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ep=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),np=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Qe(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var s=new sa;s.listenOnce(ta.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Zs.NO_ERROR:var e=s.getResponseJson();fa("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Zs.TIMEOUT:fa("Connection",'RPC "'+t+'" timed out'),o(new ca(ua.DEADLINE_EXCEEDED,"Request time out"));break;case Zs.HTTP_ERROR:var n=s.getStatus();if(fa("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(ua).indexOf(e)>=0?e:ua.UNKNOWN}(r.status);o(new ca(a,r.message))}else o(new ca(ua.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ca(ua.UNAVAILABLE,"Connection failed."));break;default:ga()}}finally{fa("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new Ws,o=Vi(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new ia({})),this.Fi(s.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())||"object"==typeof navigator&&"ReactNative"===navigator.product||sn().indexOf("Electron/")>=0||function(){var t=sn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}()||sn().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(s.httpHeadersOverwriteParam="$httpHeaders");var a=r.join("");fa("Connection","Creating WebChannel: "+a,s);var u=i.createWebChannel(a,s),c=!1,h=!1,l=new ep({Ei:function(t){h?fa("Connection","Not sending because WebChannel is closed:",t):(c||(fa("Connection","Opening WebChannel transport."),u.open(),c=!0),fa("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,oa.EventType.OPEN,(function(){h||fa("Connection","WebChannel transport opened.")})),f(u,oa.EventType.CLOSE,(function(){h||(h=!0,fa("Connection","WebChannel transport closed"),l.Vi())})),f(u,oa.EventType.ERROR,(function(t){h||(h=!0,da("Connection","WebChannel transport errored:",t),l.Vi(new ca(ua.UNAVAILABLE,"The operation could not be completed")))})),f(u,oa.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];ma(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){fa("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Ic[t];if(void 0!==e)return Nc(e)}(o),a=i.message;void 0===s&&(s=ua.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,l.Vi(new ca(s,a)),u.close()}else fa("Connection","WebChannel received:",n),l.Si(n)}})),f(o,ea.STAT_EVENT,(function(t){t.stat===na?fa("Connection","Detected buffering proxy"):t.stat===ra&&fa("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);fa("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return fa("RestConnection","Received: ",t),t}),(function(e){throw da("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=tp[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rp(){return"undefined"!=typeof window?window:null}function ip(){return"undefined"!=typeof document?document:null}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function op(t){return new th(t,!0)}var sp=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&fa("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),ap=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new sp(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Ye(this,void 0,void 0,(function(){return Je(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Ye(this,void 0,void 0,(function(){return Je(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Ye(this,void 0,void 0,(function(){return Je(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===ua.RESOURCE_EXHAUSTED?(pa(e.toString()),pa("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===ua.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new ca(ua.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Ye(t,void 0,void 0,(function(){return Je(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return fa("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(fa("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),up=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Qe(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ga()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(ma(void 0===e||"string"==typeof e),Pa.fromBase64String(e||"")):(ma(void 0===e||e instanceof Uint8Array),Pa.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?ua.UNKNOWN:Nc(t.code);return new ca(e,t.message||"")}(a);n=new zc(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=uh(t,r.document.name),o=ih(r.document.updateTime);var a=new su({mapValue:{fields:r.document.fields}}),u=(s=uu.newFoundDocument(i,o,a),r.targetIds||[]),c=r.removedTargetIds||[];n=new Hc(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=uh(t,r.document),o=r.readTime?ih(r.readTime):Sa.min(),a=uu.newNoDocument(i,o),s=r.removedTargetIds||[],n=new Hc([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=uh(t,r.document),o=r.removedTargetIds||[],n=new Hc([],o,i,null);else{if(!("filter"in e))return ga();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new Ac(r),o=h.targetId,n=new Gc(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Sa.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Sa.min():e.readTime?ih(e.readTime):Sa.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=lh(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=pu(r)?{documents:gh(t,r)}:{query:mh(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=nh(t,e.resumeToken):e.snapshotVersion.compareTo(Sa.min())>0&&(n.readTime=eh(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ga()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=lh(this.R),e.removeTarget=t,this.cr(e)},e}(ap),cp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Qe(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(ma(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(ma(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?ih(t.updateTime):ih(e);return n.isEqual(Sa.min())&&(n=ih(e)),new uc(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=ih(t.commitTime);return this.listener.Tr(n,e)}return ma(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=lh(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return dh(e.R,t)}))};this.cr(n)},e}(ap),hp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Qe(e,t),e.prototype.br=function(){if(this.Rr)throw new ca(ua.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===ua.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new ca(ua.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===ua.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new ca(ua.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),lp=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(pa(e),this.Vr=!1):fa("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),fp=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Ye(o,void 0,void 0,(function(){return Je(this,(function(t){switch(t.label){case 0:return _p(this)?(fa("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Ye(this,void 0,void 0,(function(){var e;return Je(this,(function(n){switch(n.label){case 0:return(e=ya(t)).Or.add(4),[4,dp(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,pp(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new lp(n,r)};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function pp(t){return Ye(this,void 0,void 0,(function(){var e,n;return Je(this,(function(r){switch(r.label){case 0:if(!_p(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function dp(t){return Ye(this,void 0,void 0,(function(){var e,n;return Je(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function vp(t,e){var n=ya(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),wp(n)?bp(n):Mp(n).er()&&mp(n,e))}function gp(t,e){var n=ya(t),r=Mp(n);n.$r.delete(e),r.er()&&yp(n,e),0===n.$r.size&&(r.er()?r.ir():_p(n)&&n.Br.set("Unknown"))}function mp(t,e){t.qr.U(e.targetId),Mp(t).mr(e)}function yp(t,e){t.qr.U(e),Mp(t).yr(e)}function bp(t){t.qr=new Qc({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Mp(t).start(),t.Br.Sr()}function wp(t){return _p(t)&&!Mp(t).tr()&&t.$r.size>0}function _p(t){return 0===ya(t).Or.size}function Ip(t){t.qr=void 0}function Tp(t){return Ye(this,void 0,void 0,(function(){return Je(this,(function(e){return t.$r.forEach((function(e,n){mp(t,e)})),[2]}))}))}function Ep(t,e){return Ye(this,void 0,void 0,(function(){return Je(this,(function(n){return Ip(t),wp(t)?(t.Br.Nr(e),bp(t)):t.Br.set("Unknown"),[2]}))}))}function Sp(t,e,n){return Ye(this,void 0,void 0,(function(){var r,i,o;return Je(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof zc&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Ye(this,void 0,void 0,(function(){var n,r,i,o;return Je(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),fa("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Ap(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Hc?t.qr.X(e):e instanceof Gc?t.qr.rt(e):t.qr.et(e),n.isEqual(Sa.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,If(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Pa.EMPTY_BYTE_STRING,n.snapshotVersion)),yp(t,e);var r=new dl(n.target,e,1,n.sequenceNumber);mp(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return fa("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Ap(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Ap(t,e,n){return Ye(this,void 0,void 0,(function(){var r=this;return Je(this,(function(i){switch(i.label){case 0:if(!ol(e))throw e;return t.Or.add(1),[4,dp(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return If(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Ye(r,void 0,void 0,(function(){return Je(this,(function(e){switch(e.label){case 0:return fa("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,pp(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function kp(t,e){return e().catch((function(n){return Ap(t,n,e)}))}function Np(t){return Ye(this,void 0,void 0,(function(){var e,n,r,i,o;return Je(this,(function(s){switch(s.label){case 0:e=ya(t),n=Fp(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return _p(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Ef(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Fp(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Ap(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Cp(e)&&Dp(e),[2]}}))}))}function Cp(t){return _p(t)&&!Fp(t).tr()&&t.kr.length>0}function Dp(t){Fp(t).start()}function Rp(t){return Ye(this,void 0,void 0,(function(){return Je(this,(function(e){return Fp(t).Ar(),[2]}))}))}function xp(t){return Ye(this,void 0,void 0,(function(){var e,n,r,i;return Je(this,(function(o){for(e=Fp(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function Op(t,e,n){return Ye(this,void 0,void 0,(function(){var r,i;return Je(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=pl.from(r,e,n),[4,kp(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Np(t)];case 2:return o.sent(),[2]}}))}))}function Pp(t,e){return Ye(this,void 0,void 0,(function(){return Je(this,(function(n){switch(n.label){case 0:return e&&Fp(t).pr?[4,function(t,e){return Ye(this,void 0,void 0,(function(){var n,r;return Je(this,(function(i){switch(i.label){case 0:return kc(r=e.code)&&r!==ua.ABORTED?(n=t.kr.shift(),Fp(t).sr(),[4,kp(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Np(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Cp(t)&&Dp(t),[2]}}))}))}function Lp(t,e){return Ye(this,void 0,void 0,(function(){var n;return Je(this,(function(r){switch(r.label){case 0:return n=ya(t),e?(n.Or.delete(2),[4,pp(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,dp(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Mp(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=ya(t);return r.br(),new up(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Tp.bind(null,t),Ri:Ep.bind(null,t),_r:Sp.bind(null,t)}),t.Mr.push((function(n){return Ye(e,void 0,void 0,(function(){return Je(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),wp(t)?bp(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Ip(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function Fp(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=ya(t);return r.br(),new cp(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Rp.bind(null,t),Ri:Pp.bind(null,t),Ir:xp.bind(null,t),Tr:Op.bind(null,t)}),t.Mr.push((function(n){return Ye(e,void 0,void 0,(function(){return Je(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Np(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(fa("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Up=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Zh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ca(ua.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function jp(t,e){if(pa("AsyncQueue",e+": "+t),ol(t))return new ca(ua.UNAVAILABLE,e+": "+t);throw t}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Vp=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Ha.comparator(e.key,n.key)}:function(t,e){return Ha.comparator(t.key,e.key)},this.keyedMap=Fc(),this.sortedSet=new Cc(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),qp=function(){function t(){this.Qr=new Cc(Ha.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):ga():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Bp=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Vp.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Vu(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),$p=function(){this.Wr=void 0,this.listeners=[]},Kp=function(){this.queries=new tf((function(t){return qu(t)}),Vu),this.onlineState="Unknown",this.Gr=new Set};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Hp(t,e){return Ye(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Je(this,(function(c){switch(c.label){case 0:if(n=ya(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new $p),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=jp(a,"Initialization of query '"+Bu(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Qp(n),[2]}}))}))}function Gp(t,e){return Ye(this,void 0,void 0,(function(){var n,r,i,o,s;return Je(this,(function(a){return n=ya(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function zp(t,e){for(var n=ya(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(s)&&(r=!0);u.Wr=s}}r&&Qp(n)}function Wp(t,e,n){var r=ya(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Qp(t){t.Gr.forEach((function(t){t.next()}))}var Xp=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Bp(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Bp.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Yp=function(t){this.key=t},Jp=function(t){this.key=t},Zp=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Vc(),this.mutatedKeys=Vc(),this.lo=Ku(t),this.fo=new Vp(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new qp,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=xu(this.query)&&i.size===this.query.limit?i.last():null,c=Ou(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=$u(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data.isEqual(l.data)?f!==p&&(r.track({type:3,doc:l}),d=!0):n.yo(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(l?(s=s.add(l),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),xu(this.query)||Ou(this.query))for(;s.size>this.query.limit;){var h=xu(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ga()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Bp(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new qp,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Vc(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Jp(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Yp(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Vc();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Bp.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),td=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ed=function(t){this.key=t,this.bo=!1},nd=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new tf((function(t){return qu(t)}),Vu),this.Vo=new Map,this.So=new Set,this.Do=new Cc(Ha.comparator),this.Co=new Map,this.No=new xf,this.xo={},this.Fo=new Map,this.ko=Bl.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function rd(t,e){return Ye(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Je(this,(function(u){switch(u.label){case 0:return n=xd(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Sf(n.localStore,Uu(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,id(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&vp(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function id(t,e,n,r){return Ye(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Je(this,(function(h){switch(h.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Ye(this,void 0,void 0,(function(){var i,o,s;return Je(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,kf(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(md(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,kf(t.localStore,e,!0)];case 1:return i=h.sent(),o=new Zp(e,i.Bn),s=o._o(i.documents),a=Kc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),md(t,n,u.To),c=new td(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function od(t,e){return Ye(this,void 0,void 0,(function(){var n,r,i;return Je(this,(function(o){switch(o.label){case 0:return n=ya(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Vu(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Af(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),gp(n.remoteStore,r.targetId),vd(n,r.targetId)})).catch(zl)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return vd(n,r.targetId),[4,Af(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function sd(t,e,n){return Ye(this,void 0,void 0,(function(){var r,i,o,s;return Je(this,(function(a){switch(a.label){case 0:r=Od(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=ya(t),i=Ea.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Vc());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=dc(c,n.get(c.key));null!=h&&s.push(new yc(c.key,h,au(h.value.mapValue),cc.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Cc(_a)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,wd(r,i.changes)];case 3:return a.sent(),[4,Np(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=jp(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function ad(t,e){return Ye(this,void 0,void 0,(function(){var n,r;return Je(this,(function(i){switch(i.label){case 0:n=ya(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Tf(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(ma(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?ma(r.bo):t.removedDocuments.size>0&&(ma(r.bo),r.bo=!1))})),[4,wd(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,zl(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function ud(t,e,n){var r=ya(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=ya(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Qp(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cd(t,e,n){return Ye(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Je(this,(function(c){switch(c.label){case 0:return(r=ya(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Cc(Ha.comparator)).insert(o,uu.newNoDocument(o,Sa.min())),a=Vc().add(o),u=new $c(Sa.min(),new Map,new xc(_a),s,a),[4,ad(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),bd(r),[3,4];case 2:return[4,Af(r.localStore,e,!1).then((function(){return vd(r,e,n)})).catch(zl)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function hd(t,e){return Ye(this,void 0,void 0,(function(){var n,r,i;return Je(this,(function(o){switch(o.label){case 0:n=ya(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,_f(n.localStore,e)];case 2:return i=o.sent(),dd(n,r,null),pd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,wd(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,zl(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function ld(t,e,n){return Ye(this,void 0,void 0,(function(){var r,i;return Je(this,(function(o){switch(o.label){case 0:r=ya(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ya(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return ma(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),dd(r,e,n),pd(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,wd(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,zl(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function fd(t,e){return Ye(this,void 0,void 0,(function(){var n,r,i,o,s;return Je(this,(function(a){switch(a.label){case 0:_p((n=ya(t)).remoteStore)||fa("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=ya(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=jp(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function pd(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function dd(t,e,n){var r=ya(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function vd(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||gd(t,e)}))}function gd(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(gp(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),bd(t))}function md(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Yp?(t.No.addReference(o.key,e),yd(t,o)):o instanceof Jp?(fa("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||gd(t,o.key)):ga()}}function yd(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(fa("SyncEngine","New document in limbo: "+n),t.So.add(r),bd(t))}function bd(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Ha(Da.fromString(e)),r=t.ko.next();t.Co.set(r,new ed(n)),t.Do=t.Do.insert(n,r),vp(t.remoteStore,new dl(Uu(Ru(n.path)),r,2,aa.o))}}function wd(t,e,n){return Ye(this,void 0,void 0,(function(){var r,i,o,s;return Je(this,(function(a){switch(a.label){case 0:return r=ya(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=gf.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Ye(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h;return Je(this,(function(l){switch(l.label){case 0:n=ya(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return tl.forEach(e,(function(e){return tl.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return tl.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!ol(r=l.sent()))throw r;return fa("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Fn.get(a),c=u.snapshotVersion,h=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(a,h));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function _d(t,e){return Ye(this,void 0,void 0,(function(){var n,r;return Je(this,(function(i){switch(i.label){case 0:return(n=ya(t)).currentUser.isEqual(e)?[3,3]:(fa("SyncEngine","User change. New user:",e.toKey()),[4,wf(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new ca(ua.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,wd(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Id(t,e){var n=ya(t),r=n.Co.get(e);if(r&&r.bo)return Vc().add(r.key);var i=Vc(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Td(t,e){return Ye(this,void 0,void 0,(function(){var n,r,i;return Je(this,(function(o){switch(o.label){case 0:return[4,kf((n=ya(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&md(n,e.targetId,i.To),i)]}}))}))}function Ed(t){return Ye(this,void 0,void 0,(function(){var e;return Je(this,(function(n){return[2,Cf((e=ya(t)).localStore).then((function(t){return wd(e,t)}))]}))}))}function Sd(t,e,n,r){return Ye(this,void 0,void 0,(function(){var i,o;return Je(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=ya(t),r=ya(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):tl.resolve(null)}))}))}((i=ya(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Np(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(dd(i,e,r||null),pd(i,e),function(t,e){ya(ya(t)._n).Gt(e)}(i.localStore,e)):ga(),s.label=4;case 4:return[4,wd(i,o)];case 5:return s.sent(),[3,7];case 6:fa("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Ad(t,e){return Ye(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Je(this,(function(h){switch(h.label){case 0:return xd(n=ya(t)),Od(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,kd(n,r.toArray())]);case 1:return i=h.sent(),n.$o=!0,[4,Lp(n.remoteStore,!0)];case 2:for(h.sent(),o=0,s=i;o<s.length;o++)a=s[o],vp(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return vd(n,e),Af(n.localStore,e,!0)})),gp(n.remoteStore,e)})),[4,c]);case 4:return h.sent(),[4,kd(n,u)];case 5:return h.sent(),function(t){var e=ya(t);e.Co.forEach((function(t,n){gp(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Cc(Ha.comparator)}(n),n.$o=!1,[4,Lp(n.remoteStore,!1)];case 6:h.sent(),h.label=7;case 7:return[2]}}))}))}function kd(t,e,n){return Ye(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v;return Je(this,(function(g){switch(g.label){case 0:n=ya(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,Sf(n.localStore,Uu(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),h=0,l=c,g.label=3;case 3:return h<l.length?(f=l[h],p=n.Po.get(f),[4,Td(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Nf(n.localStore,a)];case 8:return v=g.sent(),[4,Sf(n.localStore,v)];case 9:return u=g.sent(),[4,id(n,Nd(v),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Nd(t){return Du(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Cd(t){var e=ya(t);return ya(ya(e.localStore).persistence).fn()}function Dd(t,e,n,r){return Ye(this,void 0,void 0,(function(){var i,o,s;return Je(this,(function(a){switch(a.label){case 0:return(i=ya(t)).$o?(fa("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Cf(i.localStore)];case 3:return o=a.sent(),s=$c.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,wd(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Af(i.localStore,e,!0)];case 6:return a.sent(),vd(i,e,r),[3,8];case 7:ga(),a.label=8;case 8:return[2]}}))}))}function Rd(t,e,n){return Ye(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,h,l,f;return Je(this,(function(p){switch(p.label){case 0:if(!(r=xd(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(fa("SyncEngine","Adding an already active target "+s),[3,5]):[4,Nf(r.localStore,s)]):[3,6];case 2:return a=p.sent(),[4,Sf(r.localStore,a)];case 3:return u=p.sent(),[4,id(r,Nd(a),u.targetId,!1)];case 4:p.sent(),vp(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Je(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Af(r.localStore,t,!1).then((function(){gp(r.remoteStore,t),vd(r,t)})).catch(zl)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,l=n,p.label=7;case 7:return h<l.length?(f=l[h],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function xd(t){var e=ya(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ad.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Id.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cd.bind(null,e),e.vo._r=zp.bind(null,e.eventManager),e.vo.Mo=Wp.bind(null,e.eventManager),e}function Od(t){var e=ya(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hd.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ld.bind(null,e),e}var Pd=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Ye(this,void 0,void 0,(function(){return Je(this,(function(e){switch(e.label){case 0:return this.R=op(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return bf(this.persistence,new mf,t.initialUser,this.R)},t.prototype.qo=function(t){return new Uf(Vf.bs,this.R)},t.prototype.Bo=function(t){return new Yf},t.prototype.terminate=function(){return Ye(this,void 0,void 0,(function(){return Je(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Ld=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Qe(e,t),e.prototype.initialize=function(e){return Ye(this,void 0,void 0,(function(){return Je(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Df(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,Od(this.Qo.syncEngine)];case 4:return n.sent(),[4,Np(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return bf(this.persistence,new mf,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Xl(e,t.asyncQueue)},e.prototype.qo=function(t){var e=df(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Pl.withCacheSize(this.cacheSizeBytes):Pl.DEFAULT;return new lf(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,rp(),ip(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Yf},e}(Pd),Md=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Qe(e,t),e.prototype.initialize=function(e){return Ye(this,void 0,void 0,(function(){var n,r=this;return Je(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Xf?(this.sharedClientState.syncEngine={ui:Sd.bind(null,n),ai:Dd.bind(null,n),hi:Rd.bind(null,n),fn:Cd.bind(null,n),ci:Ed.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return Ye(r,void 0,void 0,(function(){return Je(this,(function(e){switch(e.label){case 0:return[4,Ad(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=rp();if(!Xf.yt(e))throw new ca(ua.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=df(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Xf(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Ld),Fd=function(){function t(){}return t.prototype.initialize=function(t,e){return Ye(this,void 0,void 0,(function(){var n=this;return Je(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return ud(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=_d.bind(null,this.syncEngine),[4,Lp(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Kp},t.prototype.createDatastore=function(t){var e,n=op(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new np(e));return function(t,e,n){return new hp(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return ud(s.syncEngine,t,0)},o=Zf.yt()?new Zf:new Jf,new fp(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new nd(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Ye(this,void 0,void 0,(function(){var e;return Je(this,(function(n){switch(n.label){case 0:return e=ya(t),fa("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,dp(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),Ud=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),jd=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Ye(this,void 0,void 0,(function(){var e,n=this;return Je(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new ca(ua.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Ye(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Je(this,(function(u){switch(u.label){case 0:return n=ya(t),r=lh(n.R)+"/documents",i={documents:e.map((function(t){return ah(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){ma(!!e.found),e.found.name,e.found.updateTime;var n=uh(t,e.found.name),r=ih(e.found.updateTime),i=new su({mapValue:{fields:e.found.fields}});return uu.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){ma(!!e.missing),ma(!!e.readTime);var n=uh(t,e.missing),r=ih(e.readTime);return uu.newNoDocument(n,r)}(t,e):ga()}(n.R,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());ma(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ec(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Ye(this,void 0,void 0,(function(){var t,e=this;return Je(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Ha.fromPath(n);e.mutations.push(new Sc(r,e.precondition(r)))})),[4,function(t,e){return Ye(this,void 0,void 0,(function(){var n,r,i;return Je(this,(function(o){switch(o.label){case 0:return n=ya(t),r=lh(n.R)+"/documents",i={writes:e.map((function(t){return dh(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ga();e=Sa.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ca(ua.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?cc.updateTime(e):cc.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Sa.min()))throw new ca(ua.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cc.updateTime(e)}return cc.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),Vd=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new sp(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Ye(t,void 0,void 0,(function(){var t,e,n=this;return Je(this,(function(r){return t=new jd(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Ba(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!kc(e)}return!1},t}(),qd=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=qf.UNAUTHENTICATED,this.clientId=wa.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Ye(r,void 0,void 0,(function(){return Je(this,(function(e){switch(e.label){case 0:return fa("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return Ye(this,void 0,void 0,(function(){return Je(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new ca(ua.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Zh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Ye(t,void 0,void 0,(function(){var t,n;return Je(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=jp(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function Bd(t,e){return Ye(this,void 0,void 0,(function(){var n,r,i=this;return Je(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),fa("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return Ye(i,void 0,void 0,(function(){return Je(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,wf(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function $d(t,e){return Ye(this,void 0,void 0,(function(){var n,r;return Je(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Kd(t)];case 1:return n=i.sent(),fa("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Ye(this,void 0,void 0,(function(){var n,r;return Je(this,(function(i){switch(i.label){case 0:return(n=ya(t)).asyncQueue.verifyOperationInProgress(),fa("RemoteStore","RemoteStore received new credentials"),r=_p(n),n.Or.add(3),[4,dp(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,pp(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function Kd(t){return Ye(this,void 0,void 0,(function(){return Je(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(fa("FirestoreClient","Using default OfflineComponentProvider"),[4,Bd(t,new Pd)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Hd(t){return Ye(this,void 0,void 0,(function(){return Je(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(fa("FirestoreClient","Using default OnlineComponentProvider"),[4,$d(t,new Fd)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Gd(t){return Kd(t).then((function(t){return t.persistence}))}function zd(t){return Kd(t).then((function(t){return t.localStore}))}function Wd(t){return Hd(t).then((function(t){return t.remoteStore}))}function Qd(t){return Hd(t).then((function(t){return t.syncEngine}))}function Xd(t){return Ye(this,void 0,void 0,(function(){var e,n;return Je(this,(function(r){switch(r.label){case 0:return[4,Hd(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=rd.bind(null,e.syncEngine),n.onUnlisten=od.bind(null,e.syncEngine),n)]}}))}))}function Yd(t,e,n){var r=this;void 0===n&&(n={});var i=new Zh;return t.asyncQueue.enqueueAndForget((function(){return Ye(r,void 0,void 0,(function(){var r;return Je(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ud({next:function(o){e.enqueueAndForget((function(){return Gp(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new ca(ua.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new ca(ua.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Xp(Ru(n.path),o,{includeMetadataChanges:!0,so:!0});return Hp(t,s)},[4,Xd(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Jd(t,e,n){var r=this;void 0===n&&(n={});var i=new Zh;return t.asyncQueue.enqueueAndForget((function(){return Ye(r,void 0,void 0,(function(){var r;return Je(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ud({next:function(n){e.enqueueAndForget((function(){return Gp(t,s)})),n.fromCache&&"server"===r.source?i.reject(new ca(ua.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Xp(n,o,{includeMetadataChanges:!0,so:!0});return Hp(t,s)},[4,Xd(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Zd=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},tv=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),ev=new Map,nv=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},rv=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(qf.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),iv=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ov=function(){function t(t){var e=this;this.currentUser=qf.UNAUTHENTICATED,this.oc=new Zh,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){fa("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(fa("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(fa("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ma("string"==typeof n.accessToken),new nv(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return Ye(n,void 0,void 0,(function(){return Je(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return ma(null===t||"string"==typeof t),new qf(t)},t}(),sv=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=qf.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),av=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new sv(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(qf.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function uv(t,e,n){if(!n)throw new ca(ua.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function cv(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ca(ua.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function hv(t,e,n,r){if(!0===e&&!0===r)throw new ca(ua.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function lv(t){if(!Ha.isDocumentKey(t))throw new ca(ua.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function fv(t){if(Ha.isDocumentKey(t))throw new ca(ua.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function pv(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ga()}function dv(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ca(ua.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=pv(t);throw new ca(ua.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function vv(t,e){if(e<=0)throw new ca(ua.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var gv=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ca(ua.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ca(ua.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,hv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),mv=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gv({}),this._settingsFrozen=!1,t instanceof tv?(this._databaseId=t,this._credentials=new rv):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ca(ua.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new tv(t.options.projectId)}(t),this._credentials=new ov(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new ca(ua.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new ca(ua.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gv(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new rv;switch(t.type){case"gapi":var e=t.client;return ma(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new av(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ca(ua.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=ev.get(this))&&(fa("ComponentProvider","Removing Datastore"),ev.delete(this),t.terminate()),Promise.resolve();var t},t}(),yv=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new wv(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),bv=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),wv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ru(r))||this)._path=r,i.type="collection",i}return Qe(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new yv(this.firestore,null,new Ha(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(bv);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function _v(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=gn(t),uv("collection","path",e),t instanceof mv)return fv(n=Da.fromString.apply(Da,en([e],r))),new wv(t,null,n);if(!(t instanceof yv||t instanceof wv))throw new ca(ua.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return fv(n=Da.fromString.apply(Da,en([t.path],r)).child(Da.fromString(e))),new wv(t.firestore,null,n)}function Iv(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=gn(t),1===arguments.length&&(e=wa.u()),uv("doc","path",e),t instanceof mv)return lv(n=Da.fromString.apply(Da,en([e],r))),new yv(t,null,new Ha(n));if(!(t instanceof yv||t instanceof wv))throw new ca(ua.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return lv(n=t._path.child(Da.fromString.apply(Da,en([e],r)))),new yv(t.firestore,t instanceof wv?t.converter:null,new Ha(n))}function Tv(t,e){return t=gn(t),e=gn(e),(t instanceof yv||t instanceof wv)&&(e instanceof yv||e instanceof wv)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Ev(t,e){return t=gn(t),e=gn(e),t instanceof bv&&e instanceof bv&&t.firestore===e.firestore&&Vu(t._query,e._query)&&t.converter===e.converter
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */}var Sv=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new sp(this,"async_queue_retry"),this.Ic=function(){var e=ip();e&&fa("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=ip();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=ip();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new Zh;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return Ye(this,void 0,void 0,(function(){var t,e=this;return Je(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!ol(t=n.sent()))throw t;return fa("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,pa("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=Up.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&ga()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return Ye(this,void 0,void 0,(function(){var t;return Je(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Av(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var kv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Sv,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Qe(e,t),e.prototype._terminate=function(){return this._firestoreClient||Cv(this),this._firestoreClient.terminate()},e}(mv);
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Nv(t){return t._firestoreClient||Cv(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Cv(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Zd(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new qd(t._credentials,t._queue,r)}function Dv(t,e,n){var r=this,i=new Zh;return t.asyncQueue.enqueue((function(){return Ye(r,void 0,void 0,(function(){var r;return Je(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Bd(t,n)];case 1:return o.sent(),[4,$d(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===ua.FAILED_PRECONDITION||t.code===ua.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Rv(t){if(t._initialized||t._terminated)throw new ca(ua.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var xv=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new ca(ua.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xa(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Ov=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Pa.fromBase64String(e))}catch(e){throw new ca(ua.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Pa.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Pv=function(t){this._methodName=t},Lv=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new ca(ua.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ca(ua.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return _a(this._lat,t._lat)||_a(this._long,t._long)},t}(),Mv=/^__.*__$/,Fv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new yc(t,this.data,this.fieldMask,e,this.fieldTransforms):new mc(t,this.data,e,this.fieldTransforms)},t}(),Uv=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new yc(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function jv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ga()}}var Vv=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return sg(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(jv(this.Nc)&&Mv.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),qv=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||op(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Vv({Nc:t,methodName:e,qc:n,path:xa.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Bv(t){var e=t._freezeSettings(),n=op(t._databaseId);return new qv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $v(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);ng("Data must be an object, but it was:",s,r);var a,u,c=tg(r,s);if(o.merge)a=new Oa(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var p=rg(e,f[l],n);if(!s.contains(p))throw new ca(ua.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");ag(h,p)||h.push(p)}a=new Oa(h),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new Fv(new su(c),a,u)}var Kv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qe(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Pv);function Hv(t,e,n){return new Vv({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Gv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qe(e,t),e.prototype._toFieldTransform=function(t){return new ac(t.path,new Zu)},e.prototype.isEqual=function(t){return t instanceof e},e}(Pv),zv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Qe(e,t),e.prototype._toFieldTransform=function(t){var e=Hv(this,t,!0),n=this.Kc.map((function(t){return Zv(t,e)})),r=new tc(n);return new ac(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Pv),Wv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Qe(e,t),e.prototype._toFieldTransform=function(t){var e=Hv(this,t,!0),n=this.Kc.map((function(t){return Zv(t,e)})),r=new nc(n);return new ac(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Pv),Qv=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return Qe(e,t),e.prototype._toFieldTransform=function(t){var e=new ic(t.R,Wu(t.R,this.Qc));return new ac(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Pv);function Xv(t,e,n,r){var i=t.Uc(1,e,n);ng("Data must be an object, but it was:",i,r);var o=[],s=su.empty();ka(r,(function(t,r){var a=og(e,t,n);r=gn(r);var u=i.Oc(a);if(r instanceof Kv)o.push(a);else{var c=Zv(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Oa(o);return new Uv(s,a,i.fieldTransforms)}function Yv(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[rg(e,r,n)],u=[i];if(o.length%2!=0)throw new ca(ua.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(rg(e,o[c])),u.push(o[c+1]);for(var h=[],l=su.empty(),f=a.length-1;f>=0;--f)if(!ag(h,a[f])){var p=a[f],d=u[f];d=gn(d);var v=s.Oc(p);if(d instanceof Kv)h.push(p);else{var g=Zv(d,v);null!=g&&(h.push(p),l.set(p,g))}}var m=new Oa(h);return new Uv(l,m,s.fieldTransforms)}function Jv(t,e,n,r){return void 0===r&&(r=!1),Zv(n,t.Uc(r?4:3,e))}function Zv(t,e){if(eg(t=gn(t)))return ng("Unsupported field value:",e,t),tg(t,e);if(t instanceof Pv)return function(t,e){if(!jv(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Zv(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=gn(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Wu(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ea.fromDate(t);return{timestampValue:eh(e.R,n)}}if(t instanceof Ea)return n=new Ea(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:eh(e.R,n)};if(t instanceof Lv)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ov)return{bytesValue:nh(e.R,t._byteString)};if(t instanceof yv){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:oh(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+pv(t))}(t,e)}function tg(t,e){var n={};return Na(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ka(t,(function(t,r){var i=Zv(r,e.Fc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function eg(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ea||t instanceof Lv||t instanceof Ov||t instanceof yv||t instanceof Pv)}function ng(t,e,n){if(!eg(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=pv(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function rg(t,e,n){if((e=gn(e))instanceof xv)return e._internalPath;if("string"==typeof e)return og(t,e);throw sg("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var ig=new RegExp("[~\\*/\\[\\]]");function og(t,e,n){if(e.search(ig)>=0)throw sg("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(xv.bind.apply(xv,en([void 0],e.split(".")))))._internalPath}catch(r){throw sg("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function sg(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new ca(ua.INVALID_ARGUMENT,(a+=". ")+t+u)}function ag(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var ug=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new yv(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new cg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(hg("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),cg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qe(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(ug);function hg(t,e){return"string"==typeof e?og(t,e):e instanceof xv?e._internalPath:e._delegate._internalPath}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var lg=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),fg=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Qe(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new pg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(hg("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(ug),pg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qe(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(fg),dg=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new lg(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new pg(n._firestore,n._userDataWriter,r.key,r,new lg(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ca(ua.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new pg(t._firestore,t._userDataWriter,e.doc.key,e.doc,new lg(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new pg(t._firestore,t._userDataWriter,e.doc.key,e.doc,new lg(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:vg(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function vg(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ga()}}function gg(t,e){return t instanceof fg&&e instanceof fg?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof dg&&e instanceof dg&&t._firestore===e._firestore&&Ev(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function mg(t){if(Ou(t)&&0===t.explicitOrderBy.length)throw new ca(ua.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var yg=function(){};function bg(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var wg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return Qe(e,t),e.prototype._apply=function(t){var e=Bv(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new ca(ua.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){kg(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var l=h[c];u.push(Ag(r,t,l))}a={arrayValue:{values:u}}}else a=Ag(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||kg(s,o),a=Jv(n,"where",s,"in"===o||"not-in"===o);var f=du.create(i,o,a);return function(t,e){if(e.g()){var n=Lu(t);if(null!==n&&!n.isEqual(e.field))throw new ca(ua.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Pu(t);null!==r&&Ng(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new ca(ua.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new ca(ua.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new bv(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Cu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(yg),_g=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return Qe(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new ca(ua.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ca(ua.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Su(e,n);return function(t,e){if(null===Pu(t)){var n=Lu(t);null!==n&&Ng(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new bv(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Cu(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(yg),Ig=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Qe(e,t),e.prototype._apply=function(t){return new bv(t.firestore,t.converter,ju(t._query,this.Hc,this.Jc))},e}(yg),Tg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Qe(e,t),e.prototype._apply=function(t){var e=Sg(t,this.type,this.Yc,this.Xc);return new bv(t.firestore,t.converter,function(t,e){return new Cu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(yg),Eg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Qe(e,t),e.prototype._apply=function(t){var e=Sg(t,this.type,this.Yc,this.Xc);return new bv(t.firestore,t.converter,function(t,e){return new Cu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(yg);function Sg(t,e,n,r){if(n[0]=gn(n[0]),n[0]instanceof ug)return function(t,e,n,r,i){if(!r)throw new ca(ua.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Fu(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Za(e,r.key));else{var c=r.data.field(u.field);if(ja(c))throw new ca(ua.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new ca(ua.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Tu(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Bv(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new ca(ua.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new ca(ua.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Mu(t)&&-1!==c.indexOf("/"))throw new ca(ua.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Da.fromString(c));if(!Ha.isDocumentKey(h))throw new ca(ua.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new Ha(h);a.push(Za(e,l))}else{var f=Jv(n,r,c);a.push(f)}}return new Tu(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Ag(t,e,n){if("string"==typeof(n=gn(n))){if(""===n)throw new ca(ua.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mu(e)&&-1!==n.indexOf("/"))throw new ca(ua.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Da.fromString(n));if(!Ha.isDocumentKey(r))throw new ca(ua.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Za(t,new Ha(r))}if(n instanceof yv)return Za(t,n._key);throw new ca(ua.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+pv(n)+".")}function kg(t,e){if(!Array.isArray(t)||0===t.length)throw new ca(ua.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ca(ua.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Ng(t,e,n){if(!n.isEqual(e))throw new ca(ua.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Cg=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Ga(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Fa(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ua(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ga()}},t.prototype.convertObject=function(t,e){var n=this,r={};return ka(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Lv(Fa(t.latitude),Fa(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Va(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(qa(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Ma(t);return new Ea(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Da.fromString(t);ma(Ch(n));var r=new tv(n.get(1),n.get(3)),i=new Ha(n.popFirst(5));return r.isEqual(e)||pa("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Dg(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Rg=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Qe(e,t),e.prototype.convertBytes=function(t){return new Ov(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new yv(this.firestore,null,e)},e}(Cg),xg=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Bv(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Og(t,this._firestore),i=Dg(r.converter,e,n),o=$v(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,cc.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=Og(t,this._firestore);return o="string"==typeof(e=gn(e))||e instanceof xv?Yv(this._dataReader,"WriteBatch.update",s._key,e,n,r):Xv(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,cc.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Og(t,this._firestore);return this._mutations=this._mutations.concat(new Ec(e._key,cc.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new ca(ua.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Og(t,e){if((t=gn(t)).firestore!==e)throw new ca(ua.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var Pg=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Qe(e,t),e.prototype.convertBytes=function(t){return new Ov(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new yv(this.firestore,null,e)},e}(Cg);function Lg(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=dv(t,yv);var o=dv(t.firestore,kv),s=Bv(o);return Fg(o,[("string"==typeof(e=gn(e))||e instanceof xv?Yv(s,"updateDoc",t._key,e,n,r):Xv(s,"updateDoc",t._key,e)).toMutation(t._key,cc.exists(!0))])}function Mg(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=gn(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||Av(i[a])||(s=i[a],a++);var u,c,h,l={includeMetadataChanges:s.includeMetadataChanges};if(Av(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof yv)c=dv(t.firestore,kv),h=Ru(t._key.path),u={next:function(e){i[a]&&i[a](Ug(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=dv(t,bv);c=dv(p.firestore,kv),h=p._query;var d=new Pg(c);u={next:function(t){i[a]&&i[a](new dg(c,d,p,t))},error:i[a+1],complete:i[a+2]},mg(t._query)}return function(t,e,n,r){var i=this,o=new Ud(r),s=new Xp(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Ye(i,void 0,void 0,(function(){var e;return Je(this,(function(n){switch(n.label){case 0:return e=Hp,[4,Xd(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return Ye(i,void 0,void 0,(function(){var e;return Je(this,(function(n){switch(n.label){case 0:return e=Gp,[4,Xd(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Nv(c),h,l,u)}function Fg(t,e){return function(t,e){var n=this,r=new Zh;return t.asyncQueue.enqueueAndForget((function(){return Ye(n,void 0,void 0,(function(){var n;return Je(this,(function(i){switch(i.label){case 0:return n=sd,[4,Qd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Nv(t),e)}function Ug(t,e,n){var r=n.docs.get(e._key),i=new Pg(t);return new fg(t,i,e._key,r,new lg(n.hasPendingWrites,n.fromCache),e.converter)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var jg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Qe(e,t),e.prototype.get=function(e){var n=this,r=Og(e,this._firestore),i=new Pg(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new fg(n._firestore,i,r._key,t._document,new lg(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Bv(t)}return t.prototype.get=function(t){var e=this,n=Og(t,this._firestore),r=new Rg(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return ga();var i=t[0];if(i.isFoundDocument())return new ug(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new ug(e._firestore,r,n._key,null,n.converter);throw ga()}))},t.prototype.set=function(t,e,n){var r=Og(t,this._firestore),i=Dg(r.converter,e,n),o=$v(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Og(t,this._firestore);return o="string"==typeof(e=gn(e))||e instanceof xv?Yv(this._dataReader,"Transaction.update",s._key,e,n,r):Xv(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=Og(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Vg(){if("undefined"==typeof Uint8Array)throw new ca(ua.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function qg(){if("undefined"==typeof atob)throw new ca(ua.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Bg=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return qg(),new t(Ov.fromBase64String(e))},t.fromUint8Array=function(e){return Vg(),new t(Ov.fromUint8Array(e))},t.prototype.toBase64=function(){return qg(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Vg(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),$g=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Rv(t=dv(t,kv));var n=Nv(t),r=t._freezeSettings(),i=new Fd;return Dv(n,i,new Ld(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Rv(t=dv(t,kv));var e=Nv(t),n=t._freezeSettings(),r=new Fd;return Dv(e,r,new Md(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new ca(ua.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Zh;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Ye(e,void 0,void 0,(function(){var e;return Je(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Ye(this,void 0,void 0,(function(){var e;return Je(this,(function(n){switch(n.label){case 0:return nl.yt()?(e=t+"main",[4,nl.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(df(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Kg=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof tv||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||da("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=dv(t,mv))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&da("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Xe({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[nn.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),nn.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new ca(ua.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new iv(new nv(o,new qf(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Ye(e,void 0,void 0,(function(){var e,n;return Je(this,(function(r){switch(r.label){case 0:return[4,Gd(t)];case 1:return e=r.sent(),[4,Wd(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=ya(t);return e.Or.delete(0),pp(e)}(n))]}}))}))}))}(Nv(dv(this._delegate,kv)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Ye(e,void 0,void 0,(function(){var e,n;return Je(this,(function(r){switch(r.label){case 0:return[4,Gd(t)];case 1:return e=r.sent(),[4,Wd(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Ye(this,void 0,void 0,(function(){var e;return Je(this,(function(n){switch(n.label){case 0:return(e=ya(t)).Or.add(0),[4,dp(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Nv(dv(this._delegate,kv)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&hv("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Zh;return t.asyncQueue.enqueueAndForget((function(){return Ye(e,void 0,void 0,(function(){var e;return Je(this,(function(r){switch(r.label){case 0:return e=fd,[4,Qd(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Nv(dv(this._delegate,kv)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Ud(e);return t.asyncQueue.enqueueAndForget((function(){return Ye(n,void 0,void 0,(function(){var e;return Je(this,(function(n){switch(n.label){case 0:return e=function(t,e){ya(t).Gr.add(e),e.next()},[4,Xd(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Ye(n,void 0,void 0,(function(){var e;return Je(this,(function(n){switch(n.label){case 0:return e=function(t,e){ya(t).Gr.delete(e)},[4,Xd(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Nv(t=dv(t,kv)),Av(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new ca(ua.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new im(this,_v(this._delegate,t))}catch(t){throw Xg(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Qg(this,Iv(this._delegate,t))}catch(t){throw Xg(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new em(this,function(t,e){if(t=dv(t,mv),uv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ca(ua.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new bv(t,null,function(t){return new Cu(Da.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Xg(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Zh;return t.asyncQueue.enqueueAndForget((function(){return Ye(n,void 0,void 0,(function(){var n;return Je(this,(function(i){switch(i.label){case 0:return[4,function(t){return Hd(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new Vd(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Nv(t),(function(n){return e(new jg(t,n))}))}(this._delegate,(function(n){return t(new Gg(e,n))}))},t.prototype.batch=function(){var t=this;return Nv(this._delegate),new zg(new xg(this._delegate,(function(e){return Fg(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new ca(ua.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new ca(ua.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Hg=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Qe(e,t),e.prototype.convertBytes=function(t){return new Bg(new Ov(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Qg.eu(e,this.firestore,null)},e}(Cg);var Gg=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Hg(t)}return t.prototype.get=function(t){var e=this,n=om(t);return this._delegate.get(n).then((function(t){return new Zg(e._firestore,new fg(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=om(t);return n?(cv("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=om(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,en([s,e,n],i)),this},t.prototype.delete=function(t){var e=om(t);return this._delegate.delete(e),this},t}(),zg=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=om(t);return n?(cv("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=om(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,en([s,e,n],i)),this},t.prototype.delete=function(t){var e=om(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),Wg=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new pg(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new tm(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Hg(e),n),i.set(n,o)),o},t}();Wg.su=new WeakMap;var Qg=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Hg(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new ca(ua.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new yv(n._delegate,r,new Ha(e)))},t.eu=function(e,n,r){return new t(n,new yv(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new im(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new im(this.firestore,_v(this._delegate,t))}catch(t){throw Xg(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=gn(t))instanceof yv&&Tv(this._delegate,t)},t.prototype.set=function(t,e){e=cv("DocumentReference.set",e);try{return function(t,e,n){t=dv(t,yv);var r=dv(t.firestore,kv),i=Dg(t.converter,e,n);return Fg(r,[$v(Bv(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,cc.none())])}(this._delegate,t,e)}catch(t){throw Xg(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Lg(this._delegate,t):Lg.apply(void 0,en([this._delegate,t,e],n))}catch(t){throw Xg(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Fg(dv((t=this._delegate).firestore,kv),[new Ec(t._key,cc.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Yg(e),i=Jg(e,(function(e){return new Zg(t.firestore,new fg(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return Mg(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=dv(t,yv);var e=dv(t.firestore,kv),n=Nv(e),r=new Pg(e);return function(t,e){var n=this,r=new Zh;return t.asyncQueue.enqueueAndForget((function(){return Ye(n,void 0,void 0,(function(){var n;return Je(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Ye(this,void 0,void 0,(function(){var r,i;return Je(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ya(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new ca(ua.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=jp(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,zd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new fg(e,r,t._key,n,new lg(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=dv(t,yv);var e=dv(t.firestore,kv);return Yd(Nv(e),t._key,{source:"server"}).then((function(n){return Ug(e,t,n)}))}(this._delegate):function(t){t=dv(t,yv);var e=dv(t.firestore,kv);return Yd(Nv(e),t._key).then((function(n){return Ug(e,t,n)}))}(this._delegate)).then((function(t){return new Zg(e.firestore,new fg(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Wg.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function Xg(t,e,n){return t.message=t.message.replace(e,n),t}function Yg(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Av(r))return r}return{}}function Jg(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Av(t[0])?t[0]:Av(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Zg=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Qg(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return gg(this._delegate,t._delegate)},t}(),tm=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Qe(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Zg),em=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Hg(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,bg(this._delegate,function(t,e,n){var r=e,i=hg("where",t);return new wg(i,r,n)}(e,n,r)))}catch(e){throw Xg(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,bg(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=hg("orderBy",t);return new _g(r,n)}(e,n)))}catch(e){throw Xg(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,bg(this._delegate,function(t){return vv("limit",t),new Ig("limit",t,"F")}(e)))}catch(e){throw Xg(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,bg(this._delegate,function(t){return vv("limitToLast",t),new Ig("limitToLast",t,"L")}(e)))}catch(e){throw Xg(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,bg(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Tg("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw Xg(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,bg(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Tg("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw Xg(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,bg(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Eg("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw Xg(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,bg(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Eg("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw Xg(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Ev(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=dv(t,bv);var e=dv(t.firestore,kv),n=Nv(e),r=new Pg(e);return function(t,e){var n=this,r=new Zh;return t.asyncQueue.enqueueAndForget((function(){return Ye(n,void 0,void 0,(function(){var n;return Je(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Ye(this,void 0,void 0,(function(){var r,i,o,s,a;return Je(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,kf(t,e,!0)];case 1:return a=u.sent(),r=new Zp(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=jp(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,zd(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new dg(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=dv(t,bv);var e=dv(t.firestore,kv),n=Nv(e),r=new Pg(e);return Jd(n,t._query,{source:"server"}).then((function(n){return new dg(e,r,t,n)}))}(this._delegate):function(t){t=dv(t,bv);var e=dv(t.firestore,kv),n=Nv(e),r=new Pg(e);return mg(t._query),Jd(n,t._query).then((function(n){return new dg(e,r,t,n)}))}(this._delegate)).then((function(t){return new rm(e.firestore,new dg(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Yg(e),i=Jg(e,(function(e){return new rm(t.firestore,new dg(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Mg(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(Wg.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),nm=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new tm(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),rm=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new em(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new tm(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new nm(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new tm(n._firestore,r))}))},t.prototype.isEqual=function(t){return gg(this._delegate,t._delegate)},t}(),im=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Qe(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Qg(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Qg(this.firestore,void 0===t?Iv(this._delegate):Iv(this._delegate,t))}catch(t){throw Xg(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=dv(t.firestore,kv),r=Iv(t),i=Dg(t.converter,e);return Fg(n,[$v(Bv(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,cc.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Qg(e.firestore,t)}))},e.prototype.isEqual=function(t){return Tv(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(Wg.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(em);function om(t){return dv(t,yv)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var sm,am=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(xv.bind.apply(xv,en([void 0],t)))}return t.documentId=function(){return new t(xa.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=gn(t))instanceof xv&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),um=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Gv("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Kv("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zv("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wv("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Qv("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),cm={Firestore:Kg,GeoPoint:Lv,Timestamp:Ea,Blob:Bg,Transaction:Gg,WriteBatch:zg,DocumentReference:Qg,DocumentSnapshot:Zg,Query:em,QueryDocumentSnapshot:tm,QuerySnapshot:rm,CollectionReference:im,FieldPath:am,FieldValue:um,setLogLevel:function(t){var e;e=t,ha.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new mn("firestore",(function(t){return function(t,e){return new Kg(t,new kv(t,e),new $g)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},cm)))})(sm=Hn),sm.registerVersion("@firebase/firestore","2.3.9");
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var hm="firebasestorage.googleapis.com",lm=function(t){function e(n,r){var i=t.call(this,fm(n),"Firebase Storage: "+r+" ("+fm(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Qe(e,t),e.prototype._codeEquals=function(t){return fm(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(un);function fm(t){return"storage/"+t}function pm(){return new lm("unknown","An unknown error occurred, please check the error payload for server response.")}function dm(){return new lm("canceled","User canceled the upload/download.")}function vm(){return new lm("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function gm(t){return new lm("invalid-argument",t)}function mm(){return new lm("app-deleted","The Firebase app was deleted.")}function ym(t){return new lm("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bm(t,e){return new lm("invalid-format","String does not match format '"+t+"': "+e)}function wm(t){throw new lm("internal-error","Internal error: "+t)}
/**
     * @license
     * Copyright 2021 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var _m={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Im=function(t,e){this.data=t,this.contentType=e||null};function Tm(t,e){switch(t){case _m.RAW:return new Im(Em(e));case _m.BASE64:case _m.BASE64URL:return new Im(Sm(t,e));case _m.DATA_URL:return new Im((n=new Am(e)).base64?Sm(_m.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw bm(_m.DATA_URL,"Malformed data URL.")}return Em(e)}(n.rest),function(t){return new Am(t).contentType}(e))}var n;throw pm()}function Em(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Sm(t,e){switch(t){case _m.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw bm(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case _m.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw bm(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(e){throw bm(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Am=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw bm(_m.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i;
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */};var km,Nm={STATE_CHANGED:"state_changed"},Cm={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Dm(t){switch(t){case"running":case"pausing":case"canceling":return Cm.RUNNING;case"paused":return Cm.PAUSED;case"success":return Cm.SUCCESS;case"canceled":return Cm.CANCELED;case"error":default:return Cm.ERROR}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(km||(km={}));
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Rm=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=km.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=km.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=km.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw wm("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw wm("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw wm("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw wm("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var xm=function(){function t(){}return t.prototype.createConnection=function(){return new Rm},t}(),Om=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(n){return new t(e,"")}if(""===r.path)return r;throw new lm("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===hm?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var h=u[c],l=h.regex.exec(e);if(l){var f=l[h.indices.bucket],p=l[h.indices.path];p||(p=""),r=new t(f,p),h.postModify(r);break}}if(null==r)throw function(t){return new lm("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),Pm=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Lm(t){return"string"==typeof t||t instanceof String}function Mm(t){return Fm()&&t instanceof Blob}function Fm(){return"undefined"!=typeof Blob}function Um(t,e,n,r){if(r<e)throw gm("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw gm("Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function jm(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function Vm(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var qm=function(){function t(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.connection;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());!
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t){return void 0!==t}(a)?i():i(a)}catch(t){o(t)}else null!==s?((r=pm()).serverResponse=s.getResponseText(),t.errorCallback_?o(t.errorCallback_(s,r)):o(r)):n.canceled?o(r=t.appDelete_?mm():dm()):o(r=new lm("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Bm(!1,null,!0)):this.backoffId_=
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function(t,e,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function h(e){i=setTimeout((function(){i=null,t(l,a())}),e)}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,en([null,t],e));else{var i;a()||o?c.call.apply(c,en([null,t],e)):(r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),h(i))}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(s=2),clearTimeout(i),h(0)):t||(s=1)))}return h(0),setTimeout((function(){o=!0,p(!0)}),n),p}((function(e,n){if(n)e(!1,new Bm(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===km.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Bm(s,r))}else{var a=r.getErrorCode()===km.ABORT;e(!1,new Bm(!1,null,a))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Bm=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
function $m(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Km(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=$m();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Fm())return new Blob(t);throw new lm("unsupported-environment","This browser doesn't seem to support creating Blobs")}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Hm=function(){function t(t,e){var n=0,r="";Mm(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Mm(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Fm()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(Km.apply(null,r))}var i=e.map((function(t){return Lm(t)?Tm(_m.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Gm(t){var e;try{e=JSON.parse(t)}catch(t){return null}return function(t){return"object"==typeof t&&!Array.isArray(t)}(e)?e:null}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function zm(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Wm(t,e){return e}var Qm=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Wm},Xm=null;function Ym(){if(Xm)return Xm;var t=[];t.push(new Qm("bucket")),t.push(new Qm("generation")),t.push(new Qm("metageneration")),t.push(new Qm("name","fullPath",!0));var e=new Qm("name");e.xform=function(t,e){return function(t){return!Lm(t)||t.length<2?t:zm(t)}(e)},t.push(e);var n=new Qm("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Qm("timeCreated")),t.push(new Qm("updated")),t.push(new Qm("md5Hash",null,!0)),t.push(new Qm("cacheControl",null,!0)),t.push(new Qm("contentDisposition",null,!0)),t.push(new Qm("contentEncoding",null,!0)),t.push(new Qm("contentLanguage",null,!0)),t.push(new Qm("contentType",null,!0)),t.push(new Qm("metadata","customMetadata",!0)),Xm=t}function Jm(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new Om(n,r);return e._makeStorageReference(i)}})}(r,t),r}function Zm(t,e,n){var r=Gm(e);return null===r?null:Jm(t,r,n)}function ty(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ey(t,e,n){var r=Gm(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new Om(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];a=t._makeStorageReference(new Om(e,h.name)),r.items.push(a)}return r}(t,e,r)}var ny=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function ry(t){if(!t)throw pm()}function iy(t,e){return function(n,r){var i=Zm(t,r,e);return ry(null!==i),i}}function oy(t,e){return function(n,r){var i=Zm(t,r,e);return ry(null!==i),function(t,e,n){var r=Gm(e);if(null===r)return null;if(!Lm(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return jm("/b/"+o(r)+"/o/"+o(i),n)+Vm({alt:"media",token:e})}))[0]}(i,r,t.host)}}function sy(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new lm("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new lm("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new lm("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new lm("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function ay(t){var e=sy(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new lm("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function uy(t,e,n){var r=jm(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new ny(r,"GET",iy(t,n),i);return o.errorHandler=ay(e),o}function cy(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=jm(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new ny(s,"GET",function(t,e){return function(n,r){var i=ey(t,e,r);return ry(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=sy(e),u}function hy(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var ly=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function fy(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){ry(!1)}return ry(!!n&&-1!==(e||["active"]).indexOf(n)),n}var py=262144;function dy(t,e,n,r,i,o,s,a){var u=new ly(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new lm("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,p={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(l,f);if(null===d)throw vm();var v=e.maxUploadRetryTime,g=new ny(n,"POST",(function(t,n){var i,s=fy(t,["active","final"]),a=u.current+h,c=r.size();return i="final"===s?iy(e,o)(t,n):null,new ly(a,c,"final"===s,i)}),v);return g.headers=p,g.body=d.uploadData(),g.progressCallback=a||null,g.errorHandler=sy(t),g}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var vy=function(t,e,n){if(function(t){return"function"==typeof t}(t)||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function gy(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */var my=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Ym(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=hy(e,r,i),a={name:s.fullPath},u=jm(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=ty(s,n),l=t.maxUploadRetryTime,f=new ny(u,"POST",(function(t){var e;fy(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){ry(!1)}return ry(Lm(e)),e}),l);return f.urlParams=a,f.headers=c,f.body=h,f.errorHandler=sy(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new ny(n,"POST",(function(t){var e=fy(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){ry(!1)}n||ry(!1);var i=Number(n);return ry(!isNaN(i)),new ly(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=sy(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=py*this._chunkMultiplier,n=new ly(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var s;try{s=dy(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){py*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=uy(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=hy(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ty(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=Hm.getBlob(c,r,h);if(null===l)throw vm();var f={name:u.fullPath},p=jm(o,t.host),d=t.maxUploadRetryTime,v=new ny(p,"POST",iy(t,n),d);return v.urlParams=f,v.headers=s,v.body=l.uploadData(),v.errorHandler=sy(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=dm(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Dm(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new vy(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Dm(this._state)){case Cm.SUCCESS:gy(this._resolve.bind(null,this.snapshot))();break;case Cm.CANCELED:case Cm.ERROR:gy(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Dm(this._state)){case Cm.RUNNING:case Cm.PAUSED:t.next&&gy(t.next.bind(t,this.snapshot))();break;case Cm.SUCCESS:t.complete&&gy(t.complete.bind(t))();break;case Cm.CANCELED:case Cm.ERROR:t.error&&gy(t.error.bind(t,this._error))();break;default:t.error&&gy(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),yy=function(){function t(t,e){this._service=t,this._location=e instanceof Om?e:Om.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Om(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return zm(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Om(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw ym(t)},t}();
/**
     * @license
     * Copyright 2019 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function by(t){var e={prefixes:[],items:[]};return wy(t,e).then((function(){return e}))}function wy(t,e,n){return Ye(this,void 0,void 0,(function(){var r,i,o;return Je(this,(function(s){switch(s.label){case 0:return[4,_y(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,wy(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function _y(t,e){return Ye(this,void 0,void 0,(function(){var n,r;return Je(this,(function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Um("options.maxResults",1,1e3,e.maxResults),n=e||{},r=cy(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function Iy(t,e){return Ye(this,void 0,void 0,(function(){var n;return Je(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=jm(e.fullServerUrl(),t.host),o=ty(n,r),s=t.maxOperationRetryTime,a=new ny(i,"PATCH",iy(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=ay(e),a}(t.storage,t._location,e,Ym()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function Ty(t){return Ye(this,void 0,void 0,(function(){var e;return Je(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=jm(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new ny(r,"GET",oy(t,n),i);return o.errorHandler=ay(e),o}(t.storage,t._location,Ym()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new lm("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function Ey(t){return Ye(this,void 0,void 0,(function(){var e;return Je(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=jm(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new ny(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=ay(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function Sy(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Om(t._location.bucket,n);return new yy(t.storage,r)}
/**
     * @license
     * Copyright 2017 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ay(t){return/^[A-Za-z]+:\/\//.test(t)}function ky(t,e){if(t instanceof Dy){var n=t;if(null==n._bucket)throw new lm("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new yy(n,n._bucket);return null!=e?ky(r,e):r}if(void 0!==e){if(e.includes(".."))throw gm('`path` param cannot contain ".."');return Sy(t,e)}return t}function Ny(t,e){if(e&&Ay(e)){if(t instanceof Dy)return new yy(t,e);throw gm("To use ref(service, url), the first argument must be a Storage instance.")}return ky(t,e)}function Cy(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:Om.makeFromBucketSpec(n,t)}var Dy=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=hm,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Om.makeFromBucketSpec(i,this._host):Cy(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=Om.makeFromBucketSpec(this._url,t):this._bucket=Cy(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Um("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Um("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Ye(this,void 0,void 0,(function(){var t,e;return Je(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return Ye(this,void 0,void 0,(function(){var t;return Je(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new yy(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new Pm(mm());var i=function(t,e,n,r,i,o){var s=Vm(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new qm(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return Ye(this,void 0,void 0,(function(){var e,n,r;return Je(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function Ry(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new my(t,new Hm(e),n)}(t=gn(t),e,n)}function xy(t){return function(t){return Ye(this,void 0,void 0,(function(){var e;return Je(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=uy(t.storage,t._location,Ym()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=gn(t))}function Oy(t,e){return Ny(t=gn(t),e)}
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var Py=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Ly=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Py(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Py(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Py(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Py(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),My=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Fy(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Fy(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Fy=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return Sy(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Ly(Ry(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=_m.RAW),this._throwIfRoot("putString");var r=Tm(e,t),i=Xe({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Ly(new my(this._delegate,new Hm(r.data,!0),i),this)},t.prototype.listAll=function(){var t=this;return function(t){return by(t=gn(t))}(this._delegate).then((function(e){return new My(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return _y(t=gn(t),e)}(this._delegate,t||void 0).then((function(t){return new My(t,e.storage)}))},t.prototype.getMetadata=function(){return xy(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Iy(t=gn(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Ty(t=gn(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Ey(t=gn(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw ym(t)},t}(),Uy=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Ay(t))throw gm("ref() expected a child path but got a URL, use refFromURL instead.");return new Fy(Oy(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Ay(t))throw gm("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Om.makeFromUrl(t,this._delegate.host)}catch(t){throw gm("refFromUrl() expected a valid full URL but got an invalid one.")}return new Fy(Oy(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();
/**
     * @license
     * Copyright 2020 Google LLC
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *   http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */function jy(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Uy(r,new Dy(r,i,o,new xm,n,Hn.SDK_VERSION))}!function(t){var e={TaskState:Cm,TaskEvent:Nm,StringFormat:_m,Storage:Dy,Reference:Fy};t.INTERNAL.registerComponent(new mn("storage",jy,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.6.0")}(Hn);Hn.initializeApp({apiKey:"AIzaSyCE7TDG5mB-Eab0p2yH62tbXIkoj6olAq8",authDomain:"onionfist-6bc5b.firebaseapp.com",projectId:"onionfist-6bc5b",storageBucket:"onionfist-6bc5b.appspot.com",messagingSenderId:"443033735598",appId:"1:443033735598:web:e13cadc8caa2080066783f",measurementId:"G-FMZ46HP0K6"});const Vy=new Hn.auth.GoogleAuthProvider,qy=Hn.auth(),By=Hn.firestore();function $y(t,e,n){const r=t.slice();return r[11]=e[n],r}function Ky(t){let e,n,r,i,o,s,a,u,c,h,l=t[1].email+"";const f=[Qy,Wy,zy],p=[];function d(t,e){return 0==t[2]?0:""==t[3]?1:2}return a=d(t),u=p[a]=f[a](t),{c(){e=x("div"),n=x("p"),r=O("Logged in: "),i=O(l),s=P(),u.c(),c=L(),F(n,"class","svelte-dluqi1"),F(e,"id","whoami"),F(e,"class","svelte-dluqi1")},m(t,o){C(t,e,o),A(e,n),A(n,r),A(n,i),C(t,s,o),p[a].m(t,o),C(t,c,o),h=!0},p(t,e){(!h||2&e)&&l!==(l=t[1].email+"")&&U(i,l);let n=a;a=d(t),a===n?p[a].p(t,e):(pt(),gt(p[n],1,1,(()=>{p[n]=null})),dt(),u=p[a],u?u.p(t,e):(u=p[a]=f[a](t),u.c()),vt(u,1),u.m(c.parentNode,c))},i(t){h||(it((()=>{o||(o=yt(e,$e,{},!0)),o.run(1)})),vt(u),h=!0)},o(t){o||(o=yt(e,$e,{},!1)),o.run(0),gt(u),h=!1},d(t){t&&D(e),t&&o&&o.end(),t&&D(s),p[a].d(t),t&&D(c)}}}function Hy(e){let n,r,i,o,s,a,u,c,h,l;return{c(){n=x("div"),r=x("h1"),r.textContent="Please log in",i=P(),o=x("h2"),o.textContent="To save your score to the leaderboard, you must log in.",s=P(),a=x("button"),a.textContent="Log in with Google"},m(t,u){C(t,n,u),A(n,r),A(n,i),A(n,o),A(n,s),A(n,a),c=!0,h||(l=M(a,"click",e[7]),h=!0)},p:t,i(t){c||(it((()=>{u||(u=yt(n,$e,{},!0)),u.run(1)})),c=!0)},o(t){u||(u=yt(n,$e,{},!1)),u.run(0),c=!1},d(t){t&&D(n),t&&u&&u.end(),h=!1,l()}}}function Gy(e){let n,r,i;return{c(){n=x("div"),n.innerHTML="<h1>Loading...</h1>"},m(t,e){C(t,n,e),i=!0},p:t,i(t){i||(it((()=>{r||(r=yt(n,$e,{},!0)),r.run(1)})),i=!0)},o(t){r||(r=yt(n,$e,{},!1)),r.run(0),i=!1},d(t){t&&D(n),t&&r&&r.end()}}}function zy(t){let e,n,r,i,o,s,a;return{c(){e=x("div"),n=x("h1"),n.textContent="Please try again.",r=P(),i=x("h2"),o=O(t[3])},m(t,s){C(t,e,s),A(e,n),A(e,r),A(e,i),A(i,o),a=!0},p(t,e){(!a||8&e)&&U(o,t[3])},i(t){a||(it((()=>{s||(s=yt(e,$e,{},!0)),s.run(1)})),a=!0)},o(t){s||(s=yt(e,$e,{},!1)),s.run(0),a=!1},d(t){t&&D(e),t&&s&&s.end()}}}function Wy(t){let e,n,r,i,o,s,a,u,c,h,l,f,p=1==t[5]&&Xy(),d=1==t[6]&&Yy();return{c(){e=x("div"),n=x("h1"),n.textContent="Your scores are on the leaderboard!",r=P(),i=x("h2"),i.innerHTML='<a class="button" href="/icelb?map_id=overall&amp;sort_by=dodo_score">Click here to check it out</a>',o=P(),s=x("br"),a=P(),u=x("p"),u.textContent="Syncing your scores across all of your devices...",c=P(),p&&p.c(),h=P(),d&&d.c()},m(t,l){C(t,e,l),A(e,n),A(e,r),A(e,i),A(e,o),A(e,s),A(e,a),A(e,u),A(e,c),p&&p.m(e,null),A(e,h),d&&d.m(e,null),f=!0},p(t,n){1==t[5]?p?32&n&&vt(p,1):(p=Xy(),p.c(),vt(p,1),p.m(e,h)):p&&(pt(),gt(p,1,1,(()=>{p=null})),dt()),1==t[6]?d?64&n&&vt(d,1):(d=Yy(),d.c(),vt(d,1),d.m(e,null)):d&&(pt(),gt(d,1,1,(()=>{d=null})),dt())},i(t){f||(vt(p),vt(d),it((()=>{l||(l=yt(e,$e,{},!0)),l.run(1)})),f=!0)},o(t){gt(p),gt(d),l||(l=yt(e,$e,{},!1)),l.run(0),f=!1},d(t){t&&D(e),p&&p.d(),d&&d.d(),t&&l&&l.end()}}}function Qy(e){let n,r,i;return{c(){n=x("div"),n.innerHTML="<h1>Saving your scores...</h1> \n\t\t\t\t<h2>This may take up to 5 minutes.</h2>"},m(t,e){C(t,n,e),i=!0},p:t,i(t){i||(it((()=>{r||(r=yt(n,$e,{},!0)),r.run(1)})),i=!0)},o(t){r||(r=yt(n,$e,{},!1)),r.run(0),i=!1},d(t){t&&D(n),t&&r&&r.end()}}}function Xy(t){let e,n,r;return{c(){e=x("p"),e.textContent="üòä Synced score to chrome extension",F(e,"class","success svelte-dluqi1")},m(t,n){C(t,e,n),r=!0},i(t){r||(it((()=>{n||(n=yt(e,Be,{},!0)),n.run(1)})),r=!0)},o(t){n||(n=yt(e,Be,{},!1)),n.run(0),r=!1},d(t){t&&D(e),t&&n&&n.end()}}}function Yy(t){let e,n,r;return{c(){e=x("p"),e.textContent="üòä Synced score to website",F(e,"class","success svelte-dluqi1")},m(t,n){C(t,e,n),r=!0},i(t){r||(it((()=>{n||(n=yt(e,Be,{},!0)),n.run(1)})),r=!0)},o(t){n||(n=yt(e,Be,{},!1)),n.run(0),r=!1},d(t){t&&D(e),t&&n&&n.end()}}}function Jy(t){let e,n,r=t[11]+"";return{c(){e=x("p"),n=O(r),F(e,"class","error svelte-dluqi1")},m(t,r){C(t,e,r),A(e,n)},p(t,e){16&e&&r!==(r=t[11]+"")&&U(n,r)},d(t){t&&D(e)}}}function Zy(t){let e,n,r,i,o,s,a;const u=[Gy,Hy,Ky],c=[];function h(t,e){return 1==t[0]?0:null==t[1]?1:null!=t[1]?2:-1}~(n=h(t))&&(r=c[n]=u[n](t));let l=t[4],f=[];for(let e=0;e<l.length;e+=1)f[e]=Jy($y(t,l,e));return s=new He({}),{c(){e=x("main"),r&&r.c(),i=P();for(let t=0;t<f.length;t+=1)f[t].c();o=P(),_t(s.$$.fragment),F(e,"class","svelte-dluqi1")},m(t,r){C(t,e,r),~n&&c[n].m(e,null),A(e,i);for(let t=0;t<f.length;t+=1)f[t].m(e,null);A(e,o),It(s,e,null),a=!0},p(t,[s]){let a=n;if(n=h(t),n===a?~n&&c[n].p(t,s):(r&&(pt(),gt(c[a],1,1,(()=>{c[a]=null})),dt()),~n?(r=c[n],r?r.p(t,s):(r=c[n]=u[n](t),r.c()),vt(r,1),r.m(e,i)):r=null),16&s){let n;for(l=t[4],n=0;n<l.length;n+=1){const r=$y(t,l,n);f[n]?f[n].p(r,s):(f[n]=Jy(r),f[n].c(),f[n].m(e,o))}for(;n<f.length;n+=1)f[n].d(1);f.length=l.length}},i(t){a||(vt(r),vt(s.$$.fragment,t),a=!0)},o(t){gt(r),gt(s.$$.fragment,t),a=!1},d(t){t&&D(e),~n&&c[n].d(),R(f,t),Tt(s)}}}function tb(t,e,n){var r=!0,i=null,o=!1,s="";qy.onAuthStateChanged((function(t){n(0,r=!1),t?t.getIdToken().then((function(e){n(1,i=t),n(1,i.idToken=e,i),async function(){n(2,o=!1);const t=window.location.hash.substring(1);window.location.hash="";const e=i.idToken,r=`https://fn.onionfist.com/icesave?hash=${t}&idToken=${e}&lbVersion=2`;console.log("UPLOAD START"),fetch(r).then((t=>t.json())).then((t=>{console.log("UPLOAD DONE"),n(2,o=!0),null==t.error?function(t){console.log("Informing game");var e=JSON.stringify(t.delta),r=["jhidcpailhmpjpbdbhceiaeeggkalgmd","dfbgcgacmhnidfcfnhhphhijkbmfcbkg"];if(chrome.runtime)for(const t of r)chrome.runtime.sendMessage(t,{delta:e,code:"save_sync"},(function(t){n(5,u=!0)}));else console.log("no runtime, maybe due to localhost.");let i=localStorage.getItem("last_save");if(null==i)return void console.log("Not saving to web because it doesn't have last_save in localStorage.");i=JSON.parse(i);var o={...t.delta.map_delta};for(let t in o)null!=i[t]&&(o[t].xp=Number(o[t].xp)-Number(i[t])),0==o[t].xp&&delete o[t];localStorage.setItem("delta",JSON.stringify(o)),localStorage.setItem("NAME",t.delta.mem_name),n(6,c=!0)}(t):(console.error("ERROR:",t.error),n(3,s=t.error))})).catch((t=>{console.log(t)}))}()})):n(1,i=null)}));var a=[],u=!1,c=!1;return[r,i,o,s,a,u,c,function(){qy.signInWithPopup(Vy).then((t=>{})).catch((t=>{console.log("error",t),n(4,a=[...a,"Error: Sign in failed with code "+t.code])}))}]}class eb extends St{constructor(t){super(),Et(this,t,tb,Zy,a,{})}}const{document:nb}=bt;function rb(t,e,n){const r=t.slice();return r[31]=e[n],r}function ib(t,e,n){const r=t.slice();return r[34]=e[n],r}function ob(t,e,n){const r=t.slice();return r[37]=e[n],r}function sb(t){let e,n,r,i,o,s,a,u,c,h,l,f,p,d,v,g,m,y,b,w=Object.keys(map_info),_=[];for(let e=0;e<w.length;e+=1)_[e]=cb(ob(t,w,e));function I(t,e){return null!=t[2]?lb:hb}let T=I(t),E=T(t);return{c(){e=x("div"),n=x("div"),r=x("h2"),r.textContent="Cups",i=P(),o=x("button"),o.textContent="Overall",s=x("br"),a=P();for(let t=0;t<_.length;t+=1)_[t].c();u=P(),c=x("br"),h=P(),l=x("a"),l.textContent="Search Map",f=P(),p=x("a"),p.textContent="Sort Maps",d=P(),v=x("div"),g=x("h2"),g.textContent="Maps",m=P(),E.c(),F(r,"class","svelte-gm5hjn"),F(o,"class","svelte-gm5hjn"),F(l,"href","https://exponent.onionfist.com/search/"),V(l,"margin","16px"),F(p,"href","https://exponent.onionfist.com/mapdiff/"),V(p,"margin","16px"),F(n,"class","svelte-gm5hjn"),F(g,"class","svelte-gm5hjn"),F(v,"class","svelte-gm5hjn"),F(e,"id","map_selection"),F(e,"class","svelte-gm5hjn")},m(w,I){C(w,e,I),A(e,n),A(n,r),A(n,i),A(n,o),A(n,s),A(n,a);for(let t=0;t<_.length;t+=1)_[t].m(n,null);A(n,u),A(n,c),A(n,h),A(n,l),A(n,f),A(n,p),A(e,d),A(e,v),A(v,g),A(v,m),E.m(v,null),y||(b=M(o,"click",t[13]),y=!0)},p(t,e){if(4&e[0]){let r;for(w=Object.keys(map_info),r=0;r<w.length;r+=1){const i=ob(t,w,r);_[r]?_[r].p(i,e):(_[r]=cb(i),_[r].c(),_[r].m(n,u))}for(;r<_.length;r+=1)_[r].d(1);_.length=w.length}T===(T=I(t))&&E?E.p(t,e):(E.d(1),E=T(t),E&&(E.c(),E.m(v,null)))},d(t){t&&D(e),R(_,t),E.d(),y=!1,b()}}}function ab(t){let e,n,r,i,o,s=t[37]+"";function a(){return t[15](t[37])}return{c(){e=x("button"),n=O(s),r=x("br"),F(e,"class","selected svelte-gm5hjn")},m(t,s){C(t,e,s),A(e,n),C(t,r,s),i||(o=M(e,"click",a),i=!0)},p(e,n){t=e},d(t){t&&D(e),t&&D(r),i=!1,o()}}}function ub(t){let e,n,r,i,o,s=t[37]+"";function a(){return t[14](t[37])}return{c(){e=x("button"),n=O(s),r=x("br"),F(e,"class","svelte-gm5hjn")},m(t,s){C(t,e,s),A(e,n),C(t,r,s),i||(o=M(e,"click",a),i=!0)},p(e,n){t=e},d(t){t&&D(e),t&&D(r),i=!1,o()}}}function cb(t){let e,n="finder"!=t[37]&&function(t){let e;function n(t,e){return t[2]!=t[37]?ub:ab}let r=n(t),i=r(t);return{c(){i.c(),e=L()},m(t,n){i.m(t,n),C(t,e,n)},p(t,o){r===(r=n(t))&&i?i.p(t,o):(i.d(1),i=r(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&D(e)}}}(t);return{c(){n&&n.c(),e=L()},m(t,r){n&&n.m(t,r),C(t,e,r)},p(t,e){"finder"!=t[37]&&n.p(t,e)},d(t){n&&n.d(t),t&&D(e)}}}function hb(e){let n;return{c(){n=x("p"),n.textContent="None selected"},m(t,e){C(t,n,e)},p:t,d(t){t&&D(n)}}}function lb(t){let e,n=map_info[t[2]],r=[];for(let e=0;e<n.length;e+=1)r[e]=fb(ib(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=L()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);C(t,e,n)},p(t,i){if(2052&i[0]){let o;for(n=map_info[t[2]],o=0;o<n.length;o+=1){const s=ib(t,n,o);r[o]?r[o].p(s,i):(r[o]=fb(s),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){R(r,t),t&&D(e)}}}function fb(t){let e,n,r,i,o,s=t[34].name+"";function a(){return t[16](t[34])}return{c(){e=x("button"),n=O(s),r=x("br"),F(e,"class","svelte-gm5hjn")},m(t,s){C(t,e,s),A(e,n),C(t,r,s),i||(o=M(e,"click",a),i=!0)},p(e,r){t=e,4&r[0]&&s!==(s=t[34].name+"")&&U(n,s)},d(t){t&&D(e),t&&D(r),i=!1,o()}}}function pb(t){let e,n,r,i,o,s,a,u,c=0==t[5]&&db(t);const h=[Ab,Sb],l=[];function f(t,e){return t[4]?0:1}return i=f(t),o=l[i]=h[i](t),a=new He({}),{c(){e=x("h1"),e.textContent="Ice Dodo Leaderboard",n=P(),c&&c.c(),r=P(),o.c(),s=P(),_t(a.$$.fragment)},m(t,o){C(t,e,o),C(t,n,o),c&&c.m(t,o),C(t,r,o),l[i].m(t,o),C(t,s,o),It(a,t,o),u=!0},p(t,e){0==t[5]?c?(c.p(t,e),32&e[0]&&vt(c,1)):(c=db(t),c.c(),vt(c,1),c.m(r.parentNode,r)):c&&(pt(),gt(c,1,1,(()=>{c=null})),dt());let n=i;i=f(t),i===n?l[i].p(t,e):(pt(),gt(l[n],1,1,(()=>{l[n]=null})),dt(),o=l[i],o?o.p(t,e):(o=l[i]=h[i](t),o.c()),vt(o,1),o.m(s.parentNode,s))},i(t){u||(vt(c),vt(o),vt(a.$$.fragment,t),u=!0)},o(t){gt(c),gt(o),gt(a.$$.fragment,t),u=!1},d(t){t&&D(e),t&&D(n),c&&c.d(t),t&&D(r),l[i].d(t),t&&D(s),Tt(a,t)}}}function db(t){let e,n,r,i,o,s,a,u,c,h,l,f,p,d,v,g;const m=[mb,gb,vb],y=[];function b(t,e){return"loading"==t[8]?0:"missing"==t[8]?1:2}s=b(t),a=y[s]=m[s](t);let w=function(t,e){return"overall"==t[9]?wb:"exp"==t[10]?bb:"speedrun"==t[10]?yb:void 0}(t),_=w&&w(t);let I=function(t,e){return"overall"==t[9]?Eb:Tb}(t)(t);return{c(){e=x("h2"),n=O(t[0]),r=P(),i=O(t[1]),o=P(),a.c(),u=P(),c=x("div"),_&&_.c(),h=P(),l=x("button"),l.textContent="Change Map",f=P(),I.c(),F(l,"class","svelte-gm5hjn"),F(c,"class","svelte-gm5hjn")},m(a,p){C(a,e,p),A(e,n),A(e,r),A(e,i),C(a,o,p),y[s].m(a,p),C(a,u,p),C(a,c,p),_&&_.m(c,null),A(c,h),A(c,l),A(c,f),I.m(c,null),d=!0,v||(g=M(l,"click",t[21]),v=!0)},p(t,e){(!d||1&e[0])&&U(n,t[0]),(!d||2&e[0])&&U(i,t[1]);let r=s;s=b(t),s===r?y[s].p(t,e):(pt(),gt(y[r],1,1,(()=>{y[r]=null})),dt(),a=y[s],a?a.p(t,e):(a=y[s]=m[s](t),a.c()),vt(a,1),a.m(u.parentNode,u)),_&&_.p(t,e),I.p(t,e)},i(t){d||(vt(a),it((()=>{p||(p=yt(c,$e,{},!0)),p.run(1)})),d=!0)},o(t){gt(a),p||(p=yt(c,$e,{},!1)),p.run(0),d=!1},d(t){t&&D(e),t&&D(o),y[s].d(t),t&&D(u),t&&D(c),_&&_.d(),I.d(),t&&p&&p.end(),v=!1,g()}}}function vb(e){let n,r,i;return{c(){n=x("p"),r=x("strong"),i=O(e[8])},m(t,e){C(t,n,e),A(n,r),A(r,i)},p(t,e){256&e[0]&&U(i,t[8])},i:t,o:t,d(t){t&&D(n)}}}function gb(e){let n;return{c(){n=x("p"),n.textContent=":)"},m(t,e){C(t,n,e)},p:t,i:t,o:t,d(t){t&&D(n)}}}function mb(e){let n,r,i;return{c(){n=x("div"),n.innerHTML="<p>Loading...</p>"},m(t,e){C(t,n,e),i=!0},p:t,i(t){i||(it((()=>{r||(r=yt(n,$e,{},!0)),r.run(1)})),i=!0)},o(t){r||(r=yt(n,$e,{},!1)),r.run(0),i=!1},d(t){t&&D(n),t&&r&&r.end()}}}function yb(e){let n,r,i;return{c(){n=x("button"),n.textContent="Sort by Completion Count",F(n,"class","svelte-gm5hjn")},m(t,o){C(t,n,o),r||(i=M(n,"click",e[20]),r=!0)},p:t,d(t){t&&D(n),r=!1,i()}}}function bb(e){let n,r,i;return{c(){n=x("button"),n.textContent="Sort by Fastest Speedrun",F(n,"class","svelte-gm5hjn")},m(t,o){C(t,n,o),r||(i=M(n,"click",e[19]),r=!0)},p:t,d(t){t&&D(n),r=!1,i()}}}function wb(t){let e;let n=function(t,e){return"percent"==t[10]?Ib:"dodo_score"==t[10]?_b:void 0}(t),r=n&&n(t);return{c(){r&&r.c(),e=L()},m(t,n){r&&r.m(t,n),C(t,e,n)},p(t,e){r&&r.p(t,e)},d(t){r&&r.d(t),t&&D(e)}}}function _b(e){let n,r,i;return{c(){n=x("button"),n.textContent="Sort by Dodo Tears",F(n,"class","svelte-gm5hjn")},m(t,o){C(t,n,o),r||(i=M(n,"click",e[18]),r=!0)},p:t,d(t){t&&D(n),r=!1,i()}}}function Ib(e){let n,r,i;return{c(){n=x("button"),n.textContent="Sort by Dodo Sweat",F(n,"class","svelte-gm5hjn")},m(t,o){C(t,n,o),r||(i=M(n,"click",e[17]),r=!0)},p:t,d(t){t&&D(n),r=!1,i()}}}function Tb(t){let e,n,r;return{c(){e=x("a"),n=O("Play "),r=O(t[0]),F(e,"class","button"),F(e,"target","_blank"),F(e,"href","/icedodo#"+t[9])},m(t,i){C(t,e,i),A(e,n),A(e,r)},p(t,e){1&e[0]&&U(r,t[0])},d(t){t&&D(e)}}}function Eb(e){let n;return{c(){n=x("a"),n.textContent="Play Ice Dodo",F(n,"class","button"),F(n,"target","_blank"),F(n,"href","/icedodo")},m(t,e){C(t,n,e)},p:t,d(t){t&&D(n)}}}function Sb(t){let e,n,r,i,o,s,a,u,c,h,l,f,p,d,v,g,m,y,b,w,_;let I=function(t,e){return"overall"==t[9]?Cb:"exp"==t[10]?Nb:"speedrun"==t[10]?kb:void 0}(t),T=I&&I(t),E=t[6],S=[];for(let e=0;e<E.length;e+=1)S[e]=Fb(rb(t,E,e));let k=0==t[5]&&Ub(t);const N=[Wb,zb,Gb],M=[];function j(t,e){return"loading"==t[7]?0:"missing"==t[7]?1:2}return y=j(t),b=M[y]=N[y](t),{c(){e=x("div"),n=x("table"),r=x("tr"),i=x("th"),i.textContent="Rank",o=P(),s=x("th"),s.textContent="Player Name",a=P(),T&&T.c(),u=P();for(let t=0;t<S.length;t+=1)S[t].c();h=P(),l=x("br"),f=P(),k&&k.c(),p=P(),d=x("h1"),v=O(t[0]),g=O(" Video"),m=P(),b.c(),w=L(),F(i,"class","svelte-gm5hjn"),F(s,"class","svelte-gm5hjn"),F(r,"id","first_row"),F(r,"class","svelte-gm5hjn"),F(n,"class","svelte-gm5hjn")},m(t,c){C(t,e,c),A(e,n),A(n,r),A(r,i),A(r,o),A(r,s),A(r,a),T&&T.m(r,null),A(n,u);for(let t=0;t<S.length;t+=1)S[t].m(n,null);C(t,h,c),C(t,l,c),C(t,f,c),k&&k.m(t,c),C(t,p,c),C(t,d,c),A(d,v),A(d,g),C(t,m,c),M[y].m(t,c),C(t,w,c),_=!0},p(t,e){if(T&&T.p(t,e),1600&e[0]){let r;for(E=t[6],r=0;r<E.length;r+=1){const i=rb(t,E,r);S[r]?S[r].p(i,e):(S[r]=Fb(i),S[r].c(),S[r].m(n,null))}for(;r<S.length;r+=1)S[r].d(1);S.length=E.length}0==t[5]?k?(k.p(t,e),32&e[0]&&vt(k,1)):(k=Ub(t),k.c(),vt(k,1),k.m(p.parentNode,p)):k&&(pt(),gt(k,1,1,(()=>{k=null})),dt()),(!_||1&e[0])&&U(v,t[0]);let r=y;y=j(t),y===r?M[y].p(t,e):(pt(),gt(M[r],1,1,(()=>{M[r]=null})),dt(),b=M[y],b?b.p(t,e):(b=M[y]=N[y](t),b.c()),vt(b,1),b.m(w.parentNode,w))},i(t){_||(it((()=>{c||(c=yt(e,$e,{},!0)),c.run(1)})),vt(k),vt(b),_=!0)},o(t){c||(c=yt(e,$e,{},!1)),c.run(0),gt(k),gt(b),_=!1},d(t){t&&D(e),T&&T.d(),R(S,t),t&&c&&c.end(),t&&D(h),t&&D(l),t&&D(f),k&&k.d(t),t&&D(p),t&&D(d),t&&D(m),M[y].d(t),t&&D(w)}}}function Ab(e){let n,r,i;return{c(){n=x("h1"),n.textContent="Loading...",r=P(),i=x("div"),F(i,"class","loader svelte-gm5hjn")},m(t,e){C(t,n,e),C(t,r,e),C(t,i,e)},p:t,i:t,o:t,d(t){t&&D(n),t&&D(r),t&&D(i)}}}function kb(e){let n,r,i;return{c(){n=x("th"),n.textContent="Fastest Speedrun",r=P(),i=x("th"),i.textContent="Completion count",F(n,"class","svelte-gm5hjn"),F(i,"class","svelte-gm5hjn")},m(t,e){C(t,n,e),C(t,r,e),C(t,i,e)},p:t,d(t){t&&D(n),t&&D(r),t&&D(i)}}}function Nb(e){let n,r,i;return{c(){n=x("th"),n.textContent="Completion count",r=P(),i=x("th"),i.textContent="Fastest Speedrun",F(n,"class","svelte-gm5hjn"),F(i,"class","svelte-gm5hjn")},m(t,e){C(t,n,e),C(t,r,e),C(t,i,e)},p:t,d(t){t&&D(n),t&&D(r),t&&D(i)}}}function Cb(e){let n;let r=function(t,e){return"percent"==t[10]?Rb:"dodo_score"==t[10]?Db:void 0}(e),i=r&&r(e);return{c(){i&&i.c(),n=L()},m(t,e){i&&i.m(t,e),C(t,n,e)},p:t,d(t){i&&i.d(t),t&&D(n)}}}function Db(t){let e,n,r;return{c(){e=x("th"),e.textContent="Dodo Sweat",n=P(),r=x("th"),r.textContent="Dodo Tears",F(e,"class","svelte-gm5hjn"),F(r,"class","svelte-gm5hjn")},m(t,i){C(t,e,i),C(t,n,i),C(t,r,i)},d(t){t&&D(e),t&&D(n),t&&D(r)}}}function Rb(t){let e,n,r;return{c(){e=x("th"),e.textContent="Dodo Tears",n=P(),r=x("th"),r.textContent="Dodo Sweat",F(e,"class","svelte-gm5hjn"),F(r,"class","svelte-gm5hjn")},m(t,i){C(t,e,i),C(t,n,i),C(t,r,i)},d(t){t&&D(e),t&&D(n),t&&D(r)}}}function xb(t){let e,n,r,i,o,s=t[31].map_timer+"",a=t[31].map_exp+"";return{c(){e=x("th"),n=O(s),r=P(),i=x("th"),o=O(a),F(e,"class","svelte-gm5hjn"),F(i,"class","svelte-gm5hjn")},m(t,s){C(t,e,s),A(e,n),C(t,r,s),C(t,i,s),A(i,o)},p(t,e){64&e[0]&&s!==(s=t[31].map_timer+"")&&U(n,s),64&e[0]&&a!==(a=t[31].map_exp+"")&&U(o,a)},d(t){t&&D(e),t&&D(r),t&&D(i)}}}function Ob(t){let e,n,r,i,o,s=t[31].map_exp+"",a=t[31].map_timer+"";return{c(){e=x("th"),n=O(s),r=P(),i=x("th"),o=O(a),F(e,"class","svelte-gm5hjn"),F(i,"class","svelte-gm5hjn")},m(t,s){C(t,e,s),A(e,n),C(t,r,s),C(t,i,s),A(i,o)},p(t,e){64&e[0]&&s!==(s=t[31].map_exp+"")&&U(n,s),64&e[0]&&a!==(a=t[31].map_timer+"")&&U(o,a)},d(t){t&&D(e),t&&D(r),t&&D(i)}}}function Pb(t){let e;let n=function(t,e){return"percent"==t[10]?Mb:"dodo_score"==t[10]?Lb:void 0}(t),r=n&&n(t);return{c(){r&&r.c(),e=L()},m(t,n){r&&r.m(t,n),C(t,e,n)},p(t,e){r&&r.p(t,e)},d(t){r&&r.d(t),t&&D(e)}}}function Lb(t){let e,n,r,i,o,s,a,u=t[31].mem_dodo_score+"",c=t[31].percent+"";return{c(){e=x("th"),n=O(u),r=O(" pt"),i=P(),o=x("th"),s=O(c),a=O(" %"),F(e,"class","svelte-gm5hjn"),F(o,"class","svelte-gm5hjn")},m(t,u){C(t,e,u),A(e,n),A(e,r),C(t,i,u),C(t,o,u),A(o,s),A(o,a)},p(t,e){64&e[0]&&u!==(u=t[31].mem_dodo_score+"")&&U(n,u),64&e[0]&&c!==(c=t[31].percent+"")&&U(s,c)},d(t){t&&D(e),t&&D(i),t&&D(o)}}}function Mb(t){let e,n,r,i,o,s,a,u=t[31].percent+"",c=t[31].mem_dodo_score+"";return{c(){e=x("th"),n=O(u),r=O(" %"),i=P(),o=x("th"),s=O(c),a=O(" pt"),F(e,"class","svelte-gm5hjn"),F(o,"class","svelte-gm5hjn")},m(t,u){C(t,e,u),A(e,n),A(e,r),C(t,i,u),C(t,o,u),A(o,s),A(o,a)},p(t,e){64&e[0]&&u!==(u=t[31].percent+"")&&U(n,u),64&e[0]&&c!==(c=t[31].mem_dodo_score+"")&&U(s,c)},d(t){t&&D(e),t&&D(i),t&&D(o)}}}function Fb(t){let e,n,r,i,o,s,a,u,c,h,l=t[31].rank+"",f=t[31].mem_name+"";let p=function(t,e){return"overall"==t[9]?Pb:"exp"==t[10]?Ob:"speedrun"==t[10]?xb:void 0}(t),d=p&&p(t);return{c(){e=x("tr"),n=x("th"),r=O("#"),i=O(l),o=P(),s=x("th"),a=O(f),u=P(),d&&d.c(),c=P(),F(n,"class","svelte-gm5hjn"),F(s,"class","svelte-gm5hjn"),F(e,"class",h=w(t[31].class)+" svelte-gm5hjn")},m(t,h){C(t,e,h),A(e,n),A(n,r),A(n,i),A(e,o),A(e,s),A(s,a),A(e,u),d&&d.m(e,null),A(e,c)},p(t,n){64&n[0]&&l!==(l=t[31].rank+"")&&U(i,l),64&n[0]&&f!==(f=t[31].mem_name+"")&&U(a,f),d&&d.p(t,n),64&n[0]&&h!==(h=w(t[31].class)+" svelte-gm5hjn")&&F(e,"class",h)},d(t){t&&D(e),d&&d.d()}}}function Ub(t){let e,n,r,i,o,s,a,u;let c=function(t,e){return"overall"==t[9]?qb:"exp"==t[10]?Vb:"speedrun"==t[10]?jb:void 0}(t),h=c&&c(t);let l=function(t,e){return"overall"==t[9]?Hb:Kb}(t)(t);return{c(){e=x("div"),h&&h.c(),n=P(),r=x("button"),r.textContent="Change Map",i=P(),l.c(),F(r,"class","svelte-gm5hjn"),F(e,"class","svelte-gm5hjn")},m(o,c){C(o,e,c),h&&h.m(e,null),A(e,n),A(e,r),A(e,i),l.m(e,null),s=!0,a||(u=M(r,"click",t[26]),a=!0)},p(t,e){h&&h.p(t,e),l.p(t,e)},i(t){s||(it((()=>{o||(o=yt(e,$e,{},!0)),o.run(1)})),s=!0)},o(t){o||(o=yt(e,$e,{},!1)),o.run(0),s=!1},d(t){t&&D(e),h&&h.d(),l.d(),t&&o&&o.end(),a=!1,u()}}}function jb(e){let n,r,i;return{c(){n=x("button"),n.textContent="Sort by Completion Count",F(n,"class","svelte-gm5hjn")},m(t,o){C(t,n,o),r||(i=M(n,"click",e[25]),r=!0)},p:t,d(t){t&&D(n),r=!1,i()}}}function Vb(e){let n,r,i;return{c(){n=x("button"),n.textContent="Sort by Fastest Speedrun",F(n,"class","svelte-gm5hjn")},m(t,o){C(t,n,o),r||(i=M(n,"click",e[24]),r=!0)},p:t,d(t){t&&D(n),r=!1,i()}}}function qb(t){let e;let n=function(t,e){return"percent"==t[10]?$b:"dodo_score"==t[10]?Bb:void 0}(t),r=n&&n(t);return{c(){r&&r.c(),e=L()},m(t,n){r&&r.m(t,n),C(t,e,n)},p(t,e){r&&r.p(t,e)},d(t){r&&r.d(t),t&&D(e)}}}function Bb(e){let n,r,i;return{c(){n=x("button"),n.textContent="Sort by Dodo Tears",F(n,"class","svelte-gm5hjn")},m(t,o){C(t,n,o),r||(i=M(n,"click",e[23]),r=!0)},p:t,d(t){t&&D(n),r=!1,i()}}}function $b(e){let n,r,i;return{c(){n=x("button"),n.textContent="Sort by Dodo Sweat",F(n,"class","svelte-gm5hjn")},m(t,o){C(t,n,o),r||(i=M(n,"click",e[22]),r=!0)},p:t,d(t){t&&D(n),r=!1,i()}}}function Kb(t){let e,n,r;return{c(){e=x("a"),n=O("Play "),r=O(t[0]),F(e,"class","button"),F(e,"target","_blank"),F(e,"href","/icedodo#"+t[9])},m(t,i){C(t,e,i),A(e,n),A(e,r)},p(t,e){1&e[0]&&U(r,t[0])},d(t){t&&D(e)}}}function Hb(e){let n;return{c(){n=x("a"),n.textContent="Play Ice Dodo",F(n,"class","button"),F(n,"target","_blank"),F(n,"href","/icedodo")},m(t,e){C(t,n,e)},p:t,d(t){t&&D(n)}}}function Gb(e){let n,r;return{c(){n=x("iframe"),F(n,"width","560"),F(n,"height","315"),c(n.src,r=e[7])||F(n,"src",r),F(n,"title","YouTube video player"),F(n,"frameborder","0"),F(n,"allow","accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"),n.allowFullscreen=!0},m(t,e){C(t,n,e)},p(t,e){128&e[0]&&!c(n.src,r=t[7])&&F(n,"src",r)},i:t,o:t,d(t){t&&D(n)}}}function zb(e){let n,r,i,o,s,a;return{c(){n=x("h2"),n.textContent="Oh no! Video is missing.",r=P(),i=x("p"),i.textContent="Please ask a Map Tester to run the Parke Bot command:",o=P(),s=x("p"),a=x("strong"),a.textContent=`p.video ${e[9]} YT_VIDEO_LINK`},m(t,e){C(t,n,e),C(t,r,e),C(t,i,e),C(t,o,e),C(t,s,e),A(s,a)},p:t,i:t,o:t,d(t){t&&D(n),t&&D(r),t&&D(i),t&&D(o),t&&D(s)}}}function Wb(e){let n,r,i;return{c(){n=x("div"),n.innerHTML="<p>Loading...</p>"},m(t,e){C(t,n,e),i=!0},p:t,i(t){i||(it((()=>{r||(r=yt(n,$e,{},!0)),r.run(1)})),i=!0)},o(t){r||(r=yt(n,$e,{},!1)),r.run(0),i=!1},d(t){t&&D(n),t&&r&&r.end()}}}function Qb(t){let e,n,r,i,o,s,a,u,h=1==t[3]&&sb(t),l=0==t[3]&&pb(t);return{c(){e=x("script"),r=P(),i=x("main"),h&&h.c(),o=P(),l&&l.c(),nb.title="Icedodo Leaderboard",F(e,"type","text/javascript"),c(e.src,n="/icedodo/js/map_info.js")||F(e,"src","/icedodo/js/map_info.js")},m(n,c){A(nb.head,e),C(n,r,c),C(n,i,c),h&&h.m(i,null),A(i,o),l&&l.m(i,null),s=!0,a||(u=M(e,"load",t[12]),a=!0)},p(t,e){1==t[3]?h?h.p(t,e):(h=sb(t),h.c(),h.m(i,o)):h&&(h.d(1),h=null),0==t[3]?l?(l.p(t,e),8&e[0]&&vt(l,1)):(l=pb(t),l.c(),vt(l,1),l.m(i,null)):l&&(pt(),gt(l,1,1,(()=>{l=null})),dt())},i(t){s||(vt(l),s=!0)},o(t){gt(l),s=!1},d(t){D(e),t&&D(r),t&&D(i),h&&h.d(),l&&l.d(),a=!1,u()}}}function Xb(t,e,n){let r=new URLSearchParams(document.location.search.substring(1));var i=r.get("map_id"),o=r.get("sort_by"),s="",a="",u=[],c=null;function h(t,e){r.set(t,e),"map_id"==t&&"overall"==e&&-1==["dodo_score","percent"].indexOf(o)?r.set("sort_by","dodo_score"):"map_id"==t&&"overall"!=e&&-1==["exp","speedrun"].indexOf(o)&&r.set("sort_by","exp");var n=r.toString(),i=`${window.location.protocol}//${window.location.host}/icelb?${n}`;window.location=i}var l=!1,f=!0,p=!0,d=[],v=100,g="loading",m="loading";W((async()=>{qy.onAuthStateChanged((function(t){var e=window.location.search,r=null!=t?`&firebase_uid=${t.uid}`:"";fetch(`https://fn.onionfist.com/icelb${e}${r}`).then((t=>t.json())).then((t=>{if(console.log("Data",t),t.error)h("map_id","overall");else{By.collection("icelb_videos").doc(i).get().then((t=>{n(7,g="missing"),n(8,m="missing"),t.exists&&(null!=t.data().link&&(n(7,g=t.data().link),n(7,g=g.replace("watch?v=","embed/"))),null!=t.data().desc&&n(8,m=t.data().desc))})),n(4,f=!1),n(6,d=t);for(var e=0;e<d.length;e++)1==d[e].rank_unknown?n(6,d[e].rank="...",d):n(6,d[e].rank=e+1,d),n(6,d[e].class=1==d[e].is_me?"my_row":"",d),null!=d[e].mem_maps_beaten&&n(6,d[e].percent=Math.round(d[e].mem_maps_beaten/v*100*100)/100,d)}})).catch((t=>{console.log(t),n(4,f=!1)}))}))}));return[s,a,c,l,f,p,d,g,m,i,o,h,function(){console.log(map_info),v=0;for(let t in map_info)"bin"!=t&&(v+=map_info[t].length,u=[...u,...map_info[t]]);if("overall"==i)n(0,s="Overall");else for(let t of u)t.id==i&&n(0,s=t.name);n(1,a={dodo_score:"Dodo Sweat",percent:"Dodo Tear",exp:"Completion Count",speedrun:"Fastest Speedrun"}[o]||""),n(5,p=!1)},()=>h("map_id","overall"),t=>n(2,c=t),t=>n(2,c=t),t=>h("map_id",t.id),()=>h("sort_by","dodo_score"),()=>h("sort_by","percent"),()=>h("sort_by","speedrun"),()=>h("sort_by","exp"),()=>n(3,l=!0),()=>h("sort_by","dodo_score"),()=>h("sort_by","percent"),()=>h("sort_by","speedrun"),()=>h("sort_by","exp"),()=>n(3,l=!0)]}class Yb extends St{constructor(t){super(),Et(this,t,Xb,Qb,a,{},null,[-1,-1])}}function Jb(e){let n,r,i,o,s,a,u;return a=new He({}),{c(){n=x("main"),r=x("h1"),r.textContent="404 Not Found",i=P(),o=x("a"),o.textContent="Go to Onionfist.com",s=P(),_t(a.$$.fragment),F(o,"href","/")},m(t,e){C(t,n,e),A(n,r),A(n,i),A(n,o),A(n,s),It(a,n,null),u=!0},p:t,i(t){u||(vt(a.$$.fragment,t),u=!0)},o(t){gt(a.$$.fragment,t),u=!1},d(t){t&&D(n),Tt(a)}}}class Zb extends St{constructor(t){super(),Et(this,t,null,Jb,a,{})}}function tw(t,e,n){const r=t.slice();return r[6]=e[n],r}function ew(t){let e,n,r,i,o,s=t[6]+"";return{c(){e=x("div"),n=x("p"),r=O(s)},m(t,i){C(t,e,i),A(e,n),A(n,r),o=!0},p(t,e){(!o||1&e)&&s!==(s=t[6]+"")&&U(r,s)},i(t){o||(it((()=>{i||(i=yt(e,$e,{},!0)),i.run(1)})),o=!0)},o(t){i||(i=yt(e,$e,{},!1)),i.run(0),o=!1},d(t){t&&D(e),t&&i&&i.end()}}}function nw(t){let e,n,r,i,s,a,u,h,l,f,p,d=t[0],v=[];for(let e=0;e<d.length;e+=1)v[e]=ew(tw(t,d,e));const g=t=>gt(v[t],1,1,(()=>{v[t]=null}));return{c(){e=x("script"),r=P(),i=x("main"),s=x("p"),s.textContent="Betachan is back!",a=P();for(let t=0;t<v.length;t+=1)v[t].c();u=P(),h=x("input"),document.title="Betachan",c(e.src,n="https://code.jquery.com/jquery-3.6.0.js")||F(e,"src","https://code.jquery.com/jquery-3.6.0.js"),F(e,"integrity","sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="),F(e,"crossorigin","anonymous"),F(h,"type","text"),F(h,"class","todo-input"),F(h,"placeholder","type and hit enter...")},m(n,o){A(document.head,e),C(n,r,o),C(n,i,o),A(i,s),A(i,a);for(let t=0;t<v.length;t+=1)v[t].m(i,null);A(i,u),A(i,h),j(h,t[1]),l=!0,f||(p=[M(e,"load",t[2]),M(h,"input",t[4]),M(h,"keydown",t[3])],f=!0)},p(t,[e]){if(1&e){let n;for(d=t[0],n=0;n<d.length;n+=1){const r=tw(t,d,n);v[n]?(v[n].p(r,e),vt(v[n],1)):(v[n]=ew(r),v[n].c(),vt(v[n],1),v[n].m(i,u))}for(pt(),n=d.length;n<v.length;n+=1)g(n);dt()}2&e&&h.value!==t[1]&&j(h,t[1])},i(t){if(!l){for(let t=0;t<d.length;t+=1)vt(v[t]);l=!0}},o(t){v=v.filter(Boolean);for(let t=0;t<v.length;t+=1)gt(v[t]);l=!1},d(t){D(e),t&&D(r),t&&D(i),R(v,t),f=!1,o(p)}}}function rw(t,e,n){var r=null,i=["B: Hi","P: Yo","B: How are you?"],o="";return W((async()=>{})),[i,o,function(){r=function(t,e){window.$.post("https://fn.onionfist.com/betachan_v1",{msg_p:t,history:i},(function(t,n){console.log("RECEIVED DATA"),console.log(t),e(t)}))}},function(t){13===t.keyCode&&null!=r&&(r(o,(function(t){n(0,i=t.history)})),n(1,o=""))},function(){o=this.value,n(1,o)}]}class iw extends St{constructor(t){super(),Et(this,t,rw,nw,a,{})}}function ow(t){let e,n;return e=new ze({}),{c(){_t(e.$$.fragment)},m(t,r){It(e,t,r),n=!0},i(t){n||(vt(e.$$.fragment,t),n=!0)},o(t){gt(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function sw(t){let e,n,r,i,o,s;return r=new eb({}),{c(){e=x("div"),n=x("div"),_t(r.$$.fragment),i=P(),o=x("div"),o.innerHTML='<img src="assets/extinct.png" style="width: 300px; margin-bottom:-175px;" class="svelte-1h2qcvx"/> \n\t\t\t\t\t<br class="svelte-1h2qcvx"/> \n\t\t\t\t\t<div id="onionfist-com_300x600_1" class="svelte-1h2qcvx"></div>',F(n,"class","svelte-1h2qcvx"),F(o,"class","m_part svelte-1h2qcvx"),F(e,"class","m_cont svelte-1h2qcvx")},m(t,a){C(t,e,a),A(e,n),It(r,n,null),A(e,i),A(e,o),s=!0},i(t){s||(vt(r.$$.fragment,t),s=!0)},o(t){gt(r.$$.fragment,t),s=!1},d(t){t&&D(e),Tt(r)}}}function aw(t){let e,n,r,i,o,s;return r=new Yb({}),{c(){e=x("div"),n=x("div"),_t(r.$$.fragment),i=P(),o=x("div"),o.innerHTML='<img src="assets/extinct.png" style="width: 300px; margin-bottom:-175px;" class="svelte-1h2qcvx"/> \n\t\t\t\t\t<br class="svelte-1h2qcvx"/> \n\t\t\t\t\t<div id="onionfist-com_300x600_1" class="svelte-1h2qcvx"></div>',F(n,"class","svelte-1h2qcvx"),F(o,"class","m_part svelte-1h2qcvx"),F(e,"class","m_cont svelte-1h2qcvx")},m(t,a){C(t,e,a),A(e,n),It(r,n,null),A(e,i),A(e,o),s=!0},i(t){s||(vt(r.$$.fragment,t),s=!0)},o(t){gt(r.$$.fragment,t),s=!1},d(t){t&&D(e),Tt(r)}}}function uw(t){let e,n;return e=new Zb({}),{c(){_t(e.$$.fragment)},m(t,r){It(e,t,r),n=!0},i(t){n||(vt(e.$$.fragment,t),n=!0)},o(t){gt(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function cw(t){let e,n;return e=new iw({}),{c(){_t(e.$$.fragment)},m(t,r){It(e,t,r),n=!0},i(t){n||(vt(e.$$.fragment,t),n=!0)},o(t){gt(e.$$.fragment,t),n=!1},d(t){Tt(e,t)}}}function hw(t){let e,n,r,i,o,s,a,u,c,h,l;return n=new Ve({props:{path:"/",$$slots:{default:[ow]},$$scope:{ctx:t}}}),i=new Ve({props:{path:"/icesave",$$slots:{default:[sw]},$$scope:{ctx:t}}}),s=new Ve({props:{path:"/icelb",$$slots:{default:[aw]},$$scope:{ctx:t}}}),u=new Ve({props:{path:"/map/:x",$$slots:{default:[uw]},$$scope:{ctx:t}}}),h=new Ve({props:{path:"/betachan",$$slots:{default:[cw]},$$scope:{ctx:t}}}),{c(){e=x("center"),_t(n.$$.fragment),r=P(),_t(i.$$.fragment),o=P(),_t(s.$$.fragment),a=P(),_t(u.$$.fragment),c=P(),_t(h.$$.fragment)},m(t,f){C(t,e,f),It(n,e,null),A(e,r),It(i,e,null),A(e,o),It(s,e,null),A(e,a),It(u,e,null),A(e,c),It(h,e,null),l=!0},p(t,e){const r={};1&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r);const o={};1&e&&(o.$$scope={dirty:e,ctx:t}),i.$set(o);const a={};1&e&&(a.$$scope={dirty:e,ctx:t}),s.$set(a);const c={};1&e&&(c.$$scope={dirty:e,ctx:t}),u.$set(c);const l={};1&e&&(l.$$scope={dirty:e,ctx:t}),h.$set(l)},i(t){l||(vt(n.$$.fragment,t),vt(i.$$.fragment,t),vt(s.$$.fragment,t),vt(u.$$.fragment,t),vt(h.$$.fragment,t),l=!0)},o(t){gt(n.$$.fragment,t),gt(i.$$.fragment,t),gt(s.$$.fragment,t),gt(u.$$.fragment,t),gt(h.$$.fragment,t),l=!1},d(t){t&&D(e),Tt(n),Tt(i),Tt(s),Tt(u),Tt(h)}}}function lw(t){let e,n,r,i,o,s,a,u;return o=new Ae({props:{primary:!1,$$slots:{default:[hw]},$$scope:{ctx:t}}}),{c(){e=x("script"),e.textContent='window.aiptag = window.aiptag || {cmd: []};\n    aiptag.cmd.display = aiptag.cmd.display || [];\n    aiptag.cmd.player = aiptag.cmd.player || [];\n    aiptag.cmp = {\n      show: true,\n      position: "centered",\n      button: true,\n      buttonText: "Privacy settings",\n      buttonPosition: "bottom-left"\n    }\n  ',n=x("script"),i=P(),_t(o.$$.fragment),document.title="Onionfist",F(e,"type","text/javascript"),n.async=!0,c(n.src,r="//api.adinplay.com/libs/aiptag/pub/ONF/onionfist.com/tag.min.js")||F(n,"src","//api.adinplay.com/libs/aiptag/pub/ONF/onionfist.com/tag.min.js")},m(t,r){A(document.head,e),A(document.head,n),C(t,i,r),It(o,t,r),s=!0,a||(u=M(n,"load",fw),a=!0)},p(t,[e]){const n={};1&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){s||(vt(o.$$.fragment,t),s=!0)},o(t){gt(o.$$.fragment,t),s=!1},d(t){D(e),D(n),t&&D(i),Tt(o,t),a=!1,u()}}}function fw(){aiptag.cmd.display.push((function(){aipDisplayTag.display("onionfist-com_300x600_1")}))}return new class extends St{constructor(t){super(),Et(this,t,null,lw,a,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
